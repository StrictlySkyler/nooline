function onYouTubePlayerAPIReady(){trace("GLOBAL YOUTUBE API CALLED"),VMM.ExternalAPI.youtube.onAPIReady()}"undefined"!=typeof VMM&&void 0===VMM.ExternalAPI&&(VMM.ExternalAPI={keys:{google:"",flickr:"",twitter:""},keys_master:{vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"jwNGnYw4hE9lmAez4ll0QD+jo6SKBJFknkopLS4FrSAuGfIwyj57AusuR0s8dAo=",twitter:""},init:function(){return this},setKeys:function(e){VMM.ExternalAPI.keys=e},pushQues:function(){VMM.master_config.googlemaps.active&&VMM.ExternalAPI.googlemaps.pushQue(),VMM.master_config.youtube.active&&VMM.ExternalAPI.youtube.pushQue(),VMM.master_config.soundcloud.active&&VMM.ExternalAPI.soundcloud.pushQue(),VMM.master_config.googledocs.active&&VMM.ExternalAPI.googledocs.pushQue(),VMM.master_config.googleplus.active&&VMM.ExternalAPI.googleplus.pushQue(),VMM.master_config.wikipedia.active&&VMM.ExternalAPI.wikipedia.pushQue(),VMM.master_config.vimeo.active&&VMM.ExternalAPI.vimeo.pushQue(),VMM.master_config.vine.active&&VMM.ExternalAPI.vine.pushQue(),VMM.master_config.twitter.active&&VMM.ExternalAPI.twitter.pushQue(),VMM.master_config.flickr.active&&VMM.ExternalAPI.flickr.pushQue(),VMM.master_config.webthumb.active&&VMM.ExternalAPI.webthumb.pushQue()},twitter:{tweetArray:[],get:function(e){var t={mid:e.id,id:e.uid};VMM.master_config.twitter.que.push(t),VMM.master_config.twitter.active=!0},create:function(e,t){""+e.mid,{twitterid:e.mid},"http://api.twitter.com/1/statuses/show.json?id="+e.mid+"&include_entities=true&callback=?",VMM.ExternalAPI.twitter.getOEmbed(e,t)},errorTimeOut:function(e){trace("TWITTER JSON ERROR TIMEOUT "+e.mid),VMM.attachElement("#"+(""+e.id),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+e.mid)),VMM.getJSON("http://api.twitter.com/1/account/rate_limit_status.json",function(t){trace("REMAINING TWITTER API CALLS "+t.remaining_hits),trace("TWITTER RATE LIMIT WILL RESET AT "+t.reset_time);var a="";0==t.remaining_hits?(a="<p>You've reached the maximum number of tweets you can load in an hour.</p>",a+="<p>You can view tweets again starting at: <br/>"+t.reset_time+"</p>"):a="<p>Still waiting on Twitter. "+e.mid+"</p>",VMM.attachElement("#"+(""+e.id),VMM.MediaElement.loadingmessage(a))})},errorTimeOutOembed:function(e){trace("TWITTER JSON ERROR TIMEOUT "+e.mid),VMM.attachElement("#"+(""+e.id),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+e.mid))},pushQue:function(){VMM.master_config.twitter.que.length>0&&(VMM.ExternalAPI.twitter.create(VMM.master_config.twitter.que[0],VMM.ExternalAPI.twitter.pushQue),VMM.master_config.twitter.que.remove(0))},getOEmbed:function(e,t){var a="http://api.twitter.com/1/statuses/oembed.json?id="+e.mid+"&omit_script=true&include_entities=true&callback=?",i=setTimeout(VMM.ExternalAPI.twitter.errorTimeOutOembed,VMM.master_config.timers.api,e);VMM.getJSON(a,function(t){var a="",i="";a+=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",i=t.author_url.split("twitter.com/")[1],a+="<div class='vcard author'>",a+="<a class='screen-name url' href='"+t.author_url+"' target='_blank'>",a+="<span class='avatar'></span>",a+="<span class='fn'>"+t.author_name+"</span>",a+="<span class='nickname'>@"+i+"<span class='thumbnail-inline'></span></span>",a+="</a>",a+="</div>",VMM.attachElement("#"+(""+e.id),a),VMM.attachElement("#text_thumb_"+(""+e.id),t.html),VMM.attachElement("#marker_content_"+(""+e.id),t.html)}).error(function(t,a){trace("TWITTER error"),trace("TWITTER ERROR: "+a+" "+t.responseText),clearTimeout(i),VMM.attachElement("#"+e.id,VMM.MediaElement.loadingmessage("ERROR LOADING TWEET "+e.mid))}).success(function(){clearTimeout(i),clearTimeout(callback_timeout),t()})},getHTML:function(e){var t="http://api.twitter.com/1/statuses/oembed.json?id="+e+"&omit_script=true&include_entities=true&callback=?";VMM.getJSON(t,VMM.ExternalAPI.twitter.onJSONLoaded)},onJSONLoaded:function(e){trace("TWITTER JSON LOADED");var t=e.id;VMM.attachElement("#"+t,VMM.Util.linkify_with_twitter(e.html))},parseTwitterDate:function(e){var t=new Date(Date.parse(e));return t},prettyParseTwitterDate:function(e){var t=new Date(Date.parse(e));return VMM.Date.prettyDate(t,!0)},getTweets:function(e){var t,a,i,o=[],r=e.length;for(t=0;t<e.length;t++)a="",a=e[t].tweet.match("status/")?e[t].tweet.split("status/")[1]:e[t].tweet.match("statuses/")?e[t].tweet.split("statuses/")[1]:"",i="http://api.twitter.com/1/statuses/show.json?id="+a+"&include_entities=true&callback=?",VMM.getJSON(i,function(e){var t,a={},i="<div class='twitter'><blockquote><p>",s=VMM.Util.linkify_with_twitter(e.text,"_blank");i+=s,i+="</p>",i+="— "+e.user.name+" (<a href='https://twitter.com/"+e.user.screen_name+"'>@"+e.user.screen_name+"</a>) <a href='https://twitter.com/"+e.user.screen_name+"/status/"+e.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(e.created_at)+" </a></blockquote></div>",a.content=i,a.raw=e,o.push(a),o.length==r&&(t={tweetdata:o},VMM.fireEvent(global,"TWEETSLOADED",t))}).success(function(){trace("second success")}).error(function(){trace("error")}).complete(function(){trace("complete")})},getTweetSearch:function(e,t){var a,i,o=40;null!=t&&""!=t&&(o=t),a="http://search.twitter.com/search.json?q="+e+"&rpp="+o+"&include_entities=true&result_type=mixed",i=[],VMM.getJSON(a,function(e){var t,a,o,r,s;for(t=0;t<e.results.length;t++)a={},o="<div class='twitter'><blockquote><p>",r=VMM.Util.linkify_with_twitter(e.results[t].text,"_blank"),o+=r,o+="</p>",o+="— "+e.results[t].from_user_name+" (<a href='https://twitter.com/"+e.results[t].from_user+"'>@"+e.results[t].from_user+"</a>) <a href='https://twitter.com/"+e.results[t].from_user+"/status/"+e.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(e.results[t].created_at)+" </a></blockquote></div>",a.content=o,a.raw=e.results[t],i.push(a);s={tweetdata:i},VMM.fireEvent(global,"TWEETSLOADED",s)})},prettyHTML:function(e,t){var a,i;e=""+e,a="http://api.twitter.com/1/statuses/show.json?id="+e+"&include_entities=true&callback=?",i=setTimeout(VMM.ExternalAPI.twitter.errorTimeOut,VMM.master_config.timers.api,e),VMM.getJSON(a,VMM.ExternalAPI.twitter.formatJSON).error(function(t,a){trace("TWITTER error"),trace("TWITTER ERROR: "+a+" "+t.responseText),VMM.attachElement("#twitter_"+e,"<p>ERROR LOADING TWEET "+e+"</p>")}).success(function(e){clearTimeout(i),t&&VMM.ExternalAPI.twitter.secondaryMedia(e)})},formatJSON:function(e){var t=e.id_str,a="<blockquote><p>",i=VMM.Util.linkify_with_twitter(e.text,"_blank");a+=i,a+="</p></blockquote>",a+="<div class='vcard author'>",a+="<a class='screen-name url' href='https://twitter.com/"+e.user.screen_name+"' data-screen-name='"+e.user.screen_name+"' target='_blank'>",a+="<span class='avatar'><img src=' "+e.user.profile_image_url+"'  alt=''></span>",a+="<span class='fn'>"+e.user.name+"</span>",a+="<span class='nickname'>@"+e.user.screen_name+"<span class='thumbnail-inline'></span></span>",a+="</a>",a+="</div>",void 0!==e.entities.media&&"photo"==e.entities.media[0].type&&(a+="<img src=' "+e.entities.media[0].media_url+"'  alt=''>"),VMM.attachElement("#twitter_"+(""+t),a),VMM.attachElement("#text_thumb_"+(""+t),e.text)}},googlemaps:{maptype:"toner",setMapType:function(e){""!=e&&(VMM.ExternalAPI.googlemaps.maptype=e)},get:function(e){var t,a;e.vars=VMM.Util.getUrlVars(e.id),t=""!=VMM.ExternalAPI.keys.google?VMM.ExternalAPI.keys.google:Aes.Ctr.decrypt(VMM.ExternalAPI.keys_master.google,VMM.ExternalAPI.keys_master.vp,256),a="http://maps.googleapis.com/maps/api/js?key="+t+"&v=3.9&libraries=places&sensor=false&callback=VMM.ExternalAPI.googlemaps.onMapAPIReady",VMM.master_config.googlemaps.active?VMM.master_config.googlemaps.que.push(e):(VMM.master_config.googlemaps.que.push(e),VMM.master_config.googlemaps.api_loaded||LoadLib.js(a,function(){trace("Google Maps API Library Loaded")}))},create:function(e){VMM.ExternalAPI.googlemaps.createAPIMap(e)},createiFrameMap:function(e){var t=e.id+"&output=embed",a="",i=""+e.uid+"_gmap";a+="<div class='google-map' id='"+i+"' style='width=100%;height=100%;'>",a+="<iframe width='100%' height='100%' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='"+t+"'></iframe>",a+="</div>",VMM.attachElement("#"+e.uid,a)},createAPIMap:function(e){function t(e){return e in VMM.ExternalAPI.googlemaps.map_providers?(l=VMM.ExternalAPI.googlemaps.map_attribution[VMM.ExternalAPI.googlemaps.map_providers[e].attribution],VMM.ExternalAPI.googlemaps.map_providers[e]):VMM.ExternalAPI.googlemaps.defaultType(e)?(trace("GOOGLE MAP DEFAULT TYPE"),google.maps.MapTypeId[e.toUpperCase()]):(trace("Not a maptype: "+e),void 0)}function a(){var t,a,o=new google.maps.Geocoder,r=VMM.Util.getUrlVars(e.id).q;r.match("loc:")&&(a=r.split(":")[1].split("+"),p=new google.maps.LatLng(parseFloat(a[0]),parseFloat(a[1])),g=!0),o.geocode({address:r},function(e,a){a==google.maps.GeocoderStatus.OK?(t=new google.maps.Marker({map:s,position:e[0].geometry.location}),void 0!==e[0].geometry.viewport?s.fitBounds(e[0].geometry.viewport):void 0!==e[0].geometry.bounds?s.fitBounds(e[0].geometry.bounds):s.setCenter(e[0].geometry.location),g&&s.panTo(p),d&&s.setZoom(M)):(trace("Geocode for "+r+" was not successful for the following reason: "+a),trace("TRYING PLACES SEARCH"),g&&s.panTo(p),d&&s.setZoom(M),i())})}function i(){function t(t,i){if(i==google.maps.places.PlacesServiceStatus.OK){for(var o=0;o<t.length;o++);g?s.panTo(p):t.length>=1&&(s.panTo(t[0].geometry.location),d&&s.setZoom(M))}else trace("Place search for "+a.query+" was not successful for the following reason: "+i),trace("YOU MAY NEED A GOOGLE MAPS API KEY IN ORDER TO USE THIS FEATURE OF TIMELINEJS"),trace("FIND OUT HOW TO GET YOUR KEY HERE: https://developers.google.com/places/documentation/#Authentication"),g?(s.panTo(p),d&&s.setZoom(M)):(trace("USING SIMPLE IFRAME MAP EMBED"),e.id[0].match("https")&&(e.id=e.url[0].replace("https","http")),VMM.ExternalAPI.googlemaps.createiFrameMap(e))}var a,i,o,r,n;place_search=new google.maps.places.PlacesService(s),i=new google.maps.InfoWindow,a={query:"",types:["country","neighborhood","political","locality","geocode"]},"string"==type.of(VMM.Util.getUrlVars(e.id).q)&&(a.query=VMM.Util.getUrlVars(e.id).q),g?(a.location=p,a.radius="15000"):(r=new google.maps.LatLng(-89.999999,-179.999999),n=new google.maps.LatLng(89.999999,179.999999),o=new google.maps.LatLngBounds(r,n)),place_search.textSearch(a,t)}function o(){var t,a,i,o;t=e.id+"&output=kml",t=t.replace("&output=embed",""),a=new google.maps.KmlLayer(t,{preserveViewport:!0}),i=new google.maps.InfoWindow,a.setMap(s),google.maps.event.addListenerOnce(a,"defaultviewport_changed",function(){g?s.panTo(p):s.fitBounds(a.getDefaultViewport()),d&&s.setZoom(M)}),google.maps.event.addListener(a,"click",function(e){function t(e){i.setContent(e),i.open(s)}o=e.featureData.description,t(o)})}var r,s,n,c,l="",m=""+e.uid+"_gmap",u="",p=new google.maps.LatLng(41.875696,-87.624207),M=11,g=!1,d=!1;google.maps.VeriteMapType=function(e){if(VMM.ExternalAPI.googlemaps.defaultType(e))return google.maps.MapTypeId[e.toUpperCase()];var a=t(e);return google.maps.ImageMapType.call(this,{getTileUrl:function(e,t){var i=(t+e.x+e.y)%VMM.ExternalAPI.googlemaps.map_subdomains.length;return[a.url.replace("{S}",VMM.ExternalAPI.googlemaps.map_subdomains[i]).replace("{Z}",t).replace("{X}",e.x).replace("{Y}",e.y).replace("{z}",t).replace("{x}",e.x).replace("{y}",e.y)]},tileSize:new google.maps.Size(256,256),name:e,minZoom:a.minZoom,maxZoom:a.maxZoom})},google.maps.VeriteMapType.prototype=new google.maps.ImageMapType("_"),r=""!=VMM.ExternalAPI.googlemaps.maptype?VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)?google.maps.MapTypeId[VMM.ExternalAPI.googlemaps.maptype.toUpperCase()]:VMM.ExternalAPI.googlemaps.maptype:"toner","string"==type.of(VMM.Util.getUrlVars(e.id).ll)?(g=!0,c=VMM.Util.getUrlVars(e.id).ll.split(","),p=new google.maps.LatLng(parseFloat(c[0]),parseFloat(c[1]))):"string"==type.of(VMM.Util.getUrlVars(e.id).sll)&&(c=VMM.Util.getUrlVars(e.id).sll.split(","),p=new google.maps.LatLng(parseFloat(c[0]),parseFloat(c[1]))),"string"==type.of(VMM.Util.getUrlVars(e.id).z)&&(d=!0,M=parseFloat(VMM.Util.getUrlVars(e.id).z)),n={zoom:M,draggable:!1,disableDefaultUI:!0,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},center:p,mapTypeId:r,mapTypeControlOptions:{mapTypeIds:[r]}},VMM.attachElement("#"+e.uid,"<div class='google-map' id='"+m+"' style='width=100%;height=100%;'></div>"),s=new google.maps.Map(document.getElementById(m),n),VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)||(s.mapTypes.set(r,new google.maps.VeriteMapType(r)),u="<div class='map-attribution'><div class='attribution-text'>"+l+"</div></div>",VMM.appendElement("#"+m,u)),"string"==type.of(VMM.Util.getUrlVars(e.id).msid)?o():"string"==type.of(VMM.Util.getUrlVars(e.id).q)&&a()},pushQue:function(){for(var e=0;e<VMM.master_config.googlemaps.que.length;e++)VMM.ExternalAPI.googlemaps.create(VMM.master_config.googlemaps.que[e]);VMM.master_config.googlemaps.que=[]},onMapAPIReady:function(){VMM.master_config.googlemaps.map_active=!0,VMM.master_config.googlemaps.places_active=!0,VMM.ExternalAPI.googlemaps.onAPIReady()},onPlacesAPIReady:function(){VMM.master_config.googlemaps.places_active=!0,VMM.ExternalAPI.googlemaps.onAPIReady()},onAPIReady:function(){VMM.master_config.googlemaps.active||VMM.master_config.googlemaps.map_active&&VMM.master_config.googlemaps.places_active&&(VMM.master_config.googlemaps.active=!0,VMM.ExternalAPI.googlemaps.pushQue())},defaultType:function(e){return"satellite"==e.toLowerCase()||"hybrid"==e.toLowerCase()||"terrain"==e.toLowerCase()||"roadmap"==e.toLowerCase()?!0:!1},map_subdomains:["","a.","b.","c.","d."],map_attribution:{stamen:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://creativecommons.org/licenses/by-sa/3.0'>CC BY SA</a>.",apple:"Map data &copy; 2012  Apple, Imagery &copy; 2012 Apple"},map_providers:{toner:{url:"http://{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-lines":{url:"http://{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-labels":{url:"http://{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},sterrain:{url:"http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:20,attribution:"stamen"},apple:{url:"http://gsp2.apple.com/tile?api=1&style=slideshow&layers=default&lang=en_US&z={z}&x={x}&y={y}&v=9",minZoom:4,maxZoom:14,attribution:"apple"},watercolor:{url:"http://{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16,attribution:"stamen"}}},googleplus:{get:function(e){var t={user:e.user,activity:e.id,id:e.uid};VMM.master_config.googleplus.que.push(t),VMM.master_config.googleplus.active=!0},create:function(e,t){var a,i,o="",r="",s="",n="",c="";googleplus_timeout=setTimeout(VMM.ExternalAPI.googleplus.errorTimeOut,VMM.master_config.timers.api,e),callback_timeout=setTimeout(t,VMM.master_config.timers.api,e),r=""!=VMM.master_config.Timeline.api_keys.google?VMM.master_config.Timeline.api_keys.google:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.google,VMM.master_config.vp,256),a="https://www.googleapis.com/plus/v1/people/"+e.user+"/activities/public?alt=json&maxResults=100&fields=items(id,url)&key="+r,o="GOOGLE PLUS API CALL",VMM.getJSON(a,function(t){for(var a=0;a<t.items.length;a++)if(trace("loop"),t.items[a].url.split("posts/")[1]==e.activity){trace("FOUND IT!!"),s=t.items[a].id,i="https://www.googleapis.com/plus/v1/activities/"+s+"?alt=json&key="+r,VMM.getJSON(i,function(t){if(trace(t),void 0!==t.annotation?(n+="<div class='googleplus-annotation'>'"+t.annotation+"</div>",n+=t.object.content):n+=t.object.content,void 0!==t.object.attachments){for(var a=0;a<t.object.attachments.length;a++)"photo"==t.object.attachments[a].objectType?c="<a href='"+t.object.url+"' target='_blank'>"+"<img src='"+t.object.attachments[a].image.url+"' class='article-thumb'></a>"+c:"video"==t.object.attachments[a].objectType?(c="<img src='"+t.object.attachments[a].image.url+"' class='article-thumb'>"+c,c+="<div>",c+="<a href='"+t.object.attachments[a].url+"' target='_blank'>",c+="<h5>"+t.object.attachments[a].displayName+"</h5>",c+="</a>",c+="</div>"):"article"==t.object.attachments[a].objectType&&(c+="<div>",c+="<a href='"+t.object.attachments[a].url+"' target='_blank'>",c+="<h5>"+t.object.attachments[a].displayName+"</h5>",c+="<p>"+t.object.attachments[a].content+"</p>",c+="</a>",c+="</div>"),trace(t.object.attachments[a]);c="<div class='googleplus-attachments'>"+c+"</div>"}o="<div class='googleplus-content'>"+n+c+"</div>",o+="<div class='vcard author'><a class='screen-name url' href='"+t.url+"' target='_blank'>",o+="<span class='avatar'><img src='"+t.actor.image.url+"' style='max-width: 32px; max-height: 32px;'></span>",o+="<span class='fn'>"+t.actor.displayName+"</span>",o+="<span class='nickname'><span class='thumbnail-inline'></span></span>",o+="</a></div>",VMM.attachElement("#googleplus_"+e.activity,o)});break}}).error(function(t){var a=VMM.parseJSON(t.responseText);trace(a.error.message),VMM.attachElement("#googleplus_"+e.activity,VMM.MediaElement.loadingmessage("<p>ERROR LOADING GOOGLE+ </p><p>"+a.error.message+"</p>"))}).success(function(){clearTimeout(googleplus_timeout),clearTimeout(callback_timeout),t()})},pushQue:function(){VMM.master_config.googleplus.que.length>0&&(VMM.ExternalAPI.googleplus.create(VMM.master_config.googleplus.que[0],VMM.ExternalAPI.googleplus.pushQue),VMM.master_config.googleplus.que.remove(0))},errorTimeOut:function(e){trace("GOOGLE+ JSON ERROR TIMEOUT "+e.activity),VMM.attachElement("#googleplus_"+e.activity,VMM.MediaElement.loadingmessage("<p>Still waiting on GOOGLE+ </p><p>"+e.activity+"</p>"))}},googledocs:{get:function(e){VMM.master_config.googledocs.que.push(e),VMM.master_config.googledocs.active=!0},create:function(e){var t="";t=e.id.match(/docs.google.com/i)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e.id+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='http://docs.google.com/viewer?url="+e.id+"&amp;embedded=true'></iframe>",VMM.attachElement("#"+e.uid,t)},pushQue:function(){for(var e=0;e<VMM.master_config.googledocs.que.length;e++)VMM.ExternalAPI.googledocs.create(VMM.master_config.googledocs.que[e]);VMM.master_config.googledocs.que=[]}},flickr:{get:function(e){VMM.master_config.flickr.que.push(e),VMM.master_config.flickr.active=!0},create:function(e,t){var a,i,o=setTimeout(t,VMM.master_config.timers.api,e);a=void 0!==VMM.master_config.Timeline&&""!=VMM.master_config.Timeline.api_keys.flickr?VMM.master_config.Timeline.api_keys.flickr:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.flickr,VMM.master_config.vp,256),i="http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+a+"&photo_id="+e.id+"&format=json&jsoncallback=?",VMM.getJSON(i,function(t){var a,i,o,r,s,n,c;for(t.sizes.size[0].url.split("photos/")[1].split("/")[1],a="#"+e.uid,i="#"+e.uid+"_thumb",s=!1,n="Large",n=VMM.ExternalAPI.flickr.sizes(VMM.master_config.sizes.api.height),c=0;c<t.sizes.size.length;c++)t.sizes.size[c].label==n&&(s=!0,o=t.sizes.size[c].source);s||(o=t.sizes.size[t.sizes.size.length-2].source),r=t.sizes.size[0].source,VMM.Lib.attr(a,"src",o),VMM.attachElement(i,"<img src='"+r+"'>")}).error(function(e,t){trace("FLICKR error"),trace("FLICKR ERROR: "+t+" "+e.responseText)}).success(function(){clearTimeout(o),t()})},pushQue:function(){VMM.master_config.flickr.que.length>0&&(VMM.ExternalAPI.flickr.create(VMM.master_config.flickr.que[0],VMM.ExternalAPI.flickr.pushQue),VMM.master_config.flickr.que.remove(0))},sizes:function(e){var t="";return t=75>=e?"Thumbnail":180>=e?"Small":240>=e?"Small 320":375>=e?"Medium":480>=e?"Medium 640":600>=e?"Large":"Large"}},instagram:{get:function(e,t){return t?"http://instagr.am/p/"+e.id+"/media/?size=t":"http://instagr.am/p/"+e.id+"/media/?size="+VMM.ExternalAPI.instagram.sizes(VMM.master_config.sizes.api.height)},sizes:function(e){var t="";return t=150>=e?"t":306>=e?"m":"l"}},soundcloud:{get:function(e){VMM.master_config.soundcloud.que.push(e),VMM.master_config.soundcloud.active=!0},create:function(e,t){var a="http://soundcloud.com/oembed?url="+e.id+"&format=js&callback=?";VMM.getJSON(a,function(a){VMM.attachElement("#"+e.uid,a.html),t()})},pushQue:function(){VMM.master_config.soundcloud.que.length>0&&(VMM.ExternalAPI.soundcloud.create(VMM.master_config.soundcloud.que[0],VMM.ExternalAPI.soundcloud.pushQue),VMM.master_config.soundcloud.que.remove(0))}},wikipedia:{get:function(e){VMM.master_config.wikipedia.que.push(e),VMM.master_config.wikipedia.active=!0},create:function(e,t){var a,i="http://"+e.lang+".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+e.id+"&exintro=1&format=json&callback=?";callback_timeout=setTimeout(t,VMM.master_config.timers.api,e),"Explorer"==VMM.Browser.browser&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest&&(a="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+e.id+"' target='_blank'>"+e.url+"</a></h4>",a+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>",a+="<p>Wikipedia entry unable to load using Internet Explorer 8 or below.</p>",VMM.attachElement("#"+e.uid,a)),VMM.getJSON(i,function(t){var a,i,o,r,s,n,c;if(t.query){for(o="",r="",s=1,n=[],a=VMM.Util.getObjectAttributeByIndex(t.query.pages,0).extract,i=VMM.Util.getObjectAttributeByIndex(t.query.pages,0).title,a.match("<p>")?n=a.split("<p>"):n.push(a),c=0;c<n.length;c++)s>=c+1&&c+1<n.length&&(r+="<p>"+n[c+1]);o="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+i+"' target='_blank'>"+i+"</a></h4>",o+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>",o+=VMM.Util.linkify_wikipedia(r),a.match("REDIRECT")||VMM.attachElement("#"+e.uid,o)}}).error(function(a,i,o){trace("WIKIPEDIA error"),trace("WIKIPEDIA ERROR: "+i+" "+a.responseText),trace(o),VMM.attachElement("#"+e.uid,VMM.MediaElement.loadingmessage("<p>Wikipedia is not responding</p>")),clearTimeout(callback_timeout),VMM.master_config.wikipedia.tries<4?(trace("WIKIPEDIA ATTEMPT "+VMM.master_config.wikipedia.tries),trace(e),VMM.master_config.wikipedia.tries++,VMM.ExternalAPI.wikipedia.create(e,t)):t()}).success(function(){VMM.master_config.wikipedia.tries=0,clearTimeout(callback_timeout),t()})},pushQue:function(){VMM.master_config.wikipedia.que.length>0&&(trace("WIKIPEDIA PUSH QUE "+VMM.master_config.wikipedia.que.length),VMM.ExternalAPI.wikipedia.create(VMM.master_config.wikipedia.que[0],VMM.ExternalAPI.wikipedia.pushQue),VMM.master_config.wikipedia.que.remove(0))}},youtube:{get:function(e){var t="http://gdata.youtube.com/feeds/api/videos/"+e.id+"?v=2&alt=jsonc&callback=?";VMM.master_config.youtube.que.push(e),VMM.master_config.youtube.active||VMM.master_config.youtube.api_loaded||LoadLib.js("http://www.youtube.com/player_api",function(){trace("YouTube API Library Loaded")}),VMM.getJSON(t,function(t){VMM.ExternalAPI.youtube.createThumb(t,e)})},create:function(e){var t,a,i,o;void 0!==e.start?(t=""+e.start,a=0,i=0,t.match("m")?(a=parseInt(t.split("m")[0],10),i=parseInt(t.split("m")[1].split("s")[0],10),e.start=60*a+i):e.start=0):e.start=0,o={active:!1,player:{},name:e.uid,playing:!1,hd:!1},void 0!==e.hd&&(o.hd=!0),o.player[e.id]=new YT.Player(e.uid,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",start:e.start,rel:0},videoId:e.id,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}}),VMM.master_config.youtube.array.push(o)},createThumb:function(e,t){if(trace("CREATE THUMB"),trace(e),trace(t),void 0!==e.data){var a="#"+t.uid+"_thumb";VMM.attachElement(a,"<img src='"+e.data.thumbnail.sqDefault+"'>")}},pushQue:function(){for(var e=0;e<VMM.master_config.youtube.que.length;e++)VMM.ExternalAPI.youtube.create(VMM.master_config.youtube.que[e]);VMM.master_config.youtube.que=[]},onAPIReady:function(){VMM.master_config.youtube.active=!0,VMM.ExternalAPI.youtube.pushQue()},stopPlayers:function(){var e,t;for(e=0;e<VMM.master_config.youtube.array.length;e++)VMM.master_config.youtube.array[e].playing&&(t=VMM.master_config.youtube.array[e].name,VMM.master_config.youtube.array[e].player[t].stopVideo())},onStateChange:function(e){var t,a;for(t=0;t<VMM.master_config.youtube.array.length;t++)a=VMM.master_config.youtube.array[t].name,VMM.master_config.youtube.array[t].player[a]==e.target&&e.data==YT.PlayerState.PLAYING&&(VMM.master_config.youtube.array[t].playing=!0,trace(VMM.master_config.youtube.array[t].hd),VMM.master_config.youtube.array[t].hd)},onPlayerReady:function(){}},vimeo:{get:function(e){VMM.master_config.vimeo.que.push(e),VMM.master_config.vimeo.active=!0},create:function(e,t){trace("VIMEO CREATE");var a="http://vimeo.com/api/v2/video/"+e.id+".json",i="http://player.vimeo.com/video/"+e.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff";VMM.getJSON(a,function(a){VMM.ExternalAPI.vimeo.createThumb(a,e),t()}),VMM.attachElement("#"+e.uid,"<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+i+"'></iframe>")},createThumb:function(e,t){trace("VIMEO CREATE THUMB");var a="#"+t.uid+"_thumb";VMM.attachElement(a,"<img src='"+e[0].thumbnail_small+"'>")},pushQue:function(){VMM.master_config.vimeo.que.length>0&&(VMM.ExternalAPI.vimeo.create(VMM.master_config.vimeo.que[0],VMM.ExternalAPI.vimeo.pushQue),VMM.master_config.vimeo.que.remove(0))}},vine:{get:function(e){VMM.master_config.vine.que.push(e),VMM.master_config.vine.active=!0},create:function(e){trace("VINE CREATE");var t="https://vine.co/v/"+e.id+"/embed/simple";VMM.attachElement("#"+e.uid,"<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'></script>")},pushQue:function(){VMM.master_config.vine.que.length>0&&(VMM.ExternalAPI.vine.create(VMM.master_config.vine.que[0],VMM.ExternalAPI.vine.pushQue),VMM.master_config.vine.que.remove(0))}},webthumb:{get:function(e){VMM.master_config.webthumb.que.push(e),VMM.master_config.webthumb.active=!0},sizes:function(e){var t="";return t=150>=e?"t":306>=e?"m":"l"},create:function(e){trace("WEB THUMB CREATE");var t="http://free.pagepeeker.com/v2/thumbs.php?";url=e.id.replace("http://",""),VMM.attachElement("#"+e.uid,"<a href='"+e.id+"' target='_blank'><img src='"+t+"size=x&url="+url+"'></a>"),VMM.attachElement("#"+e.uid+"_thumb","<img src='"+t+"size=t&url="+url+"'>")},pushQue:function(){for(var e=0;e<VMM.master_config.webthumb.que.length;e++)VMM.ExternalAPI.webthumb.create(VMM.master_config.webthumb.que[e]);VMM.master_config.webthumb.que=[]}}}.init());