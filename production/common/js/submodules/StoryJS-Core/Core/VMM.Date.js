/*
	 * Date Format 1.2.3
	 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
	 * MIT license
	 *
	 * Includes enhancements by Scott Trenda <scott.trenda.net>
	 * and Kris Kowal <cixar.com/~kris.kowal/>
	 *
	 * Accepts a date, a mask, or a date and a mask.
	 * Returns a formatted version of the given date.
	 * The date defaults to the current date/time.
	 * The mask defaults to dateFormat.masks.default.
	 */

if("undefined"!=typeof VMM&&void 0===VMM.Date){VMM.Date={init:function(){return this},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>mmm d',' yyyy'</small>'"},month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."],hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],bc_format:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"dddd', 'h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"dddd',' mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>'dddd',' mmm d',' yyyy'</small>'"},setLanguage:function(t){trace("SET DATE LANGUAGE"),VMM.Date.dateformats=t.dateformats,VMM.Date.month=t.date.month,VMM.Date.month_abbr=t.date.month_abbr,VMM.Date.day=t.date.day,VMM.Date.day_abbr=t.date.day_abbr,dateFormat.i18n.dayNames=t.date.day_abbr.concat(t.date.day),dateFormat.i18n.monthNames=t.date.month_abbr.concat(t.date.month)},parse:function(t,e){"use strict";var a,s,o,m,n,r,d={year:!1,month:!1,day:!1,hour:!1,minute:!1,second:!1,millisecond:!1};if("date"==type.of(t))trace("DEBUG THIS, ITs A DATE"),a=t;else if(a=new Date(0,0,1,0,0,0,0),t.match(/,/gi)){for(s=t.split(","),n=0;n<s.length;n++)s[n]=parseInt(s[n],10);s[0]&&(a.setFullYear(s[0]),d.year=!0),s[1]&&(a.setMonth(s[1]-1),d.month=!0),s[2]&&(a.setDate(s[2]),d.day=!0),s[3]&&(a.setHours(s[3]),d.hour=!0),s[4]&&(a.setMinutes(s[4]),d.minute=!0),s[5]&&(a.setSeconds(s[5]),s[5]>=1&&(d.second=!0)),s[6]&&(a.setMilliseconds(s[6]),s[6]>=1&&(d.millisecond=!0))}else t.match("/")?(t.match(" ")?(m=t.split(" "),t.match(":")&&(o=m[1].split(":"),o[0]>=0&&(a.setHours(o[0]),d.hour=!0),o[1]>=0&&(a.setMinutes(o[1]),d.minute=!0),o[2]>=0&&(a.setSeconds(o[2]),d.second=!0),o[3]>=0&&(a.setMilliseconds(o[3]),d.millisecond=!0)),s=m[0].split("/")):s=t.split("/"),s[2]&&(a.setFullYear(s[2]),d.year=!0),s[0]>=0&&(a.setMonth(s[0]-1),d.month=!0),s[1]>=0&&(s[1].length>2?(a.setFullYear(s[1]),d.year=!0):(a.setDate(s[1]),d.day=!0))):t.match("now")?(r=new Date,a.setFullYear(r.getFullYear()),d.year=!0,a.setMonth(r.getMonth()),d.month=!0,a.setDate(r.getDate()),d.day=!0,t.match("hours")&&(a.setHours(r.getHours()),d.hour=!0),t.match("minutes")&&(a.setHours(r.getHours()),a.setMinutes(r.getMinutes()),d.hour=!0,d.minute=!0),t.match("seconds")&&(a.setHours(r.getHours()),a.setMinutes(r.getMinutes()),a.setSeconds(r.getSeconds()),d.hour=!0,d.minute=!0,d.second=!0),t.match("milliseconds")&&(a.setHours(r.getHours()),a.setMinutes(r.getMinutes()),a.setSeconds(r.getSeconds()),a.setMilliseconds(r.getMilliseconds()),d.hour=!0,d.minute=!0,d.second=!0,d.millisecond=!0)):t.length<=8?(d.year=!0,a.setFullYear(parseInt(t,10)),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):t.match("T")?navigator.userAgent.match(/MSIE\s(?!9.0)/)?(m=t.split("T"),t.match(":")&&(o=m[1].split(":"),o[0]>=1&&(a.setHours(o[0]),d.hour=!0),o[1]>=1&&(a.setMinutes(o[1]),d.minute=!0),o[2]>=1&&(a.setSeconds(o[2]),o[2]>=1&&(d.second=!0)),o[3]>=1&&(a.setMilliseconds(o[3]),o[3]>=1&&(d.millisecond=!0))),s=m[0].split("-"),s[0]&&(a.setFullYear(s[0]),d.year=!0),s[1]>=0&&(a.setMonth(s[1]-1),d.month=!0),s[2]>=0&&(a.setDate(s[2]),d.day=!0)):(a=new Date(Date.parse(t)),d.year=!0,d.month=!0,d.day=!0,d.hour=!0,d.minute=!0,a.getSeconds()>=1&&(d.second=!0),a.getMilliseconds()>=1&&(d.millisecond=!0)):(a=new Date(parseInt(t.slice(0,4),10),parseInt(t.slice(4,6),10)-1,parseInt(t.slice(6,8),10),parseInt(t.slice(8,10),10),parseInt(t.slice(10,12),10)),d.year=!0,d.month=!0,d.day=!0,d.hour=!0,d.minute=!0,a.getSeconds()>=1&&(d.second=!0),a.getMilliseconds()>=1&&(d.millisecond=!0));return null!=e&&""!=e?{date:a,precision:d}:a},prettyDate:function(t,e,a,s){var o,m,n,r,d,l,i,y,M,u=!1;if(null!=s&&""!=s&&void 0!==s&&(u=!0,trace("D2 "+s)),"date"==type.of(t)){for(n="object"==type.of(a)?a.millisecond||a.second&&t.getSeconds()>=1?e?VMM.Date.dateformats.time_short:VMM.Date.dateformats.time_short:a.minute?e?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:a.hour?e?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:a.day?e?VMM.Date.dateformats.full_short:VMM.Date.dateformats.full:a.month?e?VMM.Date.dateformats.month_short:VMM.Date.dateformats.month:a.year?VMM.Date.dateformats.year:VMM.Date.dateformats.year:0===t.getMonth()&&1==t.getDate()&&0===t.getHours()&&0===t.getMinutes()?VMM.Date.dateformats.year:t.getDate()<=1&&0===t.getHours()&&0===t.getMinutes()?e?VMM.Date.dateformats.month_short:VMM.Date.dateformats.month:0===t.getHours()&&0===t.getMinutes()?e?VMM.Date.dateformats.full_short:VMM.Date.dateformats.full:0===t.getMinutes()?e?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:e?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.full_long,o=dateFormat(t,n,!1),r=o.split(" "),y=0;y<r.length;y++)parseInt(r[y],10)<0&&(trace("YEAR IS BC"),d=r[y],l=Math.abs(parseInt(r[y],10)),i=""+l+" B.C.",o=o.replace(d,i));if(u)for(m=dateFormat(s,n,!1),r=m.split(" "),M=0;M<r.length;M++)parseInt(r[M],10)<0&&(trace("YEAR IS BC"),d=r[M],l=Math.abs(parseInt(r[M],10)),i=""+l+" B.C.",m=m.replace(d,i))}else trace("NOT A VALID DATE?"),trace(t);return u?o+" &mdash; "+m:o}}.init();var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g,s=function(t,e){for(t+="",e=e||2;t.length<e;)t="0"+t;return t};return function(o,m,n){var r,d,l,i,y,M,u,h,c,f,_,D=dateFormat;return 1!=arguments.length||"[object String]"!=Object.prototype.toString.call(o)||/\d/.test(o)||(m=o,o=void 0),isNaN(o)&&trace("invalid date "+o),m=(D.masks[m]||m||D.masks["default"])+"","UTC:"==m.slice(0,4)&&(m=m.slice(4),n=!0),r=n?"getUTC":"get",d=o[r+"Date"](),l=o[r+"Day"](),i=o[r+"Month"](),y=o[r+"FullYear"](),M=o[r+"Hours"](),u=o[r+"Minutes"](),h=o[r+"Seconds"](),c=o[r+"Milliseconds"](),f=n?0:o.getTimezoneOffset(),_={d:d,dd:s(d),ddd:D.i18n.dayNames[l],dddd:D.i18n.dayNames[l+7],m:i+1,mm:s(i+1),mmm:D.i18n.monthNames[i],mmmm:D.i18n.monthNames[i+12],yy:(y+"").slice(2),yyyy:y,h:M%12||12,hh:s(M%12||12),H:M,HH:s(M),M:u,MM:s(u),s:h,ss:s(h),l:s(c,3),L:s(c>99?Math.round(c/10):c),t:12>M?"a":"p",tt:12>M?"am":"pm",T:12>M?"A":"P",TT:12>M?"AM":"PM",Z:n?"UTC":((o+"").match(e)||[""]).pop().replace(a,""),o:(f>0?"-":"+")+s(100*Math.floor(Math.abs(f)/60)+Math.abs(f)%60,4),S:["th","st","nd","rd"][d%10>3?0:(10!=d%100-d%10)*d%10]},m.replace(t,function(t){return t in _?_[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)}}