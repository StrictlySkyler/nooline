/*
 Copyright (c) 2010-2011, CloudMade, Vladimir Agafonkin
 Leaflet is a modern open-source JavaScript library for interactive maps.
 http://leaflet.cloudmade.com
*/

!function(t){t.L={VERSION:"0.3",ROOT_URL:t.L_ROOT_URL||function(){var t,i,e,n,o=document.getElementsByTagName("script"),s=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=o.length;i>t;t++)if(e=o[t].src,n=e.match(s))return"include"===n[1]?"../../dist/":e.split(s)[0]+"/";return""}(),noConflict:function(){return t.L=this._originalL,this},_originalL:t.L}}(this),L.Util={extend:function(t){var i,e,n,o,s=Array.prototype.slice.call(arguments,1);for(e=0,n=s.length;n>e;e++){i=s[e]||{};for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t},bind:function(t,i){return function(){return t.apply(i,arguments)}},stamp:function(){var t=0,i="_leaflet_id";return function(e){return e[i]=e[i]||++t,e[i]}}(),requestAnimFrame:function(){function t(t){window.setTimeout(t,1e3/60)}var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t;return function(e,n,o,s){e=n?L.Util.bind(e,n):e,o&&i===t?e():i(e,s)}}(),limitExecByInterval:function(t,i,e){function n(){o=!1,s&&(a.callee.apply(e,a),s=!1)}var o,s,a;return function(){a=arguments,o?s=!0:(o=!0,setTimeout(n,i),t.apply(e,a))}},falseFn:function(){return!1},formatNum:function(t,i){var e=Math.pow(10,i||5);return Math.round(t*e)/e},setOptions:function(t,i){t.options=L.Util.extend({},t.options,i)},getParamString:function(t){var i,e=[];for(i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")},template:function(t,i){return t.replace(/\{ *([\w_]+) *\}/g,function(t,e){var n=i[e];if(!i.hasOwnProperty(e))throw Error("No value provided for variable "+t);return n})}},L.Class=function(){},L.Class.extend=function(t){var i,e,n=function(){this.initialize&&this.initialize.apply(this,arguments)},o=function(){};o.prototype=this.prototype,i=new o,i.constructor=n,n.prototype=i,n.superclass=this.prototype;for(e in this)this.hasOwnProperty(e)&&"prototype"!==e&&"superclass"!==e&&(n[e]=this[e]);return t.statics&&(L.Util.extend(n,t.statics),delete t.statics),t.includes&&(L.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=L.Util.extend({},i.options,t.options)),L.Util.extend(i,t),n.extend=L.Class.extend,n.include=function(t){L.Util.extend(this.prototype,t)},n},L.Mixin={},L.Mixin.Events={addEventListener:function(t,i,e){var n=this._leaflet_events=this._leaflet_events||{};return n[t]=n[t]||[],n[t].push({action:i,context:e||this}),this},hasEventListeners:function(t){var i="_leaflet_events";return i in this&&t in this[i]&&this[i][t].length>0},removeEventListener:function(t,i,e){if(!this.hasEventListeners(t))return this;for(var n=0,o=this._leaflet_events,s=o[t].length;s>n;n++)if(o[t][n].action===i&&(!e||o[t][n].context===e))return o[t].splice(n,1),this;return this},fireEvent:function(t,i){var e,n,o,s;if(!this.hasEventListeners(t))return this;for(e=L.Util.extend({type:t,target:this},i),n=this._leaflet_events[t].slice(),o=0,s=n.length;s>o;o++)n[o].action.call(n[o].context||this,e);return this}},L.Mixin.Events.on=L.Mixin.Events.addEventListener,L.Mixin.Events.off=L.Mixin.Events.removeEventListener,L.Mixin.Events.fire=L.Mixin.Events.fireEvent,function(){var t=navigator.userAgent.toLowerCase(),i=!!window.ActiveXObject,e=-1!==t.indexOf("webkit"),n="undefined"!=typeof orientation?!0:!1,o=-1!==t.indexOf("android"),s=window.opera;L.Browser={ie:i,ie6:i&&!window.XMLHttpRequest,webkit:e,webkit3d:e&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,gecko:-1!==t.indexOf("gecko"),opera:s,android:o,mobileWebkit:n&&e,mobileOpera:n&&s,mobile:n,touch:function(){var t,i=!1,e="ontouchstart";return e in document.documentElement?!0:(t=document.createElement("div"),t.setAttribute&&t.removeAttribute?(t.setAttribute(e,"return;"),"function"==typeof t[e]&&(i=!0),t.removeAttribute(e),t=null,i):!1)}()}}(),L.Point=function(t,i,e){this.x=e?Math.round(t):t,this.y=e?Math.round(i):i},L.Point.prototype={add:function(t){return this.clone()._add(t)},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(t)},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t,i){return new L.Point(this.x/t,this.y/t,i)},multiplyBy:function(t){return new L.Point(this.x*t,this.y*t)},distanceTo:function(t){var i=t.x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},clone:function(){return new L.Point(this.x,this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.Bounds=L.Class.extend({initialize:function(t,i){var e,n,o;if(t)for(e=t instanceof Array?t:[t,i],n=0,o=e.length;o>n;n++)this.extend(e[n])},extend:function(t){this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=new L.Point(t.x,t.y),this.max=new L.Point(t.x,t.y))},getCenter:function(t){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},contains:function(t){var i,e;return t instanceof L.Bounds?(i=t.min,e=t.max):i=e=t,i.x>=this.min.x&&e.x<=this.max.x&&i.y>=this.min.y&&e.y<=this.max.y},intersects:function(t){var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>=i.x&&n.x<=e.x,a=o.y>=i.y&&n.y<=e.y;return s&&a}}),L.Transformation=L.Class.extend({initialize:function(t,i,e,n){this._a=t,this._b=i,this._c=e,this._d=n},transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new L.Point((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}}),L.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,i){var e,n=t.style[i];return!n&&t.currentStyle&&(n=t.currentStyle[i]),n&&"auto"!==n||(e=document.defaultView.getComputedStyle(t,null),n=e?e[i]:null),"auto"===n?null:n},getViewportOffset:function(t){var i=0,e=0,n=t,o=document.body;do{if(i+=n.offsetTop||0,e+=n.offsetLeft||0,n.offsetParent===o&&"absolute"===L.DomUtil.getStyle(n,"position"))break;n=n.offsetParent}while(n);n=t;do{if(n===o)break;i-=n.scrollTop||0,e-=n.scrollLeft||0,n=n.parentNode}while(n);return new L.Point(e,i)},create:function(t,i,e){var n=document.createElement(t);return n.className=i,e&&e.appendChild(n),n},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=L.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(t,i){return t.className.length>0&&RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){L.DomUtil.hasClass(t,i)||(t.className+=(t.className?" ":"")+i)},removeClass:function(t,i){t.className=t.className.replace(/(\S+)\s*/g,function(t,e){return e===i?"":t}).replace(/^\s+/,"")},setOpacity:function(t,i){L.Browser.ie?t.style.filter="alpha(opacity="+Math.round(100*i)+")":t.style.opacity=i},testProp:function(t){var i,e=document.documentElement.style;for(i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){return L.DomUtil.TRANSLATE_OPEN+t.x+"px,"+t.y+"px"+L.DomUtil.TRANSLATE_CLOSE},getScaleString:function(t,i){var e=L.DomUtil.getTranslateString(i),n=" scale("+t+") ",o=L.DomUtil.getTranslateString(i.multiplyBy(-1));return e+n+o},setPosition:function(t,i){t._leaflet_pos=i,L.Browser.webkit3d?(t.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i),L.Browser.android&&(t.style["-webkit-perspective"]="1000",t.style["-webkit-backface-visibility"]="hidden")):(t.style.left=i.x+"px",t.style.top=i.y+"px")},getPosition:function(t){return t._leaflet_pos}},L.Util.extend(L.DomUtil,{TRANSITION:L.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:L.DomUtil.testProp(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSLATE_OPEN:"translate"+(L.Browser.webkit3d?"3d(":"("),TRANSLATE_CLOSE:L.Browser.webkit3d?",0)":")"}),L.LatLng=function(t,i,e){var n=parseFloat(t),o=parseFloat(i);if(isNaN(n)||isNaN(o))throw Error("Invalid LatLng object: ("+t+", "+i+")");e!==!0&&(n=Math.max(Math.min(n,90),-90),o=(o+180)%360+(-180>o||180===o?180:-180)),this.lat=n,this.lng=o},L.Util.extend(L.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),L.LatLng.prototype={equals:function(t){if(!(t instanceof L.LatLng))return!1;var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=L.LatLng.MAX_MARGIN},toString:function(){return"LatLng("+L.Util.formatNum(this.lat)+", "+L.Util.formatNum(this.lng)+")"},distanceTo:function(t){var i=6378137,e=L.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*e,o=(t.lng-this.lng)*e,s=this.lat*e,a=t.lat*e,r=Math.sin(n/2),h=Math.sin(o/2),l=r*r+h*h*Math.cos(s)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}},L.LatLngBounds=L.Class.extend({initialize:function(t,i){var e,n,o;if(t)for(e=t instanceof Array?t:[t,i],n=0,o=e.length;o>n;n++)this.extend(e[n])},extend:function(t){this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new L.LatLng(t.lat,t.lng,!0),this._northEast=new L.LatLng(t.lat,t.lng,!0))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this._northEast.lat,this._southWest.lng,!0)},getSouthEast:function(){return new L.LatLng(this._southWest.lat,this._northEast.lng,!0)},contains:function(t){var i,e,n=this._southWest,o=this._northEast;return t instanceof L.LatLngBounds?(i=t.getSouthWest(),e=t.getNorthEast()):i=e=t,i.lat>=n.lat&&e.lat<=o.lat&&i.lng>=n.lng&&e.lng<=o.lng},intersects:function(t){var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=i.lat&&n.lat<=e.lat,a=o.lng>=i.lng&&n.lng<=e.lng;return s&&a},toBBoxString:function(){var t=this._southWest,i=this._northEast;return[t.lng,t.lat,i.lng,i.lat].join(",")}}),L.Projection={},L.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var i=L.LatLng.DEG_TO_RAD,e=this.MAX_LATITUDE,n=Math.max(Math.min(e,t.lat),-e),o=t.lng*i,s=n*i;return s=Math.log(Math.tan(Math.PI/4+s/2)),new L.Point(o,s)},unproject:function(t,i){var e=L.LatLng.RAD_TO_DEG,n=t.x*e,o=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new L.LatLng(o,n,i)}},L.Projection.LonLat={project:function(t){return new L.Point(t.lng,t.lat)},unproject:function(t,i){return new L.LatLng(t.y,t.x,i)}},L.CRS={latLngToPoint:function(t,i){var e=this.projection.project(t);return this.transformation._transform(e,i)},pointToLatLng:function(t,i,e){var n=this.transformation.untransform(t,i);return this.projection.unproject(n,e)},project:function(t){return this.projection.project(t)}},L.CRS.EPSG3857=L.Util.extend({},L.CRS,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:new L.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var i=this.projection.project(t),e=6378137;return i.multiplyBy(e)}}),L.CRS.EPSG900913=L.Util.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"}),L.CRS.EPSG4326=L.Util.extend({},L.CRS,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/360,.5,-1/360,.5)}),L.Map=L.Class.extend({includes:L.Mixin.Events,options:{crs:L.CRS.EPSG3857||L.CRS.EPSG4326,scale:function(t){return 256*Math.pow(2,t)},center:null,zoom:null,layers:[],dragging:!0,touchZoom:L.Browser.touch&&!L.Browser.android,scrollWheelZoom:!L.Browser.touch,doubleClickZoom:!0,boxZoom:!0,zoomControl:!0,attributionControl:!0,fadeAnimation:L.DomUtil.TRANSITION&&!L.Browser.android,zoomAnimation:L.DomUtil.TRANSITION&&!L.Browser.android&&!L.Browser.mobileOpera,trackResize:!0,closePopupOnClick:!0,worldCopyJump:!0},initialize:function(t,i){var e,n,o;if(L.Util.setOptions(this,i),this._container=L.DomUtil.get(t),this._container._leaflet)throw Error("Map container is already initialized.");this._container._leaflet=!0,this._initLayout(),L.DomEvent&&(this._initEvents(),L.Handler&&this._initInteraction(),L.Control&&this._initControls()),this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),e=this.options.center,n=this.options.zoom,null!==e&&null!==n&&this.setView(e,n,!0),o=this.options.layers,o=o instanceof Array?o:[o],this._tileLayersNum=0,this._initLayers(o)},setView:function(t,i){return this._resetView(t,this._limitZoom(i)),this},setZoom:function(t){return this.setView(this.getCenter(),t)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(t){var i=this.getBoundsZoom(t);return this.setView(t.getCenter(),i)},fitWorld:function(){var t=new L.LatLng(-60,-170),i=new L.LatLng(85,179);return this.fitBounds(new L.LatLngBounds(t,i))},panTo:function(t){return this.setView(t,this._zoom)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(t),this.fire("move"),this.fire("moveend"),this},setMaxBounds:function(t){if(this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this;var i=this.getBoundsZoom(t,!0);return this._boundsMinZoom=i,this._loaded&&(this._zoom<i?this.setView(t.getCenter(),i):this.panInsideBounds(t)),this},panInsideBounds:function(t){var i=this.getBounds(),e=this.project(i.getSouthWest()),n=this.project(i.getNorthEast()),o=this.project(t.getSouthWest()),s=this.project(t.getNorthEast()),a=0,r=0;return n.y<s.y&&(r=s.y-n.y),n.x>s.x&&(a=s.x-n.x),e.y>o.y&&(r=o.y-e.y),e.x<o.x&&(a=o.x-e.x),this.panBy(new L.Point(a,r,!0))},addLayer:function(t,i){var e,n=L.Util.stamp(t);return this._layers[n]?this:(this._layers[n]=t,t.options&&!isNaN(t.options.maxZoom)&&(this._layersMaxZoom=Math.max(this._layersMaxZoom||0,t.options.maxZoom)),t.options&&!isNaN(t.options.minZoom)&&(this._layersMinZoom=Math.min(this._layersMinZoom||1/0,t.options.minZoom)),this.options.zoomAnimation&&L.TileLayer&&t instanceof L.TileLayer&&(this._tileLayersNum++,t.on("load",this._onTileLayerLoad,this)),this.attributionControl&&t.getAttribution&&this.attributionControl.addAttribution(t.getAttribution()),e=function(){t.onAdd(this,i),this.fire("layeradd",{layer:t})},this._loaded?e.call(this):this.on("load",e,this),this)},removeLayer:function(t){var i=L.Util.stamp(t);return this._layers[i]&&(t.onRemove(this),delete this._layers[i],this.options.zoomAnimation&&L.TileLayer&&t instanceof L.TileLayer&&(this._tileLayersNum--,t.off("load",this._onTileLayerLoad,this)),this.attributionControl&&t.getAttribution&&this.attributionControl.removeAttribution(t.getAttribution()),this.fire("layerremove",{layer:t})),this},hasLayer:function(t){var i=L.Util.stamp(t);return this._layers.hasOwnProperty(i)},invalidateSize:function(){var t=this.getSize();return this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),this._loaded?(this._rawPanBy(t.subtract(this.getSize()).divideBy(2,!0)),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.Util.bind(function(){this.fire("moveend")},this),200),this):this},getCenter:function(t){var i=this.getSize().divideBy(2),e=this._getTopLeftPoint().add(i);return this.unproject(e,this._zoom,t)},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(new L.Point(t.min.x,t.max.y),this._zoom,!0),e=this.unproject(new L.Point(t.max.x,t.min.y),this._zoom,!0);return new L.LatLngBounds(i,e)},getMinZoom:function(){var t=this.options.minZoom||0,i=this._layersMinZoom||0,e=this._boundsMinZoom||0;return Math.max(t,i,e)},getMaxZoom:function(){var t=isNaN(this.options.maxZoom)?1/0:this.options.maxZoom,i=this._layersMaxZoom||1/0;return Math.min(t,i)},getBoundsZoom:function(t,i){var e,n,o,s=this.getSize(),a=this.options.minZoom||0,r=this.getMaxZoom(),h=t.getNorthEast(),l=t.getSouthWest(),c=!0;i&&a--;do a++,n=this.project(h,a),o=this.project(l,a),e=new L.Point(n.x-o.x,o.y-n.y),c=i?e.x<s.x||e.y<s.y:e.x<=s.x&&e.y<=s.y;while(c&&r>=a);return c&&i?null:i?a:a-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size},getPixelBounds:function(){var t=this._getTopLeftPoint(),i=this.getSize();return new L.Bounds(t,t.add(i))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},mouseEventToContainerPoint:function(t){return L.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},containerPointToLayerPoint:function(t){return t.subtract(L.DomUtil.getPosition(this._mapPane))},layerPointToContainerPoint:function(t){return t.add(L.DomUtil.getPosition(this._mapPane))},layerPointToLatLng:function(t){return this.unproject(t.add(this._initialTopLeftPoint))},latLngToLayerPoint:function(t){return this.project(t)._round()._subtract(this._initialTopLeftPoint)},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(t,this.options.scale(i))},unproject:function(t,i,e){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(t,this.options.scale(i),e)},_initLayout:function(){var t,i=this._container;i.innerHTML="",i.className+=" leaflet-container",this.options.fadeAnimation&&(i.className+=" leaflet-fade-anim"),t=L.DomUtil.getStyle(i,"position"),"absolute"!==t&&"relative"!==t&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),this._objectsPane=t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane")},_createPane:function(t,i){return L.DomUtil.create("div",t,i||this._objectsPane)},_resetView:function(t,i,e,n){var o,s=this._zoom!==i;n||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=i,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),e?(o=L.DomUtil.getPosition(this._mapPane),this._initialTopLeftPoint._add(o)):L.DomUtil.setPosition(this._mapPane,new L.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum,this.fire("viewreset",{hard:!e}),this.fire("move"),(s||n)&&this.fire("zoomend"),this.fire("moveend"),this._loaded||(this._loaded=!0,this.fire("load"))},_initLayers:function(t){this._layers={};var i,e;for(i=0,e=t.length;e>i;i++)this.addLayer(t[i])},_initControls:function(){this.options.zoomControl&&this.addControl(new L.Control.Zoom),this.options.attributionControl&&(this.attributionControl=new L.Control.Attribution,this.addControl(this.attributionControl))},_rawPanBy:function(t){var i=L.DomUtil.getPosition(this._mapPane);L.DomUtil.setPosition(this._mapPane,i.subtract(t))},_initEvents:function(){var t,i,e;for(L.DomEvent.addListener(this._container,"click",this._onMouseClick,this),t=["dblclick","mousedown","mouseenter","mouseleave","mousemove","contextmenu"],i=0,e=t.length;e>i;i++)L.DomEvent.addListener(this._container,t[i],this._fireMouseEvent,this);this.options.trackResize&&L.DomEvent.addListener(window,"resize",this._onResize,this)},_onResize:function(){L.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("pre"+t.type),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded){var i=t.type;i="mouseenter"===i?"mouseover":"mouseleave"===i?"mouseout":i,this.hasEventListeners(i)&&("contextmenu"===i&&L.DomEvent.preventDefault(t),this.fire(i,{latlng:this.mouseEventToLatLng(t),layerPoint:this.mouseEventToLayerPoint(t)}))}},_initInteraction:function(){var t,i={dragging:L.Map.Drag,touchZoom:L.Map.TouchZoom,doubleClickZoom:L.Map.DoubleClickZoom,scrollWheelZoom:L.Map.ScrollWheelZoom,boxZoom:L.Map.BoxZoom};for(t in i)i.hasOwnProperty(t)&&i[t]&&(this[t]=new i[t](this),this.options[t]&&this[t].enable())},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(L.Util.bind(this._clearTileBg,this),500))},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");var t=L.DomUtil.getPosition(this._mapPane);return this._initialTopLeftPoint.subtract(t)},_getNewTopLeftPoint:function(t){var i=this.getSize().divideBy(2);return this.project(t).subtract(i).round()},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom();return Math.max(i,Math.min(e,t))}}),L.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(t){var i,e=L.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),s=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*s,h=o*e,l=a/s,c=Math.sqrt(1-l*l),u=c*Math.sin(h);return u=Math.pow((1-u)/(1+u),.5*c),i=Math.tan(.5*(.5*Math.PI-h))/u,h=-a*Math.log(i),new L.Point(r,h)},unproject:function(t,i){for(var e,n=L.LatLng.RAD_TO_DEG,o=this.R_MAJOR,s=this.R_MINOR,a=t.x*n/o,r=s/o,h=Math.sqrt(1-r*r),l=Math.exp(-t.y/s),c=Math.PI/2-2*Math.atan(l),u=15,_=1e-7,p=u,d=.1;Math.abs(d)>_&&--p>0;)e=h*Math.sin(c),d=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*h))-c,c+=d;return new L.LatLng(c*n,a,i)}},L.CRS.EPSG3395=L.Util.extend({},L.CRS,{code:"EPSG:3395",projection:L.Projection.Mercator,transformation:function(){var t=L.Projection.Mercator,i=t.R_MAJOR,e=t.R_MINOR;return new L.Transformation(.5/(Math.PI*i),.5,-.5/(Math.PI*e),.5)}()}),L.TileLayer=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,scheme:"xyz",continuousWorld:!1,noWrap:!1,zoomOffset:0,zoomReverse:!1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile,reuseTiles:!1},initialize:function(t,i,e){L.Util.setOptions(this,i),this._url=t,this._urlParams=e,"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""))},onAdd:function(t,i){this._map=t,this._insertAtTheBottom=i,this._initContainer(),this._createTileProto(),t.on("viewreset",this._resetCallback,this),this.options.updateWhenIdle?t.on("moveend",this._update,this):(this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},onRemove:function(){this._map.getPanes().tilePane.removeChild(this._container),this._container=null,this._map.off("viewreset",this._resetCallback,this),this.options.updateWhenIdle?this._map.off("moveend",this._update,this):this._map.off("move",this._limitedUpdate,this)},getAttribution:function(){return this.options.attribution},setOpacity:function(t){if(this.options.opacity=t,this._setOpacity(t),L.Browser.webkit)for(var i in this._tiles)this._tiles.hasOwnProperty(i)&&(this._tiles[i].style.webkitTransform+=" translate(0,0)")},_setOpacity:function(t){1>t&&L.DomUtil.setOpacity(this._container,t)},_initContainer:function(){var t=this._map.getPanes().tilePane,i=t.firstChild;(!this._container||t.empty)&&(this._container=L.DomUtil.create("div","leaflet-layer"),this._insertAtTheBottom&&i?t.insertBefore(this._container,i):t.appendChild(this._container),this._setOpacity(this.options.opacity))},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){var i;for(i in this._tiles)this._tiles.hasOwnProperty(i)&&this.fire("tileunload",{tile:this._tiles[i]});this._tiles={},this.options.reuseTiles&&(this._unusedTiles=[]),t&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){var t,i,e,n=this._map.getPixelBounds(),o=this._map.getZoom(),s=this.options.tileSize;o>this.options.maxZoom||o<this.options.minZoom||(t=new L.Point(Math.floor(n.min.x/s),Math.floor(n.min.y/s)),i=new L.Point(Math.floor(n.max.x/s),Math.floor(n.max.y/s)),e=new L.Bounds(t,i),this._addTilesFromCenterOut(e),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(e))},_addTilesFromCenterOut:function(t){var i,e,n,o,s,a=[],r=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(e=t.min.x;e<=t.max.x;e++)e+":"+i in this._tiles||a.push(new L.Point(e,i));for(a.sort(function(t,i){return t.distanceTo(r)-i.distanceTo(r)}),n=document.createDocumentFragment(),this._tilesToLoad=a.length,o=0,s=this._tilesToLoad;s>o;o++)this._addTile(a[o],n);this._container.appendChild(n)},_removeOtherTiles:function(t){var i,e,n,o,s;for(o in this._tiles)this._tiles.hasOwnProperty(o)&&(i=o.split(":"),e=parseInt(i[0],10),n=parseInt(i[1],10),(e<t.min.x||e>t.max.x||n<t.min.y||n>t.max.y)&&(s=this._tiles[o],this.fire("tileunload",{tile:s,url:s.src}),s.parentNode===this._container&&this._container.removeChild(s),this.options.reuseTiles&&this._unusedTiles.push(this._tiles[o]),s.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",delete this._tiles[o]))},_addTile:function(t,i){var e,n=this._getTilePos(t),o=this._map.getZoom(),s=t.x+":"+t.y,a=Math.pow(2,this._getOffsetZoom(o));if(!this.options.continuousWorld){if(this.options.noWrap){if(t.x<0||t.x>=a)return this._tilesToLoad--,void 0}else t.x=(t.x%a+a)%a;if(t.y<0||t.y>=a)return this._tilesToLoad--,void 0}e=this._getTile(),L.DomUtil.setPosition(e,n),this._tiles[s]=e,"tms"===this.options.scheme&&(t.y=a-t.y-1),this._loadTile(e,t,o),i.appendChild(e)},_getOffsetZoom:function(t){return t=this.options.zoomReverse?this.options.maxZoom-t:t,t+this.options.zoomOffset},_getTilePos:function(t){var i=this._map.getPixelOrigin(),e=this.options.tileSize;return t.multiplyBy(e).subtract(i)},getTileUrl:function(t,i){var e=this.options.subdomains,n=this.options.subdomains[(t.x+t.y)%e.length];return L.Util.template(this._url,L.Util.extend({s:n,z:this._getOffsetZoom(i),x:t.x,y:t.y},this._urlParams))},_createTileProto:function(){this._tileImg=L.DomUtil.create("img","leaflet-tile"),this._tileImg.galleryimg="no";var t=this.options.tileSize;this._tileImg.style.width=t+"px",this._tileImg.style.height=t+"px"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=L.Util.falseFn,t},_loadTile:function(t,i,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,t.src=this.getTileUrl(i,e)},_tileOnLoad:function(){var t=this._layer;this.className+=" leaflet-tile-loaded",t.fire("tileload",{tile:this,url:this.src}),t._tilesToLoad--,t._tilesToLoad||t.fire("load")},_tileOnError:function(){var t,i=this._layer;i.fire("tileerror",{tile:this,url:this.src}),t=i.options.errorTileUrl,t&&(this.src=t)}}),L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,i){this._url=t,this.wmsParams=L.Util.extend({},this.defaultWmsParams),this.wmsParams.width=this.wmsParams.height=this.options.tileSize;for(var e in i)this.options.hasOwnProperty(e)||(this.wmsParams[e]=i[e]);L.Util.setOptions(this,i)},onAdd:function(t){var i=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[i]=t.options.crs.code,L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this.options.tileSize,e=t.multiplyBy(i),n=e.add(new L.Point(i,i)),o=this._map.unproject(e,this._zoom,!0),s=this._map.unproject(n,this._zoom,!0),a=this._map.options.crs.project(o),r=this._map.options.crs.project(s),h=[a.x,r.y,r.x,a.y].join(",");return this._url+L.Util.getParamString(this.wmsParams)+"&bbox="+h}}),L.TileLayer.Canvas=L.TileLayer.extend({options:{async:!1},initialize:function(t){L.Util.setOptions(this,t)},redraw:function(){var t,i;for(t in this._tiles)i=this._tiles[t],this._redrawTile(i)},_redrawTile:function(t){this.drawTile(t,t._tilePoint,t._zoom)},_createTileProto:function(){this._canvasProto=L.DomUtil.create("canvas","leaflet-tile");var t=this.options.tileSize;this._canvasProto.width=t,this._canvasProto.height=t},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=L.Util.falseFn,t},_loadTile:function(t,i,e){t._layer=this,t._tilePoint=i,t._zoom=e,this.drawTile(t,i,e),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),L.ImageOverlay=L.Class.extend({includes:L.Mixin.Events,initialize:function(t,i){this._url=t,this._bounds=i},onAdd:function(t){this._map=t,this._image||this._initImage(),t.getPanes().overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this)},_initImage:function(){this._image=L.DomUtil.create("img","leaflet-image-layer"),this._image.style.visibility="hidden",L.Util.extend(this._image,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.Util.bind(this._onImageLoad,this),src:this._url})},_reset:function(){var t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast()),e=i.subtract(t);L.DomUtil.setPosition(this._image,t),this._image.style.width=e.x+"px",this._image.style.height=e.y+"px"},_onImageLoad:function(){this._image.style.visibility="",this.fire("load")}}),L.Icon=L.Class.extend({iconUrl:L.ROOT_URL+"images/marker.png",shadowUrl:L.ROOT_URL+"images/marker-shadow.png",iconSize:new L.Point(25,41),shadowSize:new L.Point(41,41),iconAnchor:new L.Point(13,41),popupAnchor:new L.Point(0,-33),initialize:function(t){t&&(this.iconUrl=t)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(t){var i,e=this[t+"Size"],n=this[t+"Url"];return n||"shadow"!==t?(i=n?this._createImg(n):this._createDiv(),i.className="leaflet-marker-"+t,i.style.marginLeft=-this.iconAnchor.x+"px",i.style.marginTop=-this.iconAnchor.y+"px",e&&(i.style.width=e.x+"px",i.style.height=e.y+"px"),i):null},_createImg:function(t){var i;return L.Browser.ie6?(i=document.createElement("div"),i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(i=document.createElement("img"),i.src=t),i},_createDiv:function(){return document.createElement("div")}}),L.Marker=L.Class.extend({includes:L.Mixin.Events,options:{icon:new L.Icon,title:"",clickable:!0,draggable:!1,zIndexOffset:0},initialize:function(t,i){L.Util.setOptions(this,i),this._latlng=t},onAdd:function(t){this._map=t,this._initIcon(),t.on("viewreset",this._reset,this),this._reset()},onRemove:function(t){this._removeIcon(),this.closePopup&&this.closePopup(),this._map=null,t.off("viewreset",this._reset,this)},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=t,this._icon&&(this._reset(),this._popup&&this._popup.setLatLng(this._latlng))},setZIndexOffset:function(t){this.options.zIndexOffset=t,this._icon&&this._reset()},setIcon:function(t){this._map&&this._removeIcon(),this.options.icon=t,this._map&&(this._initIcon(),this._reset())},_initIcon:function(){this._icon||(this._icon=this.options.icon.createIcon(),this.options.title&&(this._icon.title=this.options.title),this._initInteraction()),this._shadow||(this._shadow=this.options.icon.createShadow()),this._map._panes.markerPane.appendChild(this._icon),this._shadow&&this._map._panes.shadowPane.appendChild(this._shadow)
},_removeIcon:function(){this._map._panes.markerPane.removeChild(this._icon),this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_reset:function(){var t=this._map.latLngToLayerPoint(this._latlng).round();L.DomUtil.setPosition(this._icon,t),this._shadow&&L.DomUtil.setPosition(this._shadow,t),this._icon.style.zIndex=t.y+this.options.zIndexOffset},_initInteraction:function(){var t,i;if(this.options.clickable)for(this._icon.className+=" leaflet-clickable",L.DomEvent.addListener(this._icon,"click",this._onMouseClick,this),t=["dblclick","mousedown","mouseover","mouseout"],i=0;i<t.length;i++)L.DomEvent.addListener(this._icon,t[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())},_onMouseClick:function(t){L.DomEvent.stopPropagation(t),this.dragging&&this.dragging.moved()||this.fire(t.type)},_fireMouseEvent:function(t){this.fire(t.type),L.DomEvent.stopPropagation(t)}}),L.Popup=L.Class.extend({includes:L.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:new L.Point(0,2),autoPanPadding:new L.Point(5,5),className:""},initialize:function(t,i){L.Util.setOptions(this,t),this._source=i},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent(),this._container.style.opacity="0",this._map._panes.popupPane.appendChild(this._container),this._map.on("viewreset",this._updatePosition,this),this._map.options.closePopupOnClick&&this._map.on("preclick",this._close,this),this._update(),this._container.style.opacity="1",this._opened=!0},onRemove:function(t){t._panes.popupPane.removeChild(this._container),L.Util.falseFn(this._container.offsetWidth),t.off("viewreset",this._updatePosition,this),t.off("click",this._close,this),this._container.style.opacity="0",this._opened=!1},setLatLng:function(t){return this._latlng=t,this._opened&&this._update(),this},setContent:function(t){return this._content=t,this._opened&&this._update(),this},_close:function(){this._opened&&this._map.closePopup()},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-popup "+this.options.className),this.options.closeButton&&(this._closeButton=L.DomUtil.create("a","leaflet-popup-close-button",this._container),this._closeButton.href="#close",L.DomEvent.addListener(this._closeButton,"click",this._onCloseButtonClick,this)),this._wrapper=L.DomUtil.create("div","leaflet-popup-content-wrapper",this._container),L.DomEvent.disableClickPropagation(this._wrapper),this._contentNode=L.DomUtil.create("div","leaflet-popup-content",this._wrapper),this._tipContainer=L.DomUtil.create("div","leaflet-popup-tip-container",this._container),this._tip=L.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_update:function(){this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan()},_updateContent:function(){this._content&&("string"==typeof this._content?this._contentNode.innerHTML=this._content:(this._contentNode.innerHTML="",this._contentNode.appendChild(this._content)))},_updateLayout:function(){this._container.style.width="",this._container.style.whiteSpace="nowrap";var t=this._container.offsetWidth;this._container.style.width=(t>this.options.maxWidth?this.options.maxWidth:t<this.options.minWidth?this.options.minWidth:t)+"px",this._container.style.whiteSpace="",this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._containerBottom=-t.y-this.options.offset.y,this._containerLeft=t.x-Math.round(this._containerWidth/2)+this.options.offset.x,this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_adjustPan:function(){if(this.options.autoPan){var t=this._container.offsetHeight,i=new L.Point(this._containerLeft,-t-this._containerBottom),e=this._map.layerPointToContainerPoint(i),n=new L.Point(0,0),o=this.options.autoPanPadding,s=this._map.getSize();e.x<0&&(n.x=e.x-o.x),e.x+this._containerWidth>s.x&&(n.x=e.x+this._containerWidth-s.x+o.x),e.y<0&&(n.y=e.y-o.y),e.y+t>s.y&&(n.y=e.y+t-s.y+o.y),(n.x||n.y)&&this._map.panBy(n)}},_onCloseButtonClick:function(t){this._close(),L.DomEvent.stop(t)}}),L.Marker.include({openPopup:function(){return this._popup.setLatLng(this._latlng),this._map&&this._map.openPopup(this._popup),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(t,i){return i=L.Util.extend({offset:this.options.icon.popupAnchor},i),this._popup||this.on("click",this.openPopup,this),this._popup=new L.Popup(i,this),this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup)),this}}),L.Map.include({openPopup:function(t){return this.closePopup(),this._popup=t,this.addLayer(t),this.fire("popupopen",{popup:this._popup}),this},closePopup:function(){return this._popup&&(this.removeLayer(this._popup),this.fire("popupclose",{popup:this._popup}),this._popup=null),this}}),L.LayerGroup=L.Class.extend({initialize:function(t){if(this._layers={},t)for(var i=0,e=t.length;e>i;i++)this.addLayer(t[i])},addLayer:function(t){var i=L.Util.stamp(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=L.Util.stamp(t);return delete this._layers[i],this._map&&this._map.removeLayer(t),this},clearLayers:function(){return this._iterateLayers(this.removeLayer,this),this},invoke:function(t){var i,e,n=Array.prototype.slice.call(arguments,1);for(i in this._layers)this._layers.hasOwnProperty(i)&&(e=this._layers[i],e[t]&&e[t].apply(e,n));return this},onAdd:function(t){this._map=t,this._iterateLayers(t.addLayer,t)},onRemove:function(t){this._iterateLayers(t.removeLayer,t),delete this._map},_iterateLayers:function(t,i){for(var e in this._layers)this._layers.hasOwnProperty(e)&&t.call(i,this._layers[e])}}),L.FeatureGroup=L.LayerGroup.extend({includes:L.Mixin.Events,addLayer:function(t){this._initEvents(t),L.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent)},bindPopup:function(t){return this._popupContent=t,this.invoke("bindPopup",t)},setStyle:function(t){return this.invoke("setStyle",t)},_events:["click","dblclick","mouseover","mouseout"],_initEvents:function(t){for(var i=0,e=this._events.length;e>i;i++)t.on(this._events[i],this._propagateEvent,this)},_propagateEvent:function(t){t.layer=t.target,t.target=this,this.fire(t.type,t)}}),L.Path=L.Class.extend({includes:[L.Mixin.Events],statics:{CLIP_PADDING:.5},options:{stroke:!0,color:"#0033ff",weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0,updateOnMoveEnd:!0},initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){this._map=t,this._initElements(),this._initEvents(),this.projectLatlngs(),this._updatePath(),t.on("viewreset",this.projectLatlngs,this),this._updateTrigger=this.options.updateOnMoveEnd?"moveend":"viewreset",t.on(this._updateTrigger,this._updatePath,this)},onRemove:function(t){this._map=null,t._pathRoot.removeChild(this._container),t.off("viewreset",this.projectLatlngs,this),t.off(this._updateTrigger,this._updatePath,this)},projectLatlngs:function(){},setStyle:function(t){return L.Util.setOptions(this,t),this._container&&this._updateStyle(),this},_redraw:function(){this._map&&(this.projectLatlngs(),this._updatePath())}}),L.Map.include({_updatePathViewport:function(){var t=L.Path.CLIP_PADDING,i=this.getSize(),e=L.DomUtil.getPosition(this._mapPane),n=e.multiplyBy(-1).subtract(i.multiplyBy(t)),o=n.add(i.multiplyBy(1+2*t));this._pathViewport=new L.Bounds(n,o)}}),L.Path.SVG_NS="http://www.w3.org/2000/svg",L.Browser.svg=!(!document.createElementNS||!document.createElementNS(L.Path.SVG_NS,"svg").createSVGRect),L.Path=L.Path.extend({statics:{SVG:L.Browser.svg,_createElement:function(t){return document.createElementNS(L.Path.SVG_NS,t)}},getPathString:function(){},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=L.Path._createElement("g"),this._path=L.Path._createElement("path"),this._container.appendChild(this._path),this._map._pathRoot.appendChild(this._container)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill?this._path.setAttribute("fill-rule","evenodd"):this._path.setAttribute("fill","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight)),this.options.fill&&(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity))},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){var t,i;if(this.options.clickable)for(L.Browser.vml||this._path.setAttribute("class","leaflet-clickable"),L.DomEvent.addListener(this._container,"click",this._onMouseClick,this),t=["dblclick","mousedown","mouseover","mouseout","mousemove"],i=0;i<t.length;i++)L.DomEvent.addListener(this._container,t[i],this._fireMouseEvent,this)},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){this.hasEventListeners(t.type)&&(this.fire(t.type,{latlng:this._map.mouseEventToLatLng(t),layerPoint:this._map.mouseEventToLayerPoint(t)}),L.DomEvent.stopPropagation(t))}}),L.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=L.Path._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_updateSvgViewport:function(){this._updatePathViewport();var t=this._pathViewport,i=t.min,e=t.max,n=e.x-i.x,o=e.y-i.y,s=this._pathRoot,a=this._panes.overlayPane;L.Browser.webkit&&a.removeChild(s),L.DomUtil.setPosition(s,i),s.setAttribute("width",n),s.setAttribute("height",o),s.setAttribute("viewBox",[i.x,i.y,n,o].join(" ")),L.Browser.webkit&&a.appendChild(s)}}),L.Path.include({bindPopup:function(t,i){return this._popup&&this._popup.options===i||(this._popup=new L.Popup(i,this)),this._popup.setContent(t),this._openPopupAdded||(this.on("click",this._openPopup,this),this._openPopupAdded=!0),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),L.Browser.vml=function(){var t,i=document.createElement("div");return i.innerHTML='<v:shape adj="1"/>',t=i.firstChild,t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}(),L.Path=L.Browser.svg||!L.Browser.vml?L.Path:L.Path.extend({statics:{VML:!0,CLIP_PADDING:.02,_createElement:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()},_initPath:function(){this._container=L.Path._createElement("shape"),this._container.className+=" leaflet-vml-shape"+(this.options.clickable?" leaflet-clickable":""),this._container.coordsize="1 1",this._path=L.Path._createElement("path"),this._container.appendChild(this._path),this._map._pathRoot.appendChild(this._container)},_initStyle:function(){this.options.stroke?(this._stroke=L.Path._createElement("stroke"),this._stroke.endcap="round",this._container.appendChild(this._stroke)):this._container.stroked=!1,this.options.fill?(this._container.filled=!0,this._fill=L.Path._createElement("fill"),this._container.appendChild(this._fill)):this._container.filled=!1,this._updateStyle()},_updateStyle:function(){this.options.stroke&&(this._stroke.weight=this.options.weight+"px",this._stroke.color=this.options.color,this._stroke.opacity=this.options.opacity),this.options.fill&&(this._fill.color=this.options.fillColor||this.options.color,this._fill.opacity=this.options.fillOpacity)},_updatePath:function(){this._container.style.display="none",this._path.v=this.getPathString()+" ",this._container.style.display=""}}),L.Map.include(L.Browser.svg||!L.Browser.vml?{}:{_initPathRoot:function(){this._pathRoot||(this._pathRoot=document.createElement("div"),this._pathRoot.className="leaflet-vml-container",this._panes.overlayPane.appendChild(this._pathRoot),this.on("moveend",this._updatePathViewport),this._updatePathViewport())}}),L.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),L.Path=L.Path.SVG&&!window.L_PREFER_CANVAS||!L.Browser.canvas?L.Path:L.Path.extend({statics:{CANVAS:!0,SVG:!1},options:{updateOnMoveEnd:!0},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){this.options.stroke&&(this._ctx.lineWidth=this.options.weight,this._ctx.strokeStyle=this.options.color),this.options.fill&&(this._ctx.fillStyle=this.options.fillColor||this.options.color)},_drawPath:function(){var t,i,e,n,o,s;for(this._ctx.beginPath(),t=0,e=this._parts.length;e>t;t++){for(i=0,n=this._parts[t].length;n>i;i++)o=this._parts[t][i],s=(0===i?"move":"line")+"To",this._ctx[s](o.x,o.y);this instanceof L.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){this._drawPath(),this._ctx.save(),this._updateStyle();var t=this.options.opacity,i=this.options.fillOpacity;this.options.fill&&(1>i&&(this._ctx.globalAlpha=i),this._ctx.fill()),this.options.stroke&&(1>t&&(this._ctx.globalAlpha=t),this._ctx.stroke()),this._ctx.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},onRemove:function(t){t.off("viewreset",this._projectLatlngs,this),t.off(this._updateTrigger,this._updatePath,this),t.fire(this._updateTrigger)}}),L.Map.include(L.Path.SVG&&!window.L_PREFER_CANVAS||!L.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=document.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){this._updatePathViewport();var t=this._pathViewport,i=t.min,e=t.max.subtract(i),n=this._pathRoot;L.DomUtil.setPosition(n,i),n.width=e.x,n.height=e.y,n.getContext("2d").translate(-i.x,-i.y)}}),L.LineUtil={simplify:function(t,i){if(!i||!t.length)return t.slice();var e=i*i;return t=this._reducePoints(t,e),t=this._simplifyDP(t,e)},pointToSegmentDistance:function(t,i,e){return Math.sqrt(this._sqClosestPointOnSegment(t,i,e,!0))},closestPointOnSegment:function(t,i,e){return this._sqClosestPointOnSegment(t,i,e)},_simplifyDP:function(t,i){var e,n,o=t.length,s="undefined"!=typeof Uint8Array?Uint8Array:Array,a=new s(o);for(a[0]=a[o-1]=1,this._simplifyDPStep(t,a,i,0,o-1),n=[],e=0;o>e;e++)a[e]&&n.push(t[e]);return n},_simplifyDPStep:function(t,i,e,n,o){var s,a,r,h=0;for(a=n+1;o-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),r>h&&(s=a,h=r);h>e&&(i[s]=1,this._simplifyDPStep(t,i,e,n,s),this._simplifyDPStep(t,i,e,s,o))},_reducePoints:function(t,i){var e,n,o,s=[t[0]];for(e=1,n=0,o=t.length;o>e;e++)this._sqDist(t[e],t[n])>i&&(s.push(t[e]),n=e);return o-1>n&&s.push(t[o-1]),s},clipSegment:function(t,i,e,n){var o,s,a,r,h;for(e.min,e.max,o=n?this._lastCode:this._getBitCode(t,e),s=this._getBitCode(i,e),this._lastCode=s;;){if(!(o|s))return[t,i];if(o&s)return!1;a=o||s,r=this._getEdgeIntersection(t,i,a,e),h=this._getBitCode(r,e),a===o?(t=r,o=h):(i=r,s=h)}},_getEdgeIntersection:function(t,i,e,n){var o=i.x-t.x,s=i.y-t.y,a=n.min,r=n.max;return 8&e?new L.Point(t.x+o*(r.y-t.y)/s,r.y):4&e?new L.Point(t.x+o*(a.y-t.y)/s,a.y):2&e?new L.Point(r.x,t.y+s*(r.x-t.x)/o):1&e?new L.Point(a.x,t.y+s*(a.x-t.x)/o):void 0},_getBitCode:function(t,i){var e=0;return t.x<i.min.x?e|=1:t.x>i.max.x&&(e|=2),t.y<i.min.y?e|=4:t.y>i.max.y&&(e|=8),e},_sqDist:function(t,i){var e=i.x-t.x,n=i.y-t.y;return e*e+n*n},_sqClosestPointOnSegment:function(t,i,e,n){var o,s=i.x,a=i.y,r=e.x-s,h=e.y-a,l=r*r+h*h;return l>0&&(o=((t.x-s)*r+(t.y-a)*h)/l,o>1?(s=e.x,a=e.y):o>0&&(s+=r*o,a+=h*o)),r=t.x-s,h=t.y-a,n?r*r+h*h:new L.Point(s,a)}},L.Polyline=L.Path.extend({initialize:function(t,i){L.Path.prototype.initialize.call(this,i),this._latlngs=t},options:{smoothFactor:1,noClip:!1,updateOnMoveEnd:!0},projectLatlngs:function(){this._originalPoints=[];for(var t=0,i=this._latlngs.length;i>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,i=this._parts.length,e="";i>t;t++)e+=this._getPathPartStr(this._parts[t]);return e},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=t,this._redraw(),this},addLatLng:function(t){return this._latlngs.push(t),this._redraw(),this},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._redraw(),t},closestLayerPoint:function(t){var i,e,n,o,s,a,r,h,l=1/0,c=this._parts,u=null;for(n=0,o=c.length;o>n;n++)for(s=c[n],a=1,r=s.length;r>a;a++)i=s[a-1],e=s[a],h=L.LineUtil._sqClosestPointOnSegment(t,i,e),h._sqDist<l&&(l=h._sqDist,u=h);return u&&(u.distance=Math.sqrt(l)),u},getBounds:function(){var t,i,e=new L.LatLngBounds,n=this.getLatLngs();for(t=0,i=n.length;i>t;t++)e.extend(n[t]);return e},_getPathPartStr:function(t){var i,e,n,o,s=L.Path.VML;for(e=0,n=t.length,o="";n>e;e++)i=t[e],s&&i._round(),o+=(e?"L":"M")+i.x+" "+i.y;return o},_clipPoints:function(){var t,i,e,n,o,s,a=this._originalPoints,r=a.length;if(this.options.noClip)return this._parts=[a],void 0;for(this._parts=[],n=this._parts,o=this._map._pathViewport,s=L.LineUtil,t=0,i=0;r-1>t;t++)e=s.clipSegment(a[t],a[t+1],o,t),e&&(n[i]=n[i]||[],n[i].push(e[0]),(e[1]!==a[t+1]||t===r-2)&&(n[i].push(e[1]),i++))},_simplifyPoints:function(){var t,i,e=this._parts,n=L.LineUtil;for(t=0,i=e.length;i>t;t++)e[t]=n.simplify(e[t],this.options.smoothFactor)},_updatePath:function(){this._clipPoints(),this._simplifyPoints(),L.Path.prototype._updatePath.call(this)}}),L.PolyUtil={},L.PolyUtil.clipPolygon=function(t,i){var e,n,o,s,a,r,h,l,c,u=(i.min,i.max,[1,4,2,8]),_=L.LineUtil;for(n=0,h=t.length;h>n;n++)t[n]._code=_._getBitCode(t[n],i);for(s=0;4>s;s++){for(l=u[s],e=[],n=0,h=t.length,o=h-1;h>n;o=n++)a=t[n],r=t[o],a._code&l?r._code&l||(c=_._getEdgeIntersection(r,a,l,i),c._code=_._getBitCode(c,i),e.push(c)):(r._code&l&&(c=_._getEdgeIntersection(r,a,l,i),c._code=_._getBitCode(c,i),e.push(c)),e.push(a));t=e}return t},L.Polygon=L.Polyline.extend({options:{fill:!0},initialize:function(t,i){L.Polyline.prototype.initialize.call(this,t,i),t&&t[0]instanceof Array&&(this._latlngs=t[0],this._holes=t.slice(1))},projectLatlngs:function(){var t,i,e,n;if(L.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;n>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])},_clipPoints:function(){var t,i,e,n=this._originalPoints,o=[];if(this._parts=[n].concat(this._holePoints),!this.options.noClip){for(t=0,i=this._parts.length;i>t;t++)e=L.PolyUtil.clipPolygon(this._parts[t],this._map._pathViewport),e.length&&o.push(e);this._parts=o}},_getPathPartStr:function(t){var i=L.Polyline.prototype._getPathPartStr.call(this,t);return i+(L.Browser.svg?"z":"x")}}),function(){function t(t){return L.FeatureGroup.extend({initialize:function(t,i){this._layers={},this._options=i,this.setLatLngs(t)},setLatLngs:function(i){var e=0,n=i.length;for(this._iterateLayers(function(t){n>e?t.setLatLngs(i[e++]):this.removeLayer(t)},this);n>e;)this.addLayer(new t(i[e++],this._options))}})}L.MultiPolyline=t(L.Polyline),L.MultiPolygon=t(L.Polygon)}(),L.Circle=L.Path.extend({initialize:function(t,i,e){L.Path.prototype.initialize.call(this,e),this._latlng=t,this._mRadius=i},options:{fill:!0},setLatLng:function(t){return this._latlng=t,this._redraw(),this},setRadius:function(t){return this._mRadius=t,this._redraw(),this},projectLatlngs:function(){var t=40075017,i=t*Math.cos(L.LatLng.DEG_TO_RAD*this._latlng.lat),e=360*(this._mRadius/i),n=new L.LatLng(this._latlng.lat,this._latlng.lng-e,!0),o=this._map.latLngToLayerPoint(n);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.round(this._point.x-o.x)},getPathString:function(){var t=this._point,i=this._radius;return this._checkIfEmpty()?"":L.Browser.svg?"M"+t.x+","+(t.y-i)+"A"+i+","+i+",0,1,1,"+(t.x-.1)+","+(t.y-i)+" z":(t._round(),i=Math.round(i),"AL "+t.x+","+t.y+" "+i+","+i+" 0,"+23592600)},_checkIfEmpty:function(){var t=this._map._pathViewport,i=this._radius,e=this._point;return e.x-i>t.max.x||e.y-i>t.max.y||e.x+i<t.min.x||e.y+i<t.min.y}}),L.CircleMarker=L.Circle.extend({options:{radius:10,weight:2},initialize:function(t,i){L.Circle.prototype.initialize.call(this,t,null,i),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(t){return this._radius=t,this._redraw(),this}}),L.Polyline.include(L.Path.CANVAS?{_containsPoint:function(t,i){var e,n,o,s,a,r,h,l=this.options.weight/2;for(L.Browser.touch&&(l+=10),e=0,s=this._parts.length;s>e;e++)for(h=this._parts[e],n=0,a=h.length,o=a-1;a>n;o=n++)if((i||0!==n)&&(r=L.LineUtil.pointToSegmentDistance(t,h[o],h[n]),l>=r))return!0;return!1}}:{}),L.Polygon.include(L.Path.CANVAS?{_containsPoint:function(t){var i,e,n,o,s,a,r,h,l=!1;if(L.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,r=this._parts.length;r>o;o++)for(i=this._parts[o],s=0,h=i.length,a=h-1;h>s;a=s++)e=i[s],n=i[a],e.y>t.y!=n.y>t.y&&t.x<(n.x-e.x)*(t.y-e.y)/(n.y-e.y)+e.x&&(l=!l);return l}}:{}),L.Circle.include(L.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI)},_containsPoint:function(t){var i=this._point,e=this.options.stroke?this.options.weight/2:0;return t.distanceTo(i)<=this._radius+e}}:{}),L.GeoJSON=L.FeatureGroup.extend({initialize:function(t,i){L.Util.setOptions(this,i),this._geojson=t,this._layers={},t&&this.addGeoJSON(t)},addGeoJSON:function(t){var i,e,n,o,s;if(t.features)for(i=0,e=t.features.length;e>i;i++)this.addGeoJSON(t.features[i]);else n="Feature"===t.type,o=n?t.geometry:t,s=L.GeoJSON.geometryToLayer(o,this.options.pointToLayer),this.fire("featureparse",{layer:s,properties:t.properties,geometryType:o.type,bbox:t.bbox,id:t.id}),this.addLayer(s)}}),L.Util.extend(L.GeoJSON,{geometryToLayer:function(t,i){var e,n,o,s,a,r=t.coordinates,h=[];switch(t.type){case"Point":return e=this.coordsToLatLng(r),i?i(e):new L.Marker(e);case"MultiPoint":for(o=0,s=r.length;s>o;o++)e=this.coordsToLatLng(r[o]),a=i?i(e):new L.Marker(e),h.push(a);return new L.FeatureGroup(h);case"LineString":return n=this.coordsToLatLngs(r),new L.Polyline(n);case"Polygon":return n=this.coordsToLatLngs(r,1),new L.Polygon(n);case"MultiLineString":return n=this.coordsToLatLngs(r,1),new L.MultiPolyline(n);case"MultiPolygon":return n=this.coordsToLatLngs(r,2),new L.MultiPolygon(n);case"GeometryCollection":for(o=0,s=t.geometries.length;s>o;o++)a=this.geometryToLayer(t.geometries[o],i),h.push(a);return new L.FeatureGroup(h);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t,i){var e=parseFloat(t[i?0:1]),n=parseFloat(t[i?1:0]);return new L.LatLng(e,n,!0)},coordsToLatLngs:function(t,i,e){var n,o,s=[],a=t.length;for(o=0;a>o;o++)n=i?this.coordsToLatLngs(t[o],i-1,e):this.coordsToLatLng(t[o],e),s.push(n);return s}}),L.DomEvent={addListener:function(t,i,e,n){var o,s,a,r=L.Util.stamp(e),h="_leaflet_"+i+r;t[h]||(o=function(i){return e.call(n||t,i||L.DomEvent._getEvent())},L.Browser.touch&&"dblclick"===i&&this.addDoubleTapListener?this.addDoubleTapListener(t,o,r):"addEventListener"in t?"mousewheel"===i?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(i,o,!1)):"mouseenter"===i||"mouseleave"===i?(s=o,a="mouseenter"===i?"mouseover":"mouseout",o=function(i){return L.DomEvent._checkMouse(t,i)?s(i):void 0},t.addEventListener(a,o,!1)):t.addEventListener(i,o,!1):"attachEvent"in t&&t.attachEvent("on"+i,o),t[h]=o)},removeListener:function(t,i,e){var n=L.Util.stamp(e),o="_leaflet_"+i+n,s=t[o];s&&(L.Browser.touch&&"dblclick"===i&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===i?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(i,s,!1)):"mouseenter"===i||"mouseleave"===i?t.removeEventListener("mouseenter"===i?"mouseover":"mouseout",s,!1):t.removeEventListener(i,s,!1):"detachEvent"in t&&t.detachEvent("on"+i,s),t[o]=null)},_checkMouse:function(t,i){var e=i.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(n){return!1}return e!==t},_getEvent:function(){var t,i=window.event;if(!i)for(t=arguments.callee.caller;t&&(i=t.arguments[0],!i||window.Event!==i.constructor);)t=t.caller;return i},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){L.DomEvent.addListener(t,L.Draggable.START,L.DomEvent.stopPropagation),L.DomEvent.addListener(t,"click",L.DomEvent.stopPropagation),L.DomEvent.addListener(t,"dblclick",L.DomEvent.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){L.DomEvent.preventDefault(t),L.DomEvent.stopPropagation(t)},getMousePosition:function(t,i){var e=t.pageX?t.pageX:t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=t.pageY?t.pageY:t.clientY+document.body.scrollTop+document.documentElement.scrollTop,o=new L.Point(e,n);return i?o.subtract(L.DomUtil.getViewportOffset(i)):o},getWheelDelta:function(t){var i=0;return t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),i}},L.Draggable=L.Class.extend({includes:L.Mixin.Events,statics:{START:L.Browser.touch?"touchstart":"mousedown",END:L.Browser.touch?"touchend":"mouseup",MOVE:L.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(t,i){this._element=t,this._dragStartTarget=i||t},enable:function(){this._enabled||(L.DomEvent.addListener(this._dragStartTarget,L.Draggable.START,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(L.DomEvent.removeListener(this._dragStartTarget,L.Draggable.START,this._onDown),this._enabled=!1)},_onDown:function(t){if(!(!L.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||t.touches&&t.touches.length>1)){var i=t.touches&&1===t.touches.length?t.touches[0]:t,e=i.target;L.DomEvent.preventDefault(t),L.Browser.touch&&"a"===e.tagName.toLowerCase()&&(e.className+=" leaflet-active"),this._moved=!1,this._moving||(L.Browser.touch||(L.DomUtil.disableTextSelection(),this._setMovingCursor()),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),this._startPoint=new L.Point(i.clientX,i.clientY),L.DomEvent.addListener(document,L.Draggable.MOVE,this._onMove,this),L.DomEvent.addListener(document,L.Draggable.END,this._onUp,this))}},_onMove:function(t){var i,e;t.touches&&t.touches.length>1||(L.DomEvent.preventDefault(t),i=t.touches&&1===t.touches.length?t.touches[0]:t,this._moved||(this.fire("dragstart"),this._moved=!0),this._moving=!0,e=new L.Point(i.clientX,i.clientY),this._newPos=this._startPos.add(e).subtract(this._startPoint),L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag"),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){if(t.changedTouches){var i=t.changedTouches[0],e=i.target,n=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===e.tagName.toLowerCase()&&(e.className=e.className.replace(" leaflet-active","")),n<L.Draggable.TAP_TOLERANCE&&this._simulateEvent("click",i)}L.Browser.touch||(L.DomUtil.enableTextSelection(),this._restoreCursor()),L.DomEvent.removeListener(document,L.Draggable.MOVE,this._onMove),L.DomEvent.removeListener(document,L.Draggable.END,this._onUp),this._moved&&this.fire("dragend"),this._moving=!1},_setMovingCursor:function(){this._bodyCursor=document.body.style.cursor,document.body.style.cursor="move"},_restoreCursor:function(){document.body.style.cursor=this._bodyCursor},_simulateEvent:function(t,i){var e=document.createEvent("MouseEvents");e.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(e)}}),L.Handler=L.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){this._draggable=new L.Draggable(this._map._mapPane,this._map._container),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);var t=this._map.options;t.worldCopyJump&&!t.continuousWorld&&(this._draggable.on("predrag",this._onPreDrag,this),this._map.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._map.fire("movestart").fire("dragstart")},_onDrag:function(){this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint(new L.LatLng(0,0));this._initialWorldOffset=i.subtract(t)},_onPreDrag:function(){var t=this._map,i=t.options.scale(t.getZoom()),e=Math.round(i/2),n=this._initialWorldOffset.x,o=this._draggable._newPos.x,s=(o-e+n)%i+e-n,a=(o+e+n)%i-e-n,r=Math.abs(s+n)<Math.abs(a+n)?s:a;this._draggable._newPos.x=r},_onDragEnd:function(){var t=this._map;t.fire("moveend").fire("dragend"),t.options.maxBounds&&L.Util.requestAnimFrame(this._panInsideMaxBounds,t,!0,t._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),L.Map.DoubleClickZoom=L.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setView(t.latlng,this._zoom+1)}}),L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.addListener(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){L.DomEvent.removeListener(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(t){var i=L.DomEvent.getWheelDelta(t);this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),clearTimeout(this._timer),this._timer=setTimeout(L.Util.bind(this._performZoom,this),50),L.DomEvent.preventDefault(t)},_performZoom:function(){var t,i,e=this._map,n=Math.round(this._delta),o=e.getZoom();n=Math.max(Math.min(n,4),-4),n=e._limitZoom(o+n)-o,this._delta=0,n&&(t=this._getCenterForScrollWheelZoom(this._lastMousePos,n),i=o+n,e.setView(t,i))},_getCenterForScrollWheelZoom:function(t,i){var e=this._map,n=e.getPixelBounds().getCenter(),o=e.getSize().divideBy(2),s=t.subtract(o).multiplyBy(1-Math.pow(2,-i)),a=n.add(s);return e.unproject(a,e._zoom,!0)}}),L.Util.extend(L.DomEvent,{addDoubleTapListener:function(t,i,e){function n(t){if(1===t.touches.length){var i=Date.now(),e=i-(s||i);a=t.touches[0],r=e>0&&h>=e,s=i}}function o(){r&&(a.type="dblclick",i(a),s=null)}var s,a,r=!1,h=250,l="_leaflet_",c="touchstart",u="touchend";t[l+c+e]=n,t[l+u+e]=o,t.addEventListener(c,n,!1),t.addEventListener(u,o,!1)},removeDoubleTapListener:function(t,i){var e="_leaflet_";t.removeEventListener(t,t[e+"touchstart"+i],!1),t.removeEventListener(t,t[e+"touchend"+i],!1)}}),L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomEvent.addListener(this._map._container,"touchstart",this._onTouchStart,this)
},removeHooks:function(){L.DomEvent.removeListener(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){if(t.touches&&2===t.touches.length&&!this._map._animatingZoom){var i=this._map.mouseEventToLayerPoint(t.touches[0]),e=this._map.mouseEventToLayerPoint(t.touches[1]),n=this._map.containerPointToLayerPoint(this._map.getSize().divideBy(2));this._startCenter=i.add(e).divideBy(2,!0),this._startDist=i.distanceTo(e),this._moved=!1,this._zooming=!0,this._centerOffset=n.subtract(this._startCenter),L.DomEvent.addListener(document,"touchmove",this._onTouchMove,this),L.DomEvent.addListener(document,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length){this._moved||(this._map._mapPane.className+=" leaflet-zoom-anim",this._map.fire("zoomstart").fire("movestart")._prepareTileBg(),this._moved=!0);var i=this._map.mouseEventToLayerPoint(t.touches[0]),e=this._map.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(e)/this._startDist,this._delta=i.add(e).divideBy(2,!0).subtract(this._startCenter),this._map._tileBg.style.webkitTransform=[L.DomUtil.getTranslateString(this._delta),L.DomUtil.getScaleString(this._scale,this._startCenter)].join(" "),L.DomEvent.preventDefault(t)}},_onTouchEnd:function(){var t,i,e,n,o,s,a,r,h;this._moved&&this._zooming&&(this._zooming=!1,t=this._map.getZoom(),i=Math.log(this._scale)/Math.LN2,e=i>0?Math.ceil(i):Math.floor(i),n=this._map._limitZoom(t+e),o=n-t,s=this._centerOffset.subtract(this._delta).divideBy(this._scale),a=this._map.getPixelOrigin().add(this._startCenter).add(s),r=this._map.unproject(a),L.DomEvent.removeListener(document,"touchmove",this._onTouchMove),L.DomEvent.removeListener(document,"touchend",this._onTouchEnd),h=Math.pow(2,o),this._map._runAnimation(r,n,h/this._scale,this._startCenter.add(s)))}}),L.Map.BoxZoom=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.addListener(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){L.DomEvent.removeListener(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(L.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=L.DomUtil.create("div","leaflet-zoom-box",this._pane),L.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",L.DomEvent.addListener(document,"mousemove",this._onMouseMove,this),L.DomEvent.addListener(document,"mouseup",this._onMouseUp,this),L.DomEvent.preventDefault(t),void 0)},_onMouseMove:function(t){var i=this._map.mouseEventToLayerPoint(t),e=i.x-this._startLayerPoint.x,n=i.y-this._startLayerPoint.y,o=Math.min(i.x,this._startLayerPoint.x),s=Math.min(i.y,this._startLayerPoint.y),a=new L.Point(o,s);L.DomUtil.setPosition(this._box,a),this._box.style.width=Math.abs(e)-4+"px",this._box.style.height=Math.abs(n)-4+"px"},_onMouseUp:function(t){var i,e;this._pane.removeChild(this._box),this._container.style.cursor="",L.DomUtil.enableTextSelection(),L.DomEvent.removeListener(document,"mousemove",this._onMouseMove),L.DomEvent.removeListener(document,"mouseup",this._onMouseUp),i=this._map.mouseEventToLayerPoint(t),e=new L.LatLngBounds(this._map.layerPointToLatLng(this._startLayerPoint),this._map.layerPointToLatLng(i)),this._map.fitBounds(e)}}),L.Handler.MarkerDrag=L.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(t,t),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=L.DomUtil.getPosition(this._marker._icon);this._marker._shadow&&L.DomUtil.setPosition(this._marker._shadow,t),this._marker._latlng=this._marker._map.layerPointToLatLng(t),this._marker.fire("move").fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),L.Control={},L.Control.Position={TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight"},L.Map.include({addControl:function(t){t.onAdd(this);var i=t.getPosition(),e=this._controlCorners[i],n=t.getContainer();return L.DomUtil.addClass(n,"leaflet-control"),-1!==i.indexOf("bottom")?e.insertBefore(n,e.firstChild):e.appendChild(n),this},removeControl:function(t){var i=t.getPosition(),e=this._controlCorners[i],n=t.getContainer();return e.removeChild(n),t.onRemove&&t.onRemove(this),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",e=i+"top",n=i+"bottom",o=i+"left",s=i+"right",a=L.DomUtil.create("div",i+"control-container",this._container);L.Browser.touch&&(a.className+=" "+i+"big-buttons"),t.topLeft=L.DomUtil.create("div",e+" "+o,a),t.topRight=L.DomUtil.create("div",e+" "+s,a),t.bottomLeft=L.DomUtil.create("div",n+" "+o,a),t.bottomRight=L.DomUtil.create("div",n+" "+s,a)}}),L.Control.Zoom=L.Class.extend({onAdd:function(t){this._map=t,this._container=L.DomUtil.create("div","leaflet-control-zoom"),this._zoomInButton=this._createButton("Zoom in","leaflet-control-zoom-in",this._map.zoomIn,this._map),this._zoomOutButton=this._createButton("Zoom out","leaflet-control-zoom-out",this._map.zoomOut,this._map),this._container.appendChild(this._zoomInButton),this._container.appendChild(this._zoomOutButton)},getContainer:function(){return this._container},getPosition:function(){return L.Control.Position.TOP_LEFT},_createButton:function(t,i,e,n){var o=document.createElement("a");return o.href="#",o.title=t,o.className=i,L.Browser.touch||L.DomEvent.disableClickPropagation(o),L.DomEvent.addListener(o,"click",L.DomEvent.preventDefault),L.DomEvent.addListener(o,"click",e,n),o}}),L.Control.Attribution=L.Class.extend({initialize:function(t){this._prefix=t||'Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>',this._attributions={}},onAdd:function(t){this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent.disableClickPropagation(this._container),this._map=t,this._update()},getPosition:function(){return L.Control.Position.BOTTOM_RIGHT},getContainer:function(){return this._container},setPrefix:function(t){this._prefix=t,this._update()},addAttribution:function(t){t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update())},removeAttribution:function(t){t&&(this._attributions[t]--,this._update())},_update:function(){var t,i,e;if(this._map){t=[];for(i in this._attributions)this._attributions.hasOwnProperty(i)&&t.push(i);e=[],this._prefix&&e.push(this._prefix),t.length&&e.push(t.join(", ")),this._container.innerHTML=e.join(" &mdash; ")}}}),L.Control.Layers=L.Class.extend({options:{collapsed:!0},initialize:function(t,i,e){L.Util.setOptions(this,e),this._layers={};for(var n in t)t.hasOwnProperty(n)&&this._addLayer(t[n],n);for(n in i)i.hasOwnProperty(n)&&this._addLayer(i[n],n,!0)},onAdd:function(t){this._map=t,this._initLayout(),this._update()},getContainer:function(){return this._container},getPosition:function(){return L.Control.Position.TOP_RIGHT},addBaseLayer:function(t,i){return this._addLayer(t,i),this._update(),this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._update(),this},removeLayer:function(t){var i=L.Util.stamp(t);return delete this._layers[i],this._update(),this},_initLayout:function(){if(this._container=L.DomUtil.create("div","leaflet-control-layers"),L.Browser.touch||L.DomEvent.disableClickPropagation(this._container),this._form=L.DomUtil.create("form","leaflet-control-layers-list"),this.options.collapsed){L.DomEvent.addListener(this._container,"mouseover",this._expand,this),L.DomEvent.addListener(this._container,"mouseout",this._collapse,this);var t=this._layersLink=L.DomUtil.create("a","leaflet-control-layers-toggle");t.href="#",t.title="Layers",L.Browser.touch?L.DomEvent.addListener(t,"click",this._expand,this):L.DomEvent.addListener(t,"focus",this._expand,this),this._map.on("movestart",this._collapse,this),this._container.appendChild(t)}else this._expand();this._baseLayersList=L.DomUtil.create("div","leaflet-control-layers-base",this._form),this._separator=L.DomUtil.create("div","leaflet-control-layers-separator",this._form),this._overlaysList=L.DomUtil.create("div","leaflet-control-layers-overlays",this._form),this._container.appendChild(this._form)},_addLayer:function(t,i,e){var n=L.Util.stamp(t);this._layers[n]={layer:t,name:i,overlay:e}},_update:function(){var t,i,e,n;if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="",t=!1,i=!1;for(e in this._layers)this._layers.hasOwnProperty(e)&&(n=this._layers[e],this._addItem(n),i=i||n.overlay,t=t||!n.overlay);this._separator.style.display=i&&t?"":"none"}},_addItem:function(t){var i,e,n=document.createElement("label"),o=document.createElement("input");t.overlay||(o.name="leaflet-base-layers"),o.type=t.overlay?"checkbox":"radio",o.checked=this._map.hasLayer(t.layer),o.layerId=L.Util.stamp(t.layer),L.DomEvent.addListener(o,"click",this._onInputClick,this),i=document.createTextNode(" "+t.name),n.appendChild(o),n.appendChild(i),e=t.overlay?this._overlaysList:this._baseLayersList,e.appendChild(n)},_onInputClick:function(){var t,i,e,n=this._form.getElementsByTagName("input"),o=n.length;for(t=0;o>t;t++)i=n[t],e=this._layers[i.layerId],i.checked?this._map.addLayer(e.layer,!e.overlay):this._map.removeLayer(e.layer)},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),L.Transition=L.Class.extend({includes:L.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:L.DomUtil.setPosition},implemented:function(){return L.Transition.NATIVE||L.Transition.TIMER}},options:{easing:"ease",duration:.5},_setProperty:function(t,i){var e=L.Transition.CUSTOM_PROPS_SETTERS;t in e?e[t](this._el,i):this._el.style[t]=i}}),L.Transition=L.Transition.extend({statics:function(){var t=L.DomUtil.TRANSITION,i="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend";return{NATIVE:!!t,TRANSITION:t,PROPERTY:t+"Property",DURATION:t+"Duration",EASING:t+"TimingFunction",END:i,CUSTOM_PROPS_PROPERTIES:{position:L.Browser.webkit?L.DomUtil.TRANSFORM:"top, left"}}}(),options:{fakeStepInterval:100},initialize:function(t,i){this._el=t,L.Util.setOptions(this,i),L.DomEvent.addListener(t,L.Transition.END,this._onTransitionEnd,this),this._onFakeStep=L.Util.bind(this._onFakeStep,this)},run:function(t){var i,e=[],n=L.Transition.CUSTOM_PROPS_PROPERTIES;for(i in t)t.hasOwnProperty(i)&&(i=n[i]?n[i]:i,i=this._dasherize(i),e.push(i));this._el.style[L.Transition.DURATION]=this.options.duration+"s",this._el.style[L.Transition.EASING]=this.options.easing,this._el.style[L.Transition.PROPERTY]=e.join(", ");for(i in t)t.hasOwnProperty(i)&&this._setProperty(i,t[i]);this._inProgress=!0,this.fire("start"),L.Transition.NATIVE?(clearInterval(this._timer),this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval)):this._onTransitionEnd()},_dasherize:function(){function t(t){return"-"+t.toLowerCase()}var i=/([A-Z])/g;return function(e){return e.replace(i,t)}}(),_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(){this._inProgress&&(this._inProgress=!1,clearInterval(this._timer),this._el.style[L.Transition.PROPERTY]="none",this.fire("step"),this.fire("end"))}}),L.Transition=L.Transition.NATIVE?L.Transition:L.Transition.extend({statics:{getTime:Date.now||function(){return+new Date},TIMER:!0,EASINGS:{ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},CUSTOM_PROPS_GETTERS:{position:L.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(t,i){this._el=t,L.Util.extend(this.options,i);var e=L.Transition.EASINGS[this.options.easing]||L.Transition.EASINGS.ease;this._p1=new L.Point(0,0),this._p2=new L.Point(e[0],e[1]),this._p3=new L.Point(e[2],e[3]),this._p4=new L.Point(1,1),this._step=L.Util.bind(this._step,this),this._interval=Math.round(1e3/this.options.fps)},run:function(t){var i,e,n,o,s;this._props={},i=L.Transition.CUSTOM_PROPS_GETTERS,e=L.Transition.UNIT_RE,this.fire("start");for(n in t)t.hasOwnProperty(n)&&(o={},n in i?o.from=i[n](this._el):(s=this._el.style[n].match(e),o.from=parseFloat(s[0]),o.unit=s[1]),o.to=t[n],this._props[n]=o);clearInterval(this._timer),this._timer=setInterval(this._step,this._interval),this._startTime=L.Transition.getTime()},_step:function(){var t=L.Transition.getTime(),i=t-this._startTime,e=1e3*this.options.duration;e>i?this._runFrame(this._cubicBezier(i/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var i,e,n,o=L.Transition.CUSTOM_PROPS_SETTERS;for(i in this._props)this._props.hasOwnProperty(i)&&(e=this._props[i],i in o?(n=e.to.subtract(e.from).multiplyBy(t).add(e.from),o[i](this._el,n)):this._el.style[i]=(e.to-e.from)*t+e.from+e.unit);this.fire("step")},_complete:function(){clearInterval(this._timer),this.fire("end")},_cubicBezier:function(t){var i=Math.pow(1-t,3),e=3*Math.pow(1-t,2)*t,n=3*(1-t)*Math.pow(t,2),o=Math.pow(t,3),s=this._p1.multiplyBy(i),a=this._p2.multiplyBy(e),r=this._p3.multiplyBy(n),h=this._p4.multiplyBy(o);return s.add(a).add(r).add(h).y}}),L.Map.include(L.Transition&&L.Transition.implemented()?{setView:function(t,i,e){var n,o,s;return i=this._limitZoom(i),n=this._zoom!==i,this._loaded&&!e&&this._layers&&(o=this._getNewTopLeftPoint(t).subtract(this._getTopLeftPoint()),t=new L.LatLng(t.lat,t.lng),s=n?!!this._zoomToIfCenterInView&&this._zoomToIfCenterInView(t,i,o):this._panByIfClose(o))?this:(this._resetView(t,i),this)},panBy:function(t){return t.x||t.y?(this._panTransition||(this._panTransition=new L.Transition(this._mapPane,{duration:.3}),this._panTransition.on("step",this._onPanTransitionStep,this),this._panTransition.on("end",this._onPanTransitionEnd,this)),this.fire("movestart"),this._panTransition.run({position:L.DomUtil.getPosition(this._mapPane).subtract(t)}),this):this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){this.fire("moveend")},_panByIfClose:function(t){return this._offsetIsWithinView(t)?(this.panBy(t),!0):!1},_offsetIsWithinView:function(t,i){var e=i||1,n=this.getSize();return Math.abs(t.x)<=n.x*e&&Math.abs(t.y)<=n.y*e}}:{}),L.Map.include(L.DomUtil.TRANSITION?{_zoomToIfCenterInView:function(t,i,e){var n,o,s,a,r;return this._animatingZoom?!0:this.options.zoomAnimation?(n=i-this._zoom,o=Math.pow(2,n),s=e.divideBy(1-1/o),this._offsetIsWithinView(s,1)?(this._mapPane.className+=" leaflet-zoom-anim",this.fire("movestart").fire("zoomstart"),a=this.containerPointToLayerPoint(this.getSize().divideBy(2)),r=a.add(s),this._prepareTileBg(),this._runAnimation(t,i,o,r),!0):!1):!1},_runAnimation:function(t,i,e,n){var o,s,a;this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,o=L.DomUtil.TRANSFORM,clearTimeout(this._clearTileBgTimer),(L.Browser.gecko||window.opera)&&(this._tileBg.style[o]+=" translate(0,0)"),L.Browser.android?(this._tileBg.style[o+"Origin"]=n.x+"px "+n.y+"px",s="scale("+e+")"):s=L.DomUtil.getScaleString(e,n),L.Util.falseFn(this._tileBg.offsetWidth),a={},a[o]=this._tileBg.style[o]+" "+s,this._tileBg.transition.run(a)},_prepareTileBg:function(){this._tileBg||(this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),this._tileBg.style.zIndex=1);var t=this._tilePane,i=this._tileBg;i.style[L.DomUtil.TRANSFORM]="",i.style.visibility="hidden",i.empty=!0,t.empty=!1,this._tilePane=this._panes.tilePane=i,this._tileBg=t,this._tileBg.transition||(this._tileBg.transition=new L.Transition(this._tileBg,{duration:.3,easing:"cubic-bezier(0.25,0.1,0.25,0.75)"}),this._tileBg.transition.on("end",this._onZoomTransitionEnd,this)),this._stopLoadingBgTiles()},_stopLoadingBgTiles:function(){var t,i,e=[].slice.call(this._tileBg.getElementsByTagName("img"));for(t=0,i=e.length;i>t;t++)e[t].complete||(e[t].onload=L.Util.falseFn,e[t].onerror=L.Util.falseFn,e[t].src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",e[t].parentNode.removeChild(e[t]),e[t]=null)},_onZoomTransitionEnd:function(){this._restoreTileFront(),L.Util.falseFn(this._tileBg.offsetWidth),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),this._mapPane.className=this._mapPane.className.replace(" leaflet-zoom-anim",""),this._animatingZoom=!1},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){this._animatingZoom||this.touchZoom._zooming||(this._tileBg.innerHTML="")}}:{}),L.Map.include({locate:function(t){if(this._locationOptions=t=L.Util.extend({watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},t),!navigator.geolocation)return this.fire("locationerror",{code:0,message:"Geolocation not supported."});var i=L.Util.bind(this._handleGeolocationResponse,this),e=L.Util.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,e,t):navigator.geolocation.getCurrentPosition(i,e,t),this},stopLocate:function(){navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId)},locateAndSetView:function(t,i){return i=L.Util.extend({maxZoom:t||1/0,setView:!0},i),this.locate(i)},_handleGeolocationError:function(t){var i=t.code,e=1===i?"permission denied":2===i?"position unavailable":"timeout";this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+e+"."})},_handleGeolocationResponse:function(t){var i,e=180*t.coords.accuracy/4e7,n=2*e,o=t.coords.latitude,s=t.coords.longitude,a=new L.LatLng(o,s),r=new L.LatLng(o-e,s-n),h=new L.LatLng(o+e,s+n),l=new L.LatLngBounds(r,h);this._locationOptions.setView&&(i=Math.min(this.getBoundsZoom(l),this._locationOptions.maxZoom),this.setView(a,i)),this.fire("locationfound",{latlng:a,bounds:l,accuracy:t.coords.accuracy})}});