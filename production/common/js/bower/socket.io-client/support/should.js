/**
   * Inspects an object.
   *
   * @see taken from node.js `util` module (copyright Joyent, MIT license)
   * @api private
   */

/**
   * Asserts deep equality
   *
   * @see taken from node.js `assert` module (copyright Joyent, MIT license)
   * @api private
   */

!function(should){function Assertion(t){var e,o,r;if(void 0!==t)for(this.obj=t,this.flags={},e=keys(flags),o=0,r=e.length;r>o;o++)this[e[o]]=new FlaggedAssertion(this,e[o])}function FlaggedAssertion(t,e){var o,r,n;this.parent=t,this.obj=t.obj,this.flag=e,this.flags={},this.flags[e]=!0;for(o in t.flags)t.flags.hasOwnProperty(o)&&(this.flags[o]=!0);for(r=flags[e],o=0,n=r.length;n>o;o++)this[r[o]]=new FlaggedAssertion(this,r[o])}function every(t,e,o){var r,n,i=o||window;for(r=0,n=t.length;n>r;++r)if(!e.call(i,t[r],r,t))return!1;return!0}function indexOf(t,e,o){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,o);for(var r=t.length,o=0>o?0>o+r?0:o+r:o||0;r>o&&t[o]!==e;o++);return o>=r?-1:o}function i(t,e,o){function r(t){return t}function n(t,o){var s,a,u,p,f,c,h,l,b,g,d;if(t&&"function"==typeof t.inspect&&t!==exports&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(o);switch(typeof t){case"undefined":return r("undefined","undefined");case"string":return s="'"+json.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",r(s,"string");case"number":return r(""+t,"number");case"boolean":return r(""+t,"boolean")}return null===t?r("null","null"):(a=keys(t),u=e?Object.getOwnPropertyNames(t):a,"function"==typeof t&&0===u.length?isRegExp(t)?r(""+t,"regexp"):(p=t.name?": "+t.name:"",r("[Function"+p+"]","special")):isDate(t)&&0===u.length?r(t.toUTCString(),"date"):(isArray(t)?(c="Array",h=["[","]"]):(c="Object",h=["{","}"]),"function"==typeof t?(l=t.name?": "+t.name:"",f=isRegExp(t)?" "+t:" [Function"+l+"]"):f="",isDate(t)&&(f=" "+t.toUTCString()),0===u.length?h[0]+f+h[1]:0>o?isRegExp(t)?r(""+t,"regexp"):r("[Object]","special"):(i.push(t),b=map(u,function(e){var s,u;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?u=t.__lookupSetter__(e)?r("[Getter/Setter]","special"):r("[Getter]","special"):t.__lookupSetter__(e)&&(u=r("[Setter]","special"))),indexOf(a,e)<0&&(s="["+e+"]"),u||(indexOf(i,t[e])<0?(u=null===o?n(t[e]):n(t[e],o-1),u.indexOf("\n")>-1&&(u=isArray(t)?map(u.split("\n"),function(t){return"  "+t}).join("\n").substr(2):"\n"+map(u.split("\n"),function(t){return"   "+t}).join("\n"))):u=r("[Circular]","special")),void 0===s){if("Array"===c&&e.match(/^\d+$/))return u;s=json.stringify(""+e),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=r(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r(s,"string"))}return s+": "+u}),i.pop(),g=0,d=reduce(b,function(t,e){return g++,indexOf(e,"\n")>=0&&g++,t+e.length+1},0),b=d>50?h[0]+(""===f?"":f+"\n ")+" "+b.join(",\n  ")+" "+h[1]:h[0]+f+" "+b.join(", ")+" "+h[1])))}var i=[];return n(t,void 0===o?2:o)}function isArray(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)}function isRegExp(t){var e=""+t;return t instanceof RegExp||"function"==typeof t&&"RegExp"===t.constructor.name&&t.compile&&t.test&&t.exec&&e.match(/^\/.*\/[gim]{0,3}$/)}function isDate(t){return t instanceof Date?!0:!1}function keys(t){var e,o;if(Object.keys)return Object.keys(t);e=[];for(o in t)t.hasOwnProperty(o)&&e.push(o);return e}function map(t,e,o){var r,n,i;if(Array.prototype.map)return Array.prototype.map.call(t,e,o);for(r=Array(t.length),n=0,i=t.length;i>n;n++)n in t&&(r[n]=e.call(o,t[n],n,t));return r}function reduce(t,e){var o,r,n;if(Array.prototype.reduce)return Array.prototype.reduce.apply(t,Array.prototype.slice.call(arguments,1));if(o=+this.length,"function"!=typeof e)throw new TypeError;if(0===o&&1===arguments.length)throw new TypeError;if(r=0,arguments.length>=2)n=arguments[1];else for(;;){if(r in this){n=this[r++];break}if(++r>=o)throw new TypeError}for(;o>r;r++)r in this&&(n=e.call(null,n,this[r],r,this));return n}function isUndefinedOrNull(t){return null===t||void 0===t}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e){if(isUndefinedOrNull(t)||isUndefinedOrNull(e))return!1;if(t.prototype!==e.prototype)return!1;if(isArguments(t))return isArguments(e)?(t=pSlice.call(t),e=pSlice.call(e),should.eql(t,e)):!1;try{var o,r,n=keys(t),i=keys(e)}catch(s){return!1}if(n.length!=i.length)return!1;for(n.sort(),i.sort(),r=n.length-1;r>=0;r--)if(n[r]!=i[r])return!1;for(r=n.length-1;r>=0;r--)if(o=n[r],!should.eql(t[o],e[o]))return!1;return!0}var flags,json;"undefined"!=typeof exports&&(module.exports=exports=should=null),should.Assertion=Assertion,flags={not:["be","have","include"],an:["instance"],and:["be","have","include","an"],be:["an"],have:["an","own"],include:["an"],not:["include","have","be"],own:[],instance:[]},"object"==typeof process?Object.defineProperty(Object.prototype,"should",{get:function(){var t=this.valueOf(),e=function(){return new Assertion(t)};return"undefined"!=typeof exports&&(e.__proto__=exports,e.exports=exports),e},enumerable:!1}):Object.prototype.should=function(){return new Assertion(this.valueOf())},Assertion.prototype.assert=function(t,e,o){var e=this.flags.not?o:e,r=this.flags.not?!t:t;if(!r)throw Error(e);this.flags={}},Assertion.prototype.be_true=function(){return this.assert(this.obj===!0,"expected "+i(this.obj)+" to be true","expected "+i(this.obj)+" to not be true"),this},Assertion.prototype.be_false=function(){return this.assert(this.obj===!1,"expected "+i(this.obj)+" to be false","expected "+i(this.obj)+" to not be false"),this},Assertion.prototype.ok=function(){this.assert(1==this.obj,"expected "+i(this.obj)+" to be true","expected "+i(this.obj)+" to not be true")},Assertion.prototype.empty=function(){return this.obj.should().have.property("length"),this.assert(0===this.obj.length,"expected "+i(this.obj)+" to be empty","expected "+i(this.obj)+" to not be empty"),this},Assertion.prototype.arguments=function(){return this.assert("[object Arguments]"==Object.prototype.toString.call(this.obj),"expected "+i(this.obj)+" to be arguments","expected "+i(this.obj)+" to not be arguments"),this},Assertion.prototype.equal=function(t){return this.assert(t===this.obj,"expected "+i(this.obj)+" to equal "+i(t),"expected "+i(this.obj)+" to not equal "+i(t)),this},Assertion.prototype.eql=function(t){return this.assert(should.eql(t,this.obj),"expected "+i(this.obj)+" to sort of equal "+i(t),"expected "+i(this.obj)+" to sort of not equal "+i(t)),this},Assertion.prototype.within=function(t,e){var o=t+".."+e;return this.assert(this.obj>=t&&this.obj<=e,"expected "+i(this.obj)+" to be within "+o,"expected "+i(this.obj)+" to not be within "+o),this},Assertion.prototype.a=function(t){return this.assert(t==typeof this.obj,"expected "+i(this.obj)+" to be a "+t,"expected "+i(this.obj)+" not to be a "+t),this},Assertion.prototype.of=function(t){var e=t.name;return this.assert(this.obj instanceof t,"expected "+i(this.obj)+" to be an instance of "+e,"expected "+i(this.obj)+" not to be an instance of "+e),this},Assertion.prototype.greaterThan=Assertion.prototype.above=function(t){return this.assert(this.obj>t,"expected "+i(this.obj)+" to be above "+t,"expected "+i(this.obj)+" to be below "+t),this},Assertion.prototype.lessThan=Assertion.prototype.below=function(t){return this.assert(this.obj<t,"expected "+i(this.obj)+" to be below "+t,"expected "+i(this.obj)+" to be above "+t),this},Assertion.prototype.match=function(t){return this.assert(t.exec(this.obj),"expected "+i(this.obj)+" to match "+t,"expected "+i(this.obj)+" not to match "+t),this},Assertion.prototype.length=function(t){this.obj.should().have.property("length");var e=this.obj.length;return this.assert(t==e,"expected "+i(this.obj)+" to have a length of "+t+" but got "+e,"expected "+i(this.obj)+" to not have a length of "+e),this},Assertion.prototype.string=function(t){return this.obj.should().be.a("string"),this.assert(~this.obj.indexOf(t),"expected "+i(this.obj)+" to include "+i(t),"expected "+i(this.obj)+" to not include "+i(t)),this},Assertion.prototype.object=function(t){var e,o;this.obj.should().be.a("object"),e=!0;for(o in t)if(t.hasOwnProperty(o)&&!should.eql(t[o],this.obj[o])){e=!1;break}return this.assert(e,"expected "+i(this.obj)+" to include "+i(t),"expected "+i(this.obj)+" to not include "+i(t)),this},Assertion.prototype.property=function(t,e){if(this.flags.own)return this.assert(this.obj.hasOwnProperty(t),"expected "+i(this.obj)+" to have own property "+i(t),"expected "+i(this.obj)+" to not have own property "+i(t)),this;if(this.flags.not&&void 0!==e){if(void 0===this.obj[t])throw Error(i(this.obj)+" has no property "+i(t))}else this.assert(void 0!==this.obj[t],"expected "+i(this.obj)+" to have a property "+i(t),"expected "+i(this.obj)+" to not have a property "+i(t));return void 0!==e&&this.assert(e===this.obj[t],"expected "+i(this.obj)+" to have a property "+i(t)+" of "+i(e)+", but got "+i(this.obj[t]),"expected "+i(this.obj)+" to not have a property "+i(t)+" of "+i(e)),this.obj=this.obj[t],this},Assertion.prototype.contain=function(t){return this.obj.should().be.an.instance.of(Array),this.assert(~indexOf(this.obj,t),"expected "+i(this.obj)+" to contain "+i(t),"expected "+i(this.obj)+" to not contain "+i(t)),this},Assertion.prototype.key=Assertion.prototype.keys=function(t){var e,o,r,n,s=!0;if(t=t instanceof Array?t:Array.prototype.slice.call(arguments),!t.length)throw Error("keys required");return o=t(this.obj),r=t.length,s=every(t,function(t){return~indexOf(o,t)}),this.flags.not||this.flags.include||(s=s&&t.length==o.length),r>1?(t=map(t,function(t){return i(t)}),n=t.pop(),e=t.join(", ")+", and "+n):e=i(t[0]),e=(r>1?"keys ":"key ")+e,e=(this.flag.include?"include ":"have ")+e,this.assert(s,"expected "+i(this.obj)+" to "+e,"expected "+i(this.obj)+" to not "+e),this},FlaggedAssertion.prototype=new Assertion,should.equal=function(t,e){t!==e&&should.fail("expected "+i(t)+" to equal "+i(e))},should.fail=function(t){throw Error(t)},should.eql=function(t,e){if(t===e)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(t)&&Buffer.isBuffer(e)){if(t.length!=e.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}return t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t==e:objEquiv(t,e)},json=function(){"use strict";function f(t){return 10>t?"0"+t:t}function date(t){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var o,r,n,i,s,a=gap,u=e[t];switch(u instanceof Date&&(u=date(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?u+"":"null";case"boolean":case"null":return u+"";case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,o=0;i>o;o+=1)s[o]=str(o,u)||"null";return n=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,n}if(rep&&"object"==typeof rep)for(i=rep.length,o=0;i>o;o+=1)"string"==typeof rep[o]&&(r=rep[o],n=str(r,u),n&&s.push(quote(r)+(gap?": ":":")+n));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(n=str(r,u),n&&s.push(quote(r)+(gap?": ":":")+n));return n=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,n}}var JSON,cx,escapable,gap,indent,meta,rep;return"object"==typeof JSON&&JSON.parse&&JSON.stringify?{parse:nativeJSON.parse,stringify:nativeJSON.stringify}:(JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,o){var r;if(gap="",indent="","number"==typeof o)for(r=0;o>r;r+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){function walk(t,e){var o,r,n=t[e];if(n&&"object"==typeof n)for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r=walk(n,o),void 0!==r?n[o]=r:delete n[o]);return reviver.call(t,e,n)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},JSON)}()}("undefined"!=typeof exports?exports:should={});