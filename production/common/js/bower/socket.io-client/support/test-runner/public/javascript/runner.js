function load(e,t){module={},$script("/test/"+e,function(){t(module.exports)})}function run(){function e(){$("body").append("<p>All suites completed</p>")}var t=Array.prototype.slice.call(arguments),s=0;t.length?(testsList=$('<ul class="test-list">'),$("body").append(testsList),suite(t[s],function n(){t[++s]?suite(t[s],n):e()})):e()}function keys(e){var t,s;if(Object.keys)return Object.keys(e);t=[];for(s in e)e.hasOwnProperty(s)&&t.push(s);return t}function suite(e,t){var s,n={},r={};currentSuite=e,s=$('<li class="loading">').append($('<span class="name">').append($("<a>").attr("href","/test/"+e).text(e))).appendTo(testsList),load(e,function(e){function a(){var e,a,u,c,l=!keys(r).length,d=Math.round((new Date-o)/1e3);for(s.removeClass("loading"),s.append('<span class="bullet">&bull;</span>'),l?s.append(" all passed"):(s.append(" failing test"),s.addClass("test-failure")),s.append($('<div class="details">').html("Passed: "+keys(n).length+" &mdash; Failed: <em>"+keys(r).length+"</em> &mdash; Elapsed: <em>"+d+"</em> seconds &mdash; ").append($("<a>Show details</a>").attr("href","#").click(function(){return s.toggleClass("cases"),$(this).text(s.hasClass("cases")?"Hide details":"Show details"),!1}))),e=$('<ul class="cases">').appendTo(s),a=0,u=i.length;u>a;a++)c=$("<li>").text(i[a]).addClass(r[i[a]]?"failed":"").appendTo(e),r[i[a]]&&(window.console&&console.log&&console.log(r[i[a]]),c.append($('<span class="error">').text(r[i[a]]+"")));t({status:l,passed:n,failed:r})}var o,i,u;if(e){if(o=new Date,i=keys(e),u=0,!i.length)return a();currentCase=i[u],test(e[i[u]],function c(t){t?r[i[u]]=t:n[i[u]]=!0,i[++u]?(currentCase=i[u],test(e[i[u]],c)):a()})}})}function test(e,t){function s(e){s.run||(n&&clearTimeout(n),s.run=!0,window.onerror=null,t(e))}var n;window.onerror=function(e){s(e)};try{e.length>0?(n=setTimeout(function(){s(Error("Timeout"))},2e3),e(s)):(e(),s())}catch(r){s(r)}}function create(e){if(!testsPorts[currentSuite])throw Error('No socket server defined for suite "'+currentSuite+'"');if(!testsPorts[currentSuite][currentCase])throw Error('No socket server defined for suite "'+currentSuite+'" and case "'+currentCase+'"');return io.connect(uri()+(e||""))}function uri(){return document.location.protocol+"//"+document.location.hostname+":"+testsPorts[currentSuite][currentCase]}var currentSuite,currentCase,testsList;