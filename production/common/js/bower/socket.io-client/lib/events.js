/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

!function(e,t){function s(){}e.EventEmitter=s,s.prototype.on=function(e,s){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(s):this.$events[e]=[this.$events[e],s]:this.$events[e]=s,this},s.prototype.addListener=s.prototype.on,s.prototype.once=function(e,t){function s(){i.removeListener(e,s),t.apply(this,arguments)}var i=this;return s.listener=t,this.on(e,s),this},s.prototype.removeListener=function(e,s){var i,n,r,o;if(this.$events&&this.$events[e])if(i=this.$events[e],t.util.isArray(i)){for(n=-1,r=0,o=i.length;o>r;r++)if(i[r]===s||i[r].listener&&i[r].listener===s){n=r;break}if(0>n)return this;i.splice(n,1),i.length||delete this.$events[e]}else(i===s||i.listener&&i.listener===s)&&delete this.$events[e];return this},s.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},s.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},s.prototype.emit=function(e){var s,i,n,r,o;if(!this.$events)return!1;if(s=this.$events[e],!s)return!1;if(i=Array.prototype.slice.call(arguments,1),"function"==typeof s)s.apply(this,i);else{if(!t.util.isArray(s))return!1;for(n=s.slice(),r=0,o=n.length;o>r;r++)n[r].apply(this,i)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);