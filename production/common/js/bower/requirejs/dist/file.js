/**
 * @license Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

function mkDir(e){fs.existsSync(e)||fs.mkdirSync(e,511)}function mkFullDir(e){var i=e.split("/"),t="",n=!0;i.forEach(function(e){t+=e+"/",n=!1,e&&mkDir(t)})}var fs=null,path=null,file,prop;file={backSlashRegExp:/\\/g,getLineSeparator:function(){return"/"},exists:function(e){return fs.existsSync(e)},parent:function(e){var i=e.split("/");return i.pop(),i.join("/")},absPath:function(e){return path.normalize(fs.realpathSync(e).replace(/\\/g,"/"))},normalize:function(e){return path.normalize(e)},isFile:function(e){return fs.statSync(e).isFile()},isDirectory:function(e){return fs.statSync(e).isDirectory()},getFilteredFileList:function(e,i,t){var n,r,s,f,l,c,a,u,o,p,y=[];if(n=e,r=i.include||i,s=i.exclude||null,fs.existsSync(n))for(f=fs.readdirSync(n),l=0;l<f.length;l++)p=f[l],a=path.join(n,p),c=fs.statSync(a),c.isFile()?(t&&-1===a.indexOf("/")&&(a=a.replace(/\\/g,"/")),u=!0,r&&(u=a.match(r)),u&&s&&(u=!a.match(s)),u&&!p.match(/^\./)&&y.push(a)):c.isDirectory()&&!p.match(/^\./)&&(o=this.getFilteredFileList(a,i,t),y.push.apply(y,o));return y},copyDir:function(e,i,t,n){t=t||/\w/;var r,s,f,l=file.getFilteredFileList(e,t,!0),c=[];for(r=0;r<l.length;r++)s=l[r],f=s.replace(e,i),file.copyFile(s,f,n)&&c.push(f);return c.length?c:null},copyFile:function(e,i,t){var n;return t&&fs.existsSync(i)&&fs.statSync(i).mtime.getTime()>=fs.statSync(e).mtime.getTime()?!1:(n=path.dirname(i),fs.existsSync(n)||mkFullDir(n),fs.writeFileSync(i,fs.readFileSync(e,"binary"),"binary"),!0)},readFile:function(e,i){return"utf-8"===i&&(i="utf8"),i||(i="utf8"),fs.readFileSync(e,i)},saveUtf8File:function(e,i){file.saveFile(e,i,"utf8")},saveFile:function(e,i,t){var n;"utf-8"===t&&(t="utf8"),t||(t="utf8"),n=path.dirname(e),fs.existsSync(n)||mkFullDir(n),fs.writeFileSync(e,i,t)},deleteFile:function(e){var i,t,n;if(fs.existsSync(e))if(n=fs.statSync(e),n.isDirectory()){for(i=fs.readdirSync(e),t=0;t<i.length;t++)this.deleteFile(path.join(e,i[t]));fs.rmdirSync(e)}else fs.unlinkSync(e)}};for(prop in file)file.hasOwnProperty(prop)&&(exports[prop]=file[prop]);