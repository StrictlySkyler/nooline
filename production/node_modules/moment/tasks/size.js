function getVersion(n,e){var t="",o=https.request({host:"raw.github.com",port:443,path:"/timrwood/moment/"+n},function(n){n.setEncoding("utf8"),n.on("data",function(n){t+=n}),n.on("end",function(){zlib.gzip(t,function(n,o){e(t.length,o.length)})})});o.on("error",function(n){console.log("problem with request: "+n.message)}),o.end()}function printDiffs(n,e,t,o){var i=t-n,s=o-e;console.log("Filesize difference from current branch to "+stable),console.log(stable+"   "+n+" / "+e),console.log("curr    "+t+" / "+o),console.log("diff    "+(i>0?"+":"")+i),console.log("gzip    "+(s>0?"+":"")+s)}var done,https=require("https"),zlib=null,path=null,fs=null,stable="1.7.1";module.exports=function(n){n.registerTask("size","Check the codebase filesize against the latest stable version.",function(){done=this.async(),fs.readFile(path.normalize(__dirname+"/../min/moment.min.js"),"utf8",function(n,e){if(n)throw n;zlib.gzip(e,function(n,t){getVersion(stable+"/min/moment.min.js",function(n,o){printDiffs(n,o,e.length,t.length),done()})})})})};