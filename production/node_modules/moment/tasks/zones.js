var fs=null;module.exports=function(n){function t(n){fs.readFile(i,"ascii",function(t,r){null!=t&&n(t),n(null,r.split(/\r\n|\r|\n/).filter(function(n){return n&&!/^#/.test(n)}).map(function(n){return n.split("	")[2]}))})}function r(t,r){n.log.ok("Running tests in zone "+t),n.util.spawn({cmd:"grunt",opts:{env:{PATH:process.env.PATH,TZ:t}},args:["--no-color","nodeunit"]},function(t,i,o){0!==o&&n.log.error(i.stdout.split(/\r\n|\r|\n/).filter(function(n){return/^(>>|Warning:|$)/.test(n)}).map(function(n){return">> "===n.substr(0,3)?n.substr(3):n}).join("\n")),r()})}var i="/usr/share/zoneinfo/zone.tab";n.registerTask("zones","Run the unit tests in different timezones.",function(){var n=this.async();t(function(t,i){if(null!=t)throw t;!function o(t){return t>=i.length?n():(r(i[t],function(n){if(null!=n)throw n;o(t+1)}),void 0)}(0)})})};