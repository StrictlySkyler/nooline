/**
 * QUnit v1.2.0 - A JavaScript Unit Testing Framework
 *
 * http://docs.jquery.com/QUnit
 *
 * Copyright (c) 2011 John Resig, Jörn Zaefferer
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * or GPL (GPL-LICENSE.txt) licenses.
 */

/**
 * jsDump Copyright (c) 2008 Ariel Flesler - aflesler(at)gmail(dot)com |
 * http://flesler.blogspot.com Licensed under BSD
 * (http://www.opensource.org/licenses/bsd-license.php) Date: 5/15/2008
 *
 * @projectDescription Advanced and extensible data dumping for Javascript.
 * @version 1.0.0
 * @author Ariel Flesler
 * @link {http://flesler.blogspot.com/2008/05/jsdump-pretty-dump-of-any-javascript.html}
 */

/*
 * Javascript Diff Algorithm
 *  By John Resig (http://ejohn.org/)
 *  Modified by Chu Alan "sprite"
 *
 * Released under the MIT license.
 *
 * More Info:
 *  http://ejohn.org/projects/javascript-diff-algorithm/
 *
 * Usage: QUnit.diff(expected, actual)
 *
 * QUnit.diff("the quick brown fox jumped over", "the quick fox jumps over") == "the  quick <del>brown </del> fox <del>jumped </del><ins>jumps </ins> over"
 */

!function(e){function t(){y.autorun=!0,y.currentModule&&h("moduleDone",b,{name:y.currentModule,failed:y.moduleStats.bad,passed:y.moduleStats.all-y.moduleStats.bad,total:y.moduleStats.all});var e=f("qunit-banner"),t=f("qunit-tests"),n=+new Date-y.started,o=y.stats.all-y.stats.bad,r=["Tests completed in ",n," milliseconds.<br/>",'<span class="passed">',o,'</span> tests of <span class="total">',y.stats.all,'</span> passed, <span class="failed">',y.stats.bad,"</span> failed."].join("");e&&(e.className=y.stats.bad?"qunit-fail":"qunit-pass"),t&&(f("qunit-testresult").innerHTML=r),y.altertitle&&"undefined"!=typeof document&&document.title&&(document.title=[y.stats.bad?"✖":"✔",document.title.replace(/^[\u2714\u2716] /i,"")].join(" ")),h("done",b,{failed:y.stats.bad,passed:o,total:y.stats.all,runtime:n})}function n(e){var t,n=y.filter,o=!1;return n?(t="!"===n.charAt(0),t&&(n=n.slice(1)),-1!==e.indexOf(n)?!t:(t&&(o=!0),o)):!0}function o(){try{throw Error()}catch(e){if(e.stacktrace)return e.stacktrace.split("\n")[6];if(e.stack)return e.stack.split("\n")[4];e.sourceURL}}function r(e){return e?(e+="",e.replace(/[\&<>]/g,function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return e}})):""}function s(e,t){y.queue.push(e),y.autorun&&!y.blocking&&i(t)}function i(n){var o=(new Date).getTime();for(y.depth=y.depth?y.depth+1:1;y.queue.length&&!y.blocking;){if(!(!w.setTimeout||y.updateRate<=0||(new Date).getTime()-o<y.updateRate)){e.setTimeout(function(){i(n)},13);break}y.queue.shift()()}y.depth--,!n||y.blocking||y.queue.length||0!==y.depth||t()}function a(){if(y.pollution=[],y.noglobals)for(var t in e)x.call(e,t)&&y.pollution.push(t)}function u(){var e,t,n=y.pollution;a(),e=l(y.pollution,n),e.length>0&&ok(!1,"Introduced global variable(s): "+e.join(", ")),t=l(n,y.pollution),t.length>0&&ok(!1,"Deleted global variable(s): "+t.join(", "))}function l(e,t){var n,o,r=e.slice();for(n=0;n<r.length;n++)for(o=0;o<t.length;o++)if(r[n]===t[o]){r.splice(n,1),n--;break}return r}function c(t,n,o){"undefined"!=typeof console&&console.error&&console.warn?(console.error(t),console.error(n),console.warn(""+o)):e.opera&&opera.postError&&opera.postError(t,n,o.toString)}function d(t,n){for(var o in n)void 0===n[o]?delete t[o]:("constructor"!==o||t!==e)&&(t[o]=n[o]);return t}function p(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):n()}function f(e){return!("undefined"==typeof document||!document||!document.getElementById)&&document.getElementById(e)}function m(e){return function(t){y[e].push(t)}}function h(e,t,n){var o,r;if(b.hasOwnProperty(e))b[e].call(t,n);else for(o=y[e],r=0;r<o.length;r++)o[r].call(t,n)}function g(e){var t,n,o="";for(n=0;e[n];n++)t=e[n],3===t.nodeType||4===t.nodeType?o+=t.nodeValue:8!==t.nodeType&&(o+=g(t.childNodes));return o}function v(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,o=t.length;o>n;n++)if(t[n]===e)return n;return-1}var b,y,w={setTimeout:void 0!==e.setTimeout,sessionStorage:function(){try{return!!sessionStorage.getItem}catch(e){return!1}}()},T=0,E=Object.prototype.toString,x=Object.prototype.hasOwnProperty,j=function(e,t,n,o,r,s){this.name=e,this.testName=t,this.expected=n,this.testEnvironmentArg=o,this.async=r,this.callback=s,this.assertions=[]};j.prototype={init:function(){var e,t,n=f("qunit-tests");n&&(e=document.createElement("strong"),e.innerHTML="Running "+this.name,t=document.createElement("li"),t.appendChild(e),t.className="running",t.id=this.id="test-output"+T++,n.appendChild(t))},setup:function(){this.module!=y.previousModule&&(y.previousModule&&h("moduleDone",b,{name:y.previousModule,failed:y.moduleStats.bad,passed:y.moduleStats.all-y.moduleStats.bad,total:y.moduleStats.all}),y.previousModule=this.module,y.moduleStats={all:0,bad:0},h("moduleStart",b,{name:this.module})),y.current=this,this.testEnvironment=d({setup:function(){},teardown:function(){}},this.moduleTestEnvironment),this.testEnvironmentArg&&d(this.testEnvironment,this.testEnvironmentArg),h("testStart",b,{name:this.testName,module:this.module}),b.current_testEnvironment=this.testEnvironment;try{y.pollution||a(),this.testEnvironment.setup.call(this.testEnvironment)}catch(e){b.ok(!1,"Setup failed on "+this.testName+": "+e.message)}},run:function(){if(y.current=this,this.async&&b.stop(),y.notrycatch)return this.callback.call(this.testEnvironment),void 0;try{this.callback.call(this.testEnvironment)}catch(e){c("Test "+this.testName+" died, exception and test follows",e,this.callback),b.ok(!1,"Died on test #"+(this.assertions.length+1)+": "+e.message+" - "+b.jsDump.parse(e)),a(),y.blocking&&b.start()}},teardown:function(){y.current=this;try{this.testEnvironment.teardown.call(this.testEnvironment),u()}catch(e){b.ok(!1,"Teardown failed on "+this.testName+": "+e.message)}},finish:function(){var t,n,o,r,s,i,a,u,l;if(y.current=this,null!=this.expected&&this.expected!=this.assertions.length&&b.ok(!1,"Expected "+this.expected+" assertions, but "+this.assertions.length+" were run"),t=0,n=0,o=f("qunit-tests"),y.stats.all+=this.assertions.length,y.moduleStats.all+=this.assertions.length,o){for(r=document.createElement("ol"),s=0;s<this.assertions.length;s++)i=this.assertions[s],a=document.createElement("li"),a.className=i.result?"pass":"fail",a.innerHTML=i.message||(i.result?"okay":"failed"),r.appendChild(a),i.result?t++:(n++,y.stats.bad++,y.moduleStats.bad++);b.config.reorder&&w.sessionStorage&&(n?sessionStorage.setItem("qunit-"+this.module+"-"+this.testName,n):sessionStorage.removeItem("qunit-"+this.module+"-"+this.testName)),0==n&&(r.style.display="none"),u=document.createElement("strong"),u.innerHTML=this.name+" <b class='counts'>(<b class='failed'>"+n+"</b>, <b class='passed'>"+t+"</b>, "+this.assertions.length+")</b>",l=document.createElement("a"),l.innerHTML="Rerun",l.href=b.url({filter:g([u]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")}),p(u,"click",function(){var e=u.nextSibling.nextSibling,t=e.style.display;e.style.display="none"===t?"block":"none"}),p(u,"dblclick",function(t){var n=t&&t.target?t.target:e.event.srcElement;("span"==n.nodeName.toLowerCase()||"b"==n.nodeName.toLowerCase())&&(n=n.parentNode),e.location&&"strong"===n.nodeName.toLowerCase()&&(e.location=b.url({filter:g([n]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")}))}),a=f(this.id),a.className=n?"fail":"pass",a.removeChild(a.firstChild),a.appendChild(u),a.appendChild(l),a.appendChild(r)}else for(s=0;s<this.assertions.length;s++)this.assertions[s].result||(n++,y.stats.bad++,y.moduleStats.bad++);try{b.reset()}catch(d){c("reset() failed, following Test "+this.testName+", exception and reset fn follows",d,b.reset)}h("testDone",b,{name:this.testName,module:this.module,failed:n,passed:this.assertions.length-n,total:this.assertions.length})},queue:function(){function e(){s(function(){n.setup()}),s(function(){n.run()}),s(function(){n.teardown()}),s(function(){n.finish()})}var t,n=this;s(function(){n.init()}),t=b.config.reorder&&w.sessionStorage&&+sessionStorage.getItem("qunit-"+this.module+"-"+this.testName),t?e():s(e,!0)}},b={module:function(e,t){y.currentModule=e,y.currentModuleTestEnviroment=t},asyncTest:function(e,t,n){2===arguments.length&&(n=t,t=null),b.test(e,t,n,!0)},test:function(e,t,o,r){var s,i,a='<span class="test-name">'+e+"</span>";2===arguments.length&&(o=t,t=null),t&&"object"==typeof t&&(s=t,t=null),y.currentModule&&(a='<span class="module-name">'+y.currentModule+"</span>: "+a),n(y.currentModule+": "+e)&&(i=new j(a,e,t,s,r,o),i.module=y.currentModule,i.moduleTestEnvironment=y.currentModuleTestEnviroment,i.queue())},expect:function(e){y.current.expected=e},ok:function(e,t){e=!!e;var n={result:e,message:t};t=r(t),h("log",b,n),y.current.assertions.push({result:e,message:t})},equal:function(e,t,n){b.push(t==e,e,t,n)},notEqual:function(e,t,n){b.push(t!=e,e,t,n)},deepEqual:function(e,t,n){b.push(b.equiv(e,t),e,t,n)},notDeepEqual:function(e,t,n){b.push(!b.equiv(e,t),e,t,n)},strictEqual:function(e,t,n){b.push(t===e,e,t,n)},notStrictEqual:function(e,t,n){b.push(t!==e,e,t,n)},raises:function(e,t,n){var o,r=!1;"string"==typeof t&&(n=t,t=null);try{e()}catch(s){o=s}o&&(t?"regexp"===b.objectType(t)?r=t.test(o):o instanceof t?r=!0:t.call({},o)===!0&&(r=!0):r=!0),b.ok(r,n)},start:function(t){y.semaphore-=t||1,y.semaphore>0||(y.semaphore<0&&(y.semaphore=0),w.setTimeout?e.setTimeout(function(){y.semaphore>0||(y.timeout&&clearTimeout(y.timeout),y.blocking=!1,i(!0))},13):(y.blocking=!1,i(!0)))},stop:function(t){y.semaphore+=t||1,y.blocking=!0,y.testTimeout&&w.setTimeout&&(clearTimeout(y.timeout),y.timeout=e.setTimeout(function(){b.ok(!1,"Test timed out"),y.semaphore=1,b.start()},y.testTimeout))}},function(){function e(){}e.prototype=b,b=new e,b.constructor=e}(),b.equals=b.equal,b.same=b.deepEqual,y={queue:[],blocking:!0,hidepassed:!1,reorder:!0,altertitle:!0,urlConfig:["noglobals","notrycatch"],begin:[],done:[],log:[],testStart:[],testDone:[],moduleStart:[],moduleDone:[]},function(){var t,n,o=e.location||{search:"",protocol:"file:"},r=o.search.slice(1).split("&"),s=r.length,i={};if(r[0])for(n=0;s>n;n++)t=r[n].split("="),t[0]=decodeURIComponent(t[0]),t[1]=t[1]?decodeURIComponent(t[1]):!0,i[t[0]]=t[1];b.urlParams=i,y.filter=i.filter,b.isLocal=!("file:"!==o.protocol)}(),"undefined"==typeof exports||"undefined"==typeof require?(d(e,b),e.QUnit=b):(d(exports,b),exports.QUnit=b),d(b,{config:y,init:function(){d(y,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1e3,blocking:!1,autostart:!0,autorun:!1,filter:"",queue:[],semaphore:0});var e=f("qunit-tests"),t=f("qunit-banner"),n=f("qunit-testresult");e&&(e.innerHTML=""),t&&(t.className=""),n&&n.parentNode.removeChild(n),e&&(n=document.createElement("p"),n.id="qunit-testresult",n.className="result",e.parentNode.insertBefore(n,e),n.innerHTML="Running...<br/>&nbsp;")},reset:function(){if(e.jQuery)jQuery("#qunit-fixture").html(y.fixture);else{var t=f("qunit-fixture");t&&(t.innerHTML=y.fixture)}},triggerEvent:function(e,t,n){document.createEvent?(n=document.createEvent("MouseEvents"),n.initMouseEvent(t,!0,!0,e.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("on"+t)},is:function(e,t){return b.objectType(t)==e},objectType:function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=E.call(e).match(/^\[object\s(.*)\]$/)[1]||"";switch(t){case"Number":return isNaN(e)?"nan":"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return t.toLowerCase()}return"object"==typeof e?"object":void 0},push:function(e,t,n,s){var i,a,u={result:e,message:s,actual:t,expected:n};s=r(s)||(e?"okay":"failed"),s='<span class="test-message">'+s+"</span>",n=r(b.jsDump.parse(n)),t=r(b.jsDump.parse(t)),i=s+'<table><tr class="test-expected"><th>Expected: </th><td><pre>'+n+"</pre></td></tr>",t!=n&&(i+='<tr class="test-actual"><th>Result: </th><td><pre>'+t+"</pre></td></tr>",i+='<tr class="test-diff"><th>Diff: </th><td><pre>'+b.diff(n,t)+"</pre></td></tr>"),e||(a=o(),a&&(u.source=a,i+='<tr class="test-source"><th>Source: </th><td><pre>'+r(a)+"</pre></td></tr>")),i+="</table>",h("log",b,u),y.current.assertions.push({result:!!e,message:i})},url:function(t){t=d(d({},b.urlParams),t);var n,o="?";for(n in t)x.call(t,n)&&(o+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&");return e.location.pathname+o.slice(0,-1)},extend:d,id:f,addEvent:p}),d(b.constructor.prototype,{begin:m("begin"),done:m("done"),log:m("log"),testStart:m("testStart"),testDone:m("testDone"),moduleStart:m("moduleStart"),moduleDone:m("moduleDone")}),("undefined"==typeof document||"complete"===document.readyState)&&(y.autorun=!0),b.load=function(){var t,n,o,r,s,i,a,u,l,c,m,g;for(h("begin",b,{}),t=d({},y),b.init(),d(y,t),y.blocking=!1,n="",o=y.urlConfig.length,s=0;r=y.urlConfig[s];s++)y[r]=b.urlParams[r],n+='<label><input name="'+r+'" type="checkbox"'+(y[r]?' checked="checked"':"")+">"+r+"</label>";i=f("qunit-userAgent"),i&&(i.innerHTML=navigator.userAgent),a=f("qunit-header"),a&&(a.innerHTML='<a href="'+b.url({filter:void 0})+'"> '+a.innerHTML+"</a> "+n,p(a,"change",function(t){var n={};n[t.target.name]=t.target.checked?!0:void 0,e.location=b.url(n)})),u=f("qunit-testrunner-toolbar"),u&&(l=document.createElement("input"),l.type="checkbox",l.id="qunit-filter-pass",p(l,"click",function(){var e,t=document.getElementById("qunit-tests");l.checked?t.className=t.className+" hidepass":(e=" "+t.className.replace(/[\n\t\r]/g," ")+" ",t.className=e.replace(/ hidepass /," ")),w.sessionStorage&&(l.checked?sessionStorage.setItem("qunit-filter-passed-tests","true"):sessionStorage.removeItem("qunit-filter-passed-tests"))}),(y.hidepassed||w.sessionStorage&&sessionStorage.getItem("qunit-filter-passed-tests"))&&(l.checked=!0,c=document.getElementById("qunit-tests"),c.className=c.className+" hidepass"),u.appendChild(l),m=document.createElement("label"),m.setAttribute("for","qunit-filter-pass"),m.innerHTML="Hide passed tests",u.appendChild(m)),g=f("qunit-fixture"),g&&(y.fixture=g.innerHTML),y.autostart&&b.start()},p(e,"load",b.load),e.onerror=function(e,t,n){b.config.current?ok(!1,e+", "+t+":"+n):test("global failure",function(){ok(!1,e+", "+t+":"+n)})},b.equiv=function(){function e(e,t,n){var o=b.objectType(e);return o?"function"===b.objectType(t[o])?t[o].apply(t,n):t[o]:void 0}var t=[],n=[],o=Object.getPrototypeOf||function(e){return e.__proto__},r=function(){function e(e,t){return e instanceof t.constructor||t instanceof e.constructor?t==e:t===e}return{string:e,"boolean":e,number:e,"null":e,undefined:e,nan:function(e){return isNaN(e)},date:function(e,t){return"date"===b.objectType(e)&&t.valueOf()===e.valueOf()},regexp:function(e,t){return"regexp"===b.objectType(e)&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline},"function":function(){var e=t[t.length-1];return e!==Object&&void 0!==e},array:function(e,t){var o,r,i,a;if("array"!==b.objectType(e))return!1;if(a=t.length,a!==e.length)return!1;for(n.push(t),o=0;a>o;o++){for(i=!1,r=0;r<n.length;r++)n[r]===t[o]&&(i=!0);if(!i&&!s(t[o],e[o]))return n.pop(),!1}return n.pop(),!0},object:function(e,r){var i,a,u,l=!0,c=[],d=[];if(r.constructor!==e.constructor&&!(null===o(r)&&o(e)===Object.prototype||null===o(e)&&o(r)===Object.prototype))return!1;t.push(r.constructor),n.push(r);for(i in r){for(u=!1,a=0;a<n.length;a++)n[a]===r[i]&&(u=!0);if(c.push(i),!u&&!s(r[i],e[i])){l=!1;break}}t.pop(),n.pop();for(i in e)d.push(i);return l&&s(c.sort(),d.sort())}}}(),s=function(){var t=Array.prototype.slice.apply(arguments);return t.length<2?!0:function(t,n){return t===n?!0:null===t||null===n||void 0===t||void 0===n||b.objectType(t)!==b.objectType(n)?!1:e(t,r,[n,t])}(t[0],t[1])&&arguments.callee.apply(this,t.splice(1,t.length-1))};return s}(),b.jsDump=function(){function e(e){return'"'+(""+e).replace(/"/g,'\\"')+'"'}function t(e){return e+""}function n(e,t,n){var o=s.separator(),r=s.indent(),i=s.indent(1);return t.join&&(t=t.join(","+o+i)),t?[e,i+t,r+n].join(o):e+n}function o(e,t){var o=e.length,r=Array(o);for(this.up();o--;)r[o]=this.parse(e[o],void 0,t);return this.down(),n("[",r,"]")}var r=/^function (\w+)/,s={parse:function(e,t,n){var o,r,s;return n=n||[],o=this.parsers[t||this.typeOf(e)],t=typeof o,r=v(e,n),-1!=r?"recursion("+(r-n.length)+")":"function"==t?(n.push(e),s=o.call(this,e,n),n.pop(),s):"string"==t?o:this.parsers.error},typeOf:function(e){var t;return t=null===e?"null":void 0===e?"undefined":b.is("RegExp",e)?"regexp":b.is("Date",e)?"date":b.is("Function",e)?"function":void 0!==typeof e.setInterval&&void 0!==e.document&&void 0===e.nodeType?"window":9===e.nodeType?"document":e.nodeType?"node":"[object Array]"===E.call(e)||"number"==typeof e.length&&void 0!==e.item&&(e.length?e.item(0)===e[0]:null===e.item(0)&&void 0===e[0])?"array":typeof e},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(e){if(!this.multiline)return"";var t=this.indentChar;return this.HTML&&(t=t.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")),Array(this._depth_+(e||0)).join(t)},up:function(e){this._depth_+=e||1},down:function(e){this._depth_-=e||1},setParser:function(e,t){this.parsers[e]=t},quote:e,literal:t,join:n,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(e){var t="function",o="name"in e?e.name:(r.exec(e)||[])[1];return o&&(t+=" "+o),t+="(",t=[t,b.jsDump.parse(e,"functionArgs"),"){"].join(""),n(t,b.jsDump.parse(e,"functionCode"),"}")},array:o,nodelist:o,arguments:o,object:function(e,t){var o,r,s=[];b.jsDump.up();for(o in e)r=e[o],s.push(b.jsDump.parse(o,"key")+": "+b.jsDump.parse(r,void 0,t));return b.jsDump.down(),n("{",s,"}")},node:function(e){var t,n,o=b.jsDump.HTML?"&lt;":"<",r=b.jsDump.HTML?"&gt;":">",s=e.nodeName.toLowerCase(),i=o+s;for(t in b.jsDump.DOMAttrs)n=e[b.jsDump.DOMAttrs[t]],n&&(i+=" "+t+"="+b.jsDump.parse(n,"attribute"));return i+r+o+"/"+s+r},functionArgs:function(e){var t,n=e.length;if(!n)return"";for(t=Array(n);n--;)t[n]=String.fromCharCode(97+n);return" "+t.join(", ")+" "},key:e,functionCode:"[code]",attribute:e,string:e,date:e,regexp:t,number:t,"boolean":t},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"  ",multiline:!0};return s}(),b.diff=function(){function e(e,t){var n,o={},r={};for(n=0;n<t.length;n++)null==o[t[n]]&&(o[t[n]]={rows:[],o:null}),o[t[n]].rows.push(n);for(n=0;n<e.length;n++)null==r[e[n]]&&(r[e[n]]={rows:[],n:null}),r[e[n]].rows.push(n);for(n in o)x.call(o,n)&&1==o[n].rows.length&&void 0!==r[n]&&1==r[n].rows.length&&(t[o[n].rows[0]]={text:t[o[n].rows[0]],row:r[n].rows[0]},e[r[n].rows[0]]={text:e[r[n].rows[0]],row:o[n].rows[0]});for(n=0;n<t.length-1;n++)null!=t[n].text&&null==t[n+1].text&&t[n].row+1<e.length&&null==e[t[n].row+1].text&&t[n+1]==e[t[n].row+1]&&(t[n+1]={text:t[n+1],row:t[n].row+1},e[t[n].row+1]={text:e[t[n].row+1],row:n+1});for(n=t.length-1;n>0;n--)null!=t[n].text&&null==t[n-1].text&&t[n].row>0&&null==e[t[n].row-1].text&&t[n-1]==e[t[n].row-1]&&(t[n-1]={text:t[n-1],row:t[n].row-1},e[t[n].row-1]={text:e[t[n].row-1],row:n-1});return{o:e,n:t}}return function(t,n){var o,r,s,i,a,u;if(t=t.replace(/\s+$/,""),n=n.replace(/\s+$/,""),o=e(""==t?[]:t.split(/\s+/),""==n?[]:n.split(/\s+/)),r="",s=t.match(/\s+/g),null==s?s=[" "]:s.push(" "),i=n.match(/\s+/g),null==i?i=[" "]:i.push(" "),0==o.n.length)for(a=0;a<o.o.length;a++)r+="<del>"+o.o[a]+s[a]+"</del>";else{if(null==o.n[0].text)for(n=0;n<o.o.length&&null==o.o[n].text;n++)r+="<del>"+o.o[n]+s[n]+"</del>";for(a=0;a<o.n.length;a++)if(null==o.n[a].text)r+="<ins>"+o.n[a]+i[a]+"</ins>";else{for(u="",n=o.n[a].row+1;n<o.o.length&&null==o.o[n].text;n++)u+="<del>"+o.o[n]+s[n]+"</del>";r+=" "+o.n[a].text+i[a]+u}}return r}}()}(this);