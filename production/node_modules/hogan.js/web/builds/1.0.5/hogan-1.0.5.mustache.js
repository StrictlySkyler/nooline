/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

var Mustache,Hogan={};!function(t,n){function r(t){return(null===t||void 0===t?"":t)+""}function e(t){return t=r(t),s.test(t)?t.replace(i,"&amp;").replace(o,"&lt;").replace(u,"&gt;").replace(c,"&#39;").replace(f,"&quot;"):t}var i,o,u,c,f,s,h;t.Template=function(t,r,e,i){this.r=t||this.r,this.c=e,this.options=i,this.text=r||"",this.buf=n?[]:""},t.Template.prototype={r:function(){return""},v:e,t:r,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(t,n,r){return this.r(t,n,r)},rp:function(t,n,r,e){var i=r[t];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(n,r,e)):""},rs:function(t,n,r){var e,i=t[t.length-1];if(!h(i))return r(t,n,this),void 0;for(e=0;e<i.length;e++)t.push(i[e]),r(t,n,this),t.pop()},s:function(t,n,r,e,i,o,u){var c;return h(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,n,r,e,i,o,u)),c=""===t||!!t,!e&&c&&n&&n.push("object"==typeof t?t:n[n.length-1]),c)},d:function(t,n,r,e){var i,o=t.split("."),u=this.f(o[0],n,r,e),c=null;if("."===t&&h(n[n.length-2]))return n[n.length-1];for(i=1;i<o.length;i++)u&&"object"==typeof u&&o[i]in u?(c=u,u=u[o[i]]):u="";return e&&!u?!1:(e||"function"!=typeof u||(n.push(c),u=this.lv(u,n,r),n.pop()),u)},f:function(t,n,r,e){var i,o=!1,u=null,c=!1;for(i=n.length-1;i>=0;i--)if(u=n[i],u&&"object"==typeof u&&t in u){o=u[t],c=!0;break}return c?(e||"function"!=typeof o||(o=this.lv(o,n,r)),o):e?!1:""},ho:function(t,n,r,e,i){var o,u=this.c,c=this.options;return c.delimiters=i,o=t.call(n,e,function(t){return u.compile(t,c).render(n,r)}),this.b(u.compile(""+o,c).render(n,r)),!1},b:n?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:n?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,n,r,e,i,o,u){var c=n[n.length-1],f=null;if(!e&&this.c&&t.length>0)return this.ho(t,c,r,this.text.substring(i,o),u);if(f=t.call(c),"function"==typeof f){if(e)return!0;if(this.c)return this.ho(f,c,r,this.text.substring(i,o),u)}return f},lv:function(t,n,e){var i=n[n.length-1],o=t.call(i);return"function"==typeof o&&(o=o.call(i)),o=r(o),this.c&&~o.indexOf("{{")?this.c.compile(o,this.options).render(i,e):o}},i=/&/g,o=/</g,u=/>/g,c=/\'/g,f=/\"/g,s=/[&<>\"\']/,h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function n(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function r(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function e(t,n,r){if(n.charAt(r)!=t.charAt(0))return!1;for(var e=1,i=t.length;i>e;e++)if(n.charAt(r+e)!=t.charAt(e))return!1;return!0}function i(t,n,r,e){for(var c=[],f=null,s=null;t.length>0;)if(s=t.shift(),"#"==s.tag||"^"==s.tag||o(s,e))r.push(s),s.nodes=i(t,s.tag,r,e),c.push(s);else{if("/"==s.tag){if(0===r.length)throw Error("Closing tag without opener: /"+s.n);if(f=r.pop(),s.n!=f.n&&!u(s.n,f.n,e))throw Error("Nesting error: "+f.n+" vs. "+s.n);return f.end=s.i,c}c.push(s)}if(r.length>0)throw Error("missing closing tag: "+r.pop().n);return c}function o(t,n){for(var r=0,e=n.length;e>r;r++)if(n[r].o==t.n)return t.tag="#",!0}function u(t,n,r){for(var e=0,i=r.length;i>e;e++)if(r[e].c==t&&r[e].o==n)return!0}function c(t){return'var _=this;_.b(i=i||"");'+h(t)+"return _.fl();"}function f(t){return t.replace(A,"\\\\").replace(_,'\\"').replace(m,"\\n").replace(y,"\\r")}function s(t){return~t.indexOf(".")?"d":"f"}function h(t){var n,r,e,i="";for(n=0,r=t.length;r>n;n++)e=t[n].tag,"#"==e?i+=a(t[n].nodes,t[n].n,s(t[n].n),t[n].i,t[n].end,t[n].otag+" "+t[n].ctag):"^"==e?i+=l(t[n].nodes,t[n].n,s(t[n].n)):"<"==e||">"==e?i+=p(t[n]):"{"==e||"&"==e?i+=g(t[n].n,s(t[n].n)):"\n"==e?i+=d('"\\n"'+(t.length-1==n?"":" + i")):"_v"==e?i+=v(t[n].n,s(t[n].n)):void 0===e&&(i+=d('"'+f(t[n])+'"'));return i}function a(t,n,r,e,i,o){return"if(_.s(_."+r+'("'+f(n)+'",c,p,1),'+"c,p,0,"+e+","+i+',"'+o+'")){'+"_.rs(c,p,"+"function(c,p,_){"+h(t)+"});c.pop();}"}function l(t,n,r){return"if(!_.s(_."+r+'("'+f(n)+'",c,p,1),c,p,1,0,0,"")){'+h(t)+"};"}function p(t){return'_.b(_.rp("'+f(t.n)+'",c,p,"'+(t.indent||"")+'"));'}function g(t,n){return"_.b(_.t(_."+n+'("'+f(t)+'",c,p,0)));'}function v(t,n){return"_.b(_.v(_."+n+'("'+f(t)+'",c,p,0)));'}function d(t){return"_.b("+t+");"}var b=/\S/,_=/\"/g,m=/\n/g,y=/\r/g,A=/\\/g,x={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};t.scan=function(t,i){function o(){d.length>0&&(_.push(new String(d)),d="")}function u(){var t,n=!0;for(t=A;t<_.length;t++)if(n=_[t].tag&&x[_[t].tag]<x._v||!_[t].tag&&null===_[t].match(b),!n)return!1;return n}function c(t,n){if(o(),t&&u())for(var r,e=A;e<_.length;e++)_[e].tag||((r=_[e+1])&&">"==r.tag&&(r.indent=""+_[e]),_.splice(e,1));else n||_.push({tag:"\n"});m=!1,A=_.length}function f(t,n){var e="="+T,i=t.indexOf(e,n),o=r(t.substring(t.indexOf("=",n)+1,i)).split(" ");return w=o[0],T=o[1],i+e.length-1}var s=t.length,h=0,a=1,l=2,p=h,g=null,v=null,d="",_=[],m=!1,y=0,A=0,w="{{",T="}}";for(i&&(i=i.split(" "),w=i[0],T=i[1]),y=0;s>y;y++)p==h?e(w,t,y)?(--y,o(),p=a):"\n"==t.charAt(y)?c(m):d+=t.charAt(y):p==a?(y+=w.length-1,v=x[t.charAt(y+1)],g=v?t.charAt(y+1):"_v","="==g?(y=f(t,y),p=h):(v&&y++,p=l),m=y):e(T,t,y)?(_.push({tag:g,n:r(d),otag:w,ctag:T,i:"/"==g?m-T.length:y+w.length}),d="",y+=T.length-1,p=h,"{"==g&&("}}"==T?y++:n(_[_.length-1]))):d+=t.charAt(y);return c(m,!0),_},t.generate=function(n,r,e){return e.asString?"function(c,p,i){"+n+";}":new t.Template(Function("c","p","i",n),r,t,e)},t.parse=function(t,n,r){return r=r||{},i(t,"",[],r.sectionTags||[])},t.cache={},t.compile=function(t,n){var r,e;return n=n||{},r=t+"||"+!!n.asString,(e=this.cache[r])?e:(e=this.generate(c(this.parse(this.scan(t,n.delimiters),t,n)),t,n),this.cache[r]=e)}}("undefined"!=typeof exports?exports:Hogan),Mustache=function(t){function n(n,r,e,i){var o=this.f(n,r,e,0),u=r;return o&&(u=u.concat(o)),t.Template.prototype.rp.call(this,n,u,e,i)}var r,e,i=function(r,e,i){this.rp=n,t.Template.call(this,r,e,i)};return i.prototype=t.Template.prototype,e=function(){this.cache={},this.generate=function(t,n){return new i(Function("c","p","i",t),n,r)}},e.prototype=t,r=new e,{to_html:function(t,n,e,i){var o=r.compile(t),u=o.render(n,e);return i?(i(u),void 0):u}}}(Hogan);