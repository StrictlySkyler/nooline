function compress(e){var s=jsp.parse(e);return s=pro.ast_mangle(s),s=pro.ast_squeeze(s,{no_warnings:!0}),s=pro.ast_squeeze_more(s),pro.gen_code(s)}function getTester(e){return function(s){var t,r,i=path.join(testDir,e),p=path.join(expectedDir,e),n=fs.readFileSync(i,"utf-8"),c=compress(n);s.ok(n.length>=c.length),t=compress(n),s.equal(c,t),r=fs.readFileSync(p,"utf-8"),s.equal(c,r.replace(/(\r?\n)+$/,"")),s.done()}}var i,script,fs=null,uglify=null,jsp=uglify.parser,nodeunit=null,path=null,pro=uglify.uglify,Script=process.binding("evals").Script,scriptsPath=__dirname,testDir=path.join(scriptsPath,"compress","test"),expectedDir=path.join(scriptsPath,"compress","expected"),tests={},scripts=fs.readdirSync(testDir);for(i in scripts)script=scripts[i],/\.js$/.test(script)&&(tests[script]=getTester(script));module.exports=nodeunit.testCase(tests);