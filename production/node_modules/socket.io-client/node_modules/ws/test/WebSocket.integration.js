function getArrayBuffer(e){var r,n=e.length,t=new ArrayBuffer(n),o=new Uint8Array(t);for(r=0;n>r;r++)o[r]=e[r];return o.buffer}function areArraysEqual(e,r){if(e.length!=r.length)return!1;for(var n=0,t=e.length;t>n;++n)if(e[n]!==r[n])return!1;return!0}var assert=null,WebSocket=null,server=null,port=2e4;describe("WebSocket",function(){it("communicates successfully with echo service",function(e){var r=new WebSocket("ws://echo.websocket.org/",{protocolVersion:13,origin:"http://websocket.org"}),n=""+Date.now(),t=!1;r.on("open",function(){r.send(n,{mask:!0})}),r.on("close",function(){assert.equal(!0,t),e()}),r.on("message",function(e){assert.equal(n,e),r.terminate(),t=!0})})});