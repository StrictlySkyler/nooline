function nextTest(){var t;return currentTest>testCount||-1!=lastTest&&currentTest>lastTest?(console.log("Updating reports and shutting down"),t=new WebSocket("ws://localhost:9001/updateReports?agent=ws"),t.on("close",function(){process.exit()}),void 0):(console.log("Running test case "+currentTest+"/"+testCount),t=new WebSocket("ws://localhost:9001/runCase?case="+currentTest+"&agent=ws"),t.on("message",function(e,n){t.send(n.buffer,{binary:n.binary===!0,mask:!0})}),t.on("close",function(){currentTest+=1,process.nextTick(nextTest)}),t.on("error",function(){}),void 0)}var ws,WebSocket=null,currentTest=1,lastTest=-1,testCount=null;process.on("uncaughtException",function(t){console.log("Caught exception: ",t,t.stack)}),process.on("SIGINT",function(){try{console.log("Updating reports and shutting down");var t=new WebSocket("ws://localhost:9001/updateReports?agent=ws");t.on("close",function(){process.exit()})}catch(e){process.exit()}}),ws=new WebSocket("ws://localhost:9001/getCaseCount"),ws.on("message",function(t){testCount=parseInt(t)}),ws.on("close",function(){testCount>0&&nextTest()});