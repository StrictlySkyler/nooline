var assert=null,expect=null,Receiver=null;describe("Receiver",function(){it("can parse text message",function(){var e=new Receiver,t="00 48 65 6c 6c 6f ff",f=!1;e.ontext=function(e){f=!0,assert.equal("Hello",e)},e.add(getBufferFromHexString(t)),expect(f).to.equal(!0)}),it("can parse multiple text messages",function(){var e,t=new Receiver,f="00 48 65 6c 6c 6f ff 00 48 65 6c 6c 6f ff",n=!1,r=[];for(t.ontext=function(e){n=!0,r.push(e)},t.add(getBufferFromHexString(f)),expect(n).to.equal(!0),e=0;2>e;++e)expect(r[e]).to.equal("Hello")}),it("can parse empty message",function(){var e=new Receiver,t="00 ff",f=!1;e.ontext=function(e){f=!0,assert.equal("",e)},e.add(getBufferFromHexString(t)),expect(f).to.equal(!0)}),it("can parse text messages delivered over multiple frames",function(){var e,t=new Receiver,f=["00 48","65 6c 6c","6f ff 00 48","65","6c 6c 6f","ff"],n=!1,r=[];for(t.ontext=function(e){n=!0,r.push(e)},e=0;e<f.length;++e)t.add(getBufferFromHexString(f[e]));for(expect(n).to.equal(!0),e=0;2>e;++e)expect(r[e]).to.equal("Hello")}),it("emits an error if a payload doesnt start with 0x00",function(){var e,t=new Receiver,f=["00 6c ff","00 6c ff ff","ff 00 6c ff 00 6c ff","00","6c 6c 6f","ff"],n=!1,r=!1,c=[];for(t.ontext=function(e){n=!0,c.push(e)},t.onerror=function(e,t){r=1==t},e=0;e<f.length&&!r;++e)t.add(getBufferFromHexString(f[e]));expect(r).to.equal(!0),expect(c[0]).to.equal("l"),expect(c[1]).to.equal("l"),expect(c.length).to.equal(2)}),it("can parse close messages",function(){var e,t=new Receiver,f=["ff 00"],n=!1,r=!1;for(t.onclose=function(){n=!0},t.onerror=function(e,t){r=1==t},e=0;e<f.length&&!r;++e)t.add(getBufferFromHexString(f[e]));expect(n).to.equal(!0),expect(r).to.equal(!1)}),it("can parse binary messages delivered over multiple frames",function(){var e,t=new Receiver,f=["80 05 48","65 6c 6c","6f 80 80 05 48","65","6c 6c 6f"],n=!1,r=[];for(t.ontext=function(e){n=!0,r.push(e)},e=0;e<f.length;++e)t.add(getBufferFromHexString(f[e]));for(expect(n).to.equal(!0),e=0;2>e;++e)expect(r[e]).to.equal("Hello")})});