function onFilesSelected(e){var n,o,l,t,r,i=e.srcElement;i.disabled=!0,n=document.querySelector("div#progress"),n.innerHTML="0%",o=e.target.files,l=o.length,t=0,l&&(r=new Uploader("ws://localhost:8080",function(){Array.prototype.slice.call(o,0).forEach(function(e){return"."==e.name?(--l,void 0):(r.sendFile(e,function(o){return o?(console.log(o),void 0):(++t,n.innerHTML=~~(100*(t/l))+"%",console.log("Sent: "+e.name),void 0)}),void 0)})})),r.ondone=function(){r.close(),n.innerHTML="100% done, "+l+" files sent."}}window.onload=function(){var e=document.querySelectorAll('[type="file"]');Array.prototype.slice.call(e,0).forEach(function(e){e.addEventListener("change",onFilesSelected,!1)})};