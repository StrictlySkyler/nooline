/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

module.exports.BufferUtil={merge:function(e,t){var a,n,r,c=0;for(a=0,n=t.length;n>a;++a)r=t[a],r.copy(e,c),c+=r.length},mask:function(e,t,a,n,r){for(var c,s=t.readUInt32LE(0,!0),o=0;r-3>o;o+=4)c=s^e.readUInt32LE(o,!0),0>c&&(c=4294967296+c),a.writeUInt32LE(c,n+o,!0);switch(r%4){case 3:a[n+o+2]=e[o+2]^t[2];case 2:a[n+o+1]=e[o+1]^t[1];case 1:a[n+o]=e[o]^t[0];case 0:}},unmask:function(e,t){for(var a,n=t.readUInt32LE(0,!0),r=e.length,c=0;r-3>c;c+=4)a=n^e.readUInt32LE(c,!0),0>a&&(a=4294967296+a),e.writeUInt32LE(a,c,!0);switch(r%4){case 3:e[c+2]=e[c+2]^t[2];case 2:e[c+1]=e[c+1]^t[1];case 1:e[c]=e[c]^t[0];case 0:}}};