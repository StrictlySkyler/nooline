var url,runSync,sys=require("util"),assert=require("assert"),XMLHttpRequest=require("../lib/XMLHttpRequest").XMLHttpRequest,xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){4==this.readyState&&(assert.equal("Hello World",this.responseText),this.close(),runSync())},url="file://"+__dirname+"/testdata.txt",xhr.open("GET",url),xhr.send(),runSync=function(){xhr=new XMLHttpRequest,xhr.onreadystatechange=function(){4==this.readyState&&(assert.equal("Hello World",this.responseText),this.close(),sys.puts("done"))},xhr.open("GET",url,!1),xhr.send()};