function Polling(t){Transport.call(this,t)}var global,Transport=null,util=null,parser=null,debug=null;module.exports=Polling,global="undefined"!=typeof window?window:global,util.inherits(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(t){function i(){debug("paused"),o.readyState="paused",t()}var e,o=this;this.readyState="pausing",this.polling||!this.writable?(e=0,this.polling&&(debug("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--e||i()})),this.writable||(debug("we are currently writing - waiting to pause"),e++,this.once("drain",function(){debug("pre-pause writing complete"),--e||i()}))):i()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(t){var i,e,o;for(debug("polling got data %s",t),i=parser.decodePayload(t),e=0,o=i.length;o>e;e++){if("opening"==this.readyState&&this.onOpen(),"close"==i[e].type)return this.onClose(),void 0;this.onPacket(i[e])}this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState)},Polling.prototype.doClose=function(){debug("sending close packet"),this.send([{type:"close"}])},Polling.prototype.write=function(t){var i=this;this.writable=!1,this.doWrite(parser.encodePayload(t),function(){i.writable=!0,i.emit("drain")})},Polling.prototype.uri=function(){var t=this.query||{},i=this.secure?"https":"http",e="";return(global.ActiveXObject||util.ua.android||util.ua.ios6||this.timestampRequests)&&(t[this.timestampParam]=+new Date),t=util.qs(t),this.port&&("https"==i&&443!=this.port||"http"==i&&80!=this.port)&&(e=":"+this.port),t.length&&(t="?"+t),i+"://"+this.host+e+this.path+t};