/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

/**
   * Parses an URI
   *
   * @author Steven Levithan <stevenlevithan.com> (MIT license)
   * @api public
   */

!function(t,e){var n,r=t.util={},o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];r.parseUri=function(t){for(var e=o.exec(t||""),n={},r=14;r--;)n[i[r]]=e[r]||"";return n},r.uniqueUri=function(t){var n=t.protocol,r=t.host,o=t.port;return"document"in e?(r=r||document.domain,o=o||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(r=r||"localhost",o||"https"!=n||(o=443)),(n||"http")+"://"+r+":"+(o||80)},r.query=function(t,e){var n,o=r.chunkQuery(t||""),i=[];r.merge(o,r.chunkQuery(e||""));for(n in o)o.hasOwnProperty(n)&&i.push(n+"="+o[n]);return i.length?"?"+i.join("&"):""},r.chunkQuery=function(t){for(var e,n={},r=t.split("&"),o=0,i=r.length;i>o;++o)e=r[o].split("="),e[0]&&(n[e[0]]=e[1]);return n},n=!1,r.load=function(t){return"document"in e&&"complete"===document.readyState||n?t():(r.on(e,"load",t,!1),void 0)},r.on=function(t,e,n,r){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,r)},r.request=function(t){var e=null.XMLHttpRequest;return new e},"undefined"!=typeof window&&r.load(function(){n=!0}),r.defer=function(t){return r.ua.webkit&&"undefined"==typeof importScripts?(r.load(function(){setTimeout(t,100)}),void 0):t()},r.merge=function(t,e,n,o){var i,u=o||[],a=void 0===n?2:n;for(i in e)e.hasOwnProperty(i)&&r.indexOf(u,i)<0&&("object"==typeof t[i]&&a?r.merge(t[i],e[i],a-1,u):(t[i]=e[i],u.push(e[i])));return t},r.mixin=function(t,e){r.merge(t.prototype,e.prototype)},r.inherit=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},r.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.intersect=function(t,e){var n,o,i=[],u=t.length>e.length?t:e,a=t.length>e.length?e:t;for(n=0,o=a.length;o>n;n++)~r.indexOf(u,a[n])&&i.push(a[n]);return i},r.indexOf=function(t,e,n){for(var r=t.length,n=0>n?0>n+r?0:n+r:n||0;r>n&&t[n]!==e;n++);return n>=r?-1:n},r.toArray=function(t){var e,n,r=[];for(e=0,n=t.length;n>e;e++)r.push(t[e]);return r},r.ua={},r.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var t=new XMLHttpRequest}catch(e){return!1}return void 0!=t.withCredentials}(),r.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),r.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this);