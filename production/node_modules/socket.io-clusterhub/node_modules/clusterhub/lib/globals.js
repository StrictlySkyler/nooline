var hubs,workers,queue,isReady,has=null.has;exports.commands={EVENT:0,ON:1,OFF:2,OFFALL:3,READY:4},hubs=exports.hubs={},workers=exports.workers=[],queue=exports.queue=[],exports.queuemsg=function(e,r){isReady()?e(r):queue.push({fn:e,msg:r})},isReady=exports.isReady=function(){var e=workers.filter(function(e){return e.ready});return e.length===workers.length},exports.broadcast=function(e,r,s,o){workers.forEach(function(n){o&&n.worker===o||has(n.events,r)&&n.worker.send({dir:__dirname,hub:e,event:r,args:s})})},exports.emit=function(e,r,s){var o=hubs[e];has(o._listeners,r)&&o._listeners[r].forEach(function(e){e.apply({local:!1,remote:!0},s)})};