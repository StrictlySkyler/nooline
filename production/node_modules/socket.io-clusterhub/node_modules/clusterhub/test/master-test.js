var hub=null,assert=null;describe("Listen",function(){it("Emits to self",function(n){hub.on("e",function(e,t,i){assert.equal(e,1),assert.equal(t,2),assert.equal(i,3),n()}),hub.emit("e",1,2,3)}),describe("and unlisten",function(){it("Does not emit unlistened to event",function(n){hub.on("a",n),hub.on("b",n),hub.off("b"),hub.emit("a"),hub.emit("b")})}),describe("once",function(){it("Emits only once",function(n){hub.once("hi",n),hub.emit("hi"),hub.emit("hi"),hub.emit("hi")})})}),describe("Local EventVat database",function(){it("Can update and access db",function(n){assert.ok(!hub.get("foo")),hub.set("foo","bar",function(e){assert.ok(e),n()})}),it("Emits events on function calls",function(n){hub.on("incr one",function(){hub.get("one",1),n()}),hub.incr("one")})});