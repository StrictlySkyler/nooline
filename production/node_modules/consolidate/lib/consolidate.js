/*!
 * consolidate
 * Copyright(c) 2012 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 *
 * Engines which do not support caching of their file contents
 * should use the `read()` function defined in consolidate.js
 * On top of this, when an engine compiles to a `Function`,
 * these functions should either be cached within consolidate.js
 * or the engine itself via `options.cache`. This will allow
 * users and frameworks to pass `options.cache = true` for
 * `NODE_ENV=production`, however edit the file(s) without
 * re-loading the application in development.
 */

function cache(e,r){return r&&e.filename&&e.cache?(delete readCache[e.filename],cacheStore[e.filename]=r,r):e.filename&&e.cache?cacheStore[e.filename]:r}function read(e,r,n){var t=readCache[e],c=r.cache&&t&&"string"==typeof t;return c?n(null,t):(fs.readFile(e,"utf8",function(t,c){return t?n(t):(r.cache&&(readCache[e]=c),n(null,c),void 0)}),void 0)}function readPartials(e,r,n){function t(u){var s,i;return u==a.length?n(null):(s=a[u],i=join(dirname(e),c[s]+extname(e)),read(i,r,function(e,c){return e?n(e):(r.partials[s]=c,t(++u),void 0)}),void 0)}var c,a;return r.partials?(c=r.partials,a=Object.keys(c),t(0),void 0):n()}function fromStringRenderer(e){return function(r,n,t){n.filename=r,readPartials(r,n,function(c){return c?t(c):(cache(n)?exports[e].render("",n,t):read(r,n,function(r,c){return r?t(r):(exports[e].render(c,n,t),void 0)}),void 0)})}}var fs=null,path=null,join=path.join,extname=path.extname,dirname=path.dirname,readCache={},cacheStore={},requires={};exports.clearCache=function(){cacheStore={}},exports.jade=function(e,r,n){var t=requires.jade;if(!t)try{t=requires.jade=null}catch(c){t=requires.jade=null}t.renderFile(e,r,n)},exports.jade.render=function(e,r,n){var t=requires.jade;if(!t)try{t=requires.jade=null}catch(c){t=requires.jade=null}t.render(e,r,n)},exports.dust=fromStringRenderer("dust"),exports.dust.render=function(e,r,n){var t,c,a,u=requires.dust;if(!u)try{u=requires.dust=null}catch(s){try{u=requires.dust=null}catch(s){u=requires.dust=null}}t="dust",c=".",r&&(r.ext&&(t=r.ext),r.views&&(c=r.views),r.settings&&r.settings.views&&(c=r.settings.views)),(!r||r&&!r.cache)&&(u.cache={}),u.onLoad=function(e,n){""==extname(e)&&(e+="."+t),"/"!==e[0]&&(e=c+"/"+e),read(e,r,n)};try{a=cache(r)||cache(r,u.compileFn(e)),a(r,n)}catch(s){n(s)}},exports.swig=fromStringRenderer("swig"),exports.swig.render=function(e,r,n){var t,c=requires.swig||(requires.swig=null);try{t=cache(r)||cache(r,c.compile(e,r)),n(null,t(r))}catch(a){n(a)}},exports.atpl=fromStringRenderer("atpl"),exports.atpl.render=function(e,r,n){var t,c=requires.atpl||(requires.atpl=null);try{t=cache(r)||cache(r,c.compile(e,r)),n(null,t(r))}catch(a){n(a)}},exports.liquor=fromStringRenderer("liquor"),exports.liquor.render=function(e,r,n){var t,c=requires.liquor||(requires.liquor=null);try{t=cache(r)||cache(r,c.compile(e,r)),n(null,t(r))}catch(a){n(a)}},exports.ejs=fromStringRenderer("ejs"),exports.ejs.render=function(e,r,n){var t,c=requires.ejs||(requires.ejs=null);try{t=cache(r)||cache(r,c.compile(e,r)),n(null,t(r))}catch(a){n(a)}},exports.eco=fromStringRenderer("eco"),exports.eco.render=function(e,r,n){var t=requires.eco||(requires.eco=null);try{n(null,t.render(e,r))}catch(c){n(c)}},exports.jazz=fromStringRenderer("jazz"),exports.jazz.render=function(e,r,n){var t,c=requires.jazz||(requires.jazz=null);try{t=cache(r)||cache(r,c.compile(e,r)),t.eval(r,function(e){n(null,e)})}catch(a){n(a)}},exports.jqtpl=fromStringRenderer("jqtpl"),exports.jqtpl.render=function(e,r,n){var t=requires.jqtpl||(requires.jqtpl=null);try{t.template(e,e),n(null,t.tmpl(e,r))}catch(c){n(c)}},exports.haml=fromStringRenderer("haml"),exports.haml.render=function(e,r,n){var t=requires.hamljs||(requires.hamljs=null);try{r.locals=r,n(null,t.render(e,r).trimLeft())}catch(c){n(c)}},exports.whiskers=function(e,r,n){var t=requires.whiskers||(requires.whiskers=null);t.__express(e,r,n)},exports.whiskers.render=function(e,r,n){var t=requires.whiskers||(requires.whiskers=null);try{n(null,t.render(e,r))}catch(c){n(c)}},exports["haml-coffee"]=fromStringRenderer("haml-coffee"),exports["haml-coffee"].render=function(e,r,n){var t,c=requires.HAMLCoffee||(requires.HAMLCoffee=null);try{t=cache(r)||cache(r,c.compile(e,r)),n(null,t(r))}catch(a){n(a)}},exports.hogan=fromStringRenderer("hogan"),exports.hogan.render=function(e,r,n){var t,c=requires.hogan||(requires.hogan=null);try{t=cache(r)||cache(r,c.compile(e,r)),n(null,t.render(r,r.partials))}catch(a){n(a)}},exports.templayed=fromStringRenderer("templayed"),exports.templayed.render=function(e,r,n){var t,c=requires.templayed||(requires.templayed=null);try{t=cache(r)||cache(r,c(e)),n(null,t(r))}catch(a){n(a)}},exports.handlebars=fromStringRenderer("handlebars"),exports.handlebars.render=function(e,r,n){var t,c,a,u=requires.handlebars||(requires.handlebars=null);try{for(t in r.partials)u.registerPartial(t,r.partials[t]);for(c in r.helpers)u.registerHelper(c,r.helpers[c]);a=cache(r)||cache(r,u.compile(e,r)),n(null,a(r))}catch(s){n(s)}},exports.underscore=fromStringRenderer("underscore"),exports.underscore.render=function(e,r,n){var t,c=requires.underscore||(requires.underscore=null);try{t=cache(r)||cache(r,c.template(e,null,r)),n(null,t(r).replace(/\n$/,""))}catch(a){n(a)}},exports.qejs=function(e,r,n){try{var t=requires.qejs||(requires.qejs=null);t.renderFile(e,r).then(function(e){n(null,e)},function(e){n(e)}).end()}catch(c){n(c)}},exports.qejs.render=function(e,r,n){try{var t=requires.qejs||(requires.qejs=null);t.render(e,r).then(function(e){n(null,e)},function(e){n(e)}).end()}catch(c){n(c)}},exports.walrus=fromStringRenderer("walrus"),exports.walrus.render=function(e,r,n){var t,c=requires.walrus||(requires.walrus=null);try{t=cache(r)||cache(r,c.parse(e)),n(null,t.compile(r))}catch(a){n(a)}},exports.mustache=fromStringRenderer("mustache"),exports.mustache.render=function(e,r,n){var t=requires.mustache||(requires.mustache=null);try{n(null,t.to_html(e,r,r.partials))}catch(c){n(c)}},exports.just=function(e,r,n){var t,c=requires.just;c||(t=null,c=requires.just=new t),c.configure({useCache:r.cache}),c.render(e,r,n)},exports.just.render=function(e,r,n){var t=null,c=new t({root:{page:e}});c.render("page",r,n)},exports.ect=function(e,r,n){var t,c=requires.ect;c||(t=null,c=requires.ect=new t),c.configure({cache:r.cache}),c.render(e,r,n)},exports.ect.render=function(e,r,n){var t=null,c=new t({root:{page:e}});c.render("page",r,n)},exports.mote=fromStringRenderer("mote"),exports.mote.render=function(e,r,n){var t,c=requires.mote||(requires.mote=null);try{t=cache(r)||cache(r,c.compile(e)),n(null,t(r))}catch(a){n(a)}},exports.toffee=function(e,r,n){var t=requires.toffee||(requires.toffee=null);t.__consolidate_engine_render(e,r,n)},exports.toffee.render=function(e,r,n){var t=requires.toffee||(requires.toffee=null);try{t.str_render(e,r,n)}catch(c){n(c)}},exports.dot=fromStringRenderer("dot"),exports.dot.render=function(e,r,n){var t,c=requires.dot||(requires.dot=null);try{t=cache(r)||cache(r,c.compile(e)),n(null,t(r))}catch(a){n(a)}};