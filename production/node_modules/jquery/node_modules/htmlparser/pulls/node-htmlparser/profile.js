function getMillisecs(){return(new Date).getTime()}function timeExecutions(t,e){for(var s=getMillisecs();t--;)e();return getMillisecs()-s}var sys=require("sys"),fs=require("fs"),http=require("http"),htmlparser=require("./node-htmlparser"),libxml=null,testNHP=!0,testLXJS=!0,testIterations=100,testHost="nodejs.org",testPort=80,testPath="/api.html",html="";http.createClient(testPort,testHost).request("GET",testPath,{host:testHost}).addListener("response",function(t){"200"==t.statusCode?(t.setEncoding("utf8"),t.addListener("data",function(t){html+=t}).addListener("end",function(){var t=testNHP?timeExecutions(testIterations,function(){var t=new htmlparser.DefaultHandler(function(t){t&&sys.debug("Error: "+t)}),e=new htmlparser.Parser(t);e.parseComplete(html)}):0,e=testLXJS?timeExecutions(testIterations,function(){libxml.parseHtmlString(html)}):0;testNHP&&sys.debug("NodeHtmlParser: "+t),testLXJS&&sys.debug("LibXmlJs: "+e),testNHP&&testLXJS&&sys.debug("Difference: "+100*((t-e)/e))})):sys.debug("Error: got response status "+t.statusCode)}).end();