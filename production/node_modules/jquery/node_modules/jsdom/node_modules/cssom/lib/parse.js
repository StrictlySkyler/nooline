var CSSOM={};CSSOM.parse=function(e){for(var t,r,a,l,S,s,n,c,i,u,o=0,m="before-selector",b="",f={selector:!0,value:!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0},R=new CSSOM.CSSStyleSheet,C=R,p="",y=/@(-(?:\w+-)+)?keyframes/g,h=function(t){var r=e.substring(0,o).split("\n"),a=r.length,l=r.pop().length+1,S=Error(t+" (line "+a+", char "+l+")");throw S.line=a,S.char=l,S.styleSheet=R,S};i=e.charAt(o);o++)switch(i){case" ":case"	":case"\r":case"\n":case"\f":f[m]&&(b+=i);break;case'"':switch(t=e.indexOf('"',o+1)+1,t||h('Unmatched "'),b+=e.slice(o,t),o=t-1,m){case"before-value":m="value";break;case"importRule-begin":m="importRule"}break;case"'":switch(t=e.indexOf("'",o+1)+1,t||h("Unmatched '"),b+=e.slice(o,t),o=t-1,m){case"before-value":m="value";break;case"importRule-begin":m="importRule"}break;case"/":"*"===e.charAt(o+1)?(o+=2,t=e.indexOf("*/",o),-1===t?h("Missing */"):o=t+1):b+=i,"importRule-begin"===m&&(b+=" ",m="importRule");break;case"@":if(e.indexOf("@media",o)===o){m="atBlock",S=new CSSOM.CSSMediaRule,S.__starts=o,o+="media".length,b="";break}if(e.indexOf("@import",o)===o){m="importRule-begin",o+="import".length,b+="@import";break}if(e.indexOf("@font-face",o)===o){m="fontFaceRule-begin",o+="font-face".length,n=new CSSOM.CSSFontFaceRule,n.__starts=o,b="";break}if(y.lastIndex=o,u=y.exec(e),u&&u.index===o){m="keyframesRule-begin",c=new CSSOM.CSSKeyframesRule,c.__starts=o,c._vendorPrefix=u[1],o+=u[0].length-1,b="";break}"selector"==m&&(m="atRule"),b+=i;break;case"{":"selector"===m||"atRule"===m?(l.selectorText=b.trim(),l.style.__starts=o,b="",m="before-name"):"atBlock"===m?(S.media.mediaText=b.trim(),C=r=S,S.parentStyleSheet=R,b="",m="before-selector"):"fontFaceRule-begin"===m?(r&&(n.parentRule=r),n.parentStyleSheet=R,l=n,b="",m="before-name"):"keyframesRule-begin"===m?(c.name=b.trim(),r&&(c.parentRule=r),c.parentStyleSheet=R,C=r=c,b="",m="keyframeRule-begin"):"keyframeRule-begin"===m&&(l=new CSSOM.CSSKeyframeRule,l.keyText=b.trim(),l.__starts=o,b="",m="before-name");break;case":":"name"===m?(a=b.trim(),b="",m="before-value"):b+=i;break;case"(":"value"===m?(t=e.indexOf(")",o+1),-1===t&&h('Unmatched "("'),b+=e.slice(o,t+1),o=t):b+=i;break;case"!":"value"===m&&e.indexOf("!important",o)===o?(p="important",o+="important".length):b+=i;break;case";":switch(m){case"value":l.style.setProperty(a,b.trim(),p),p="",b="",m="before-name";break;case"atRule":b="",m="before-selector";break;case"importRule":s=new CSSOM.CSSImportRule,s.parentStyleSheet=s.styleSheet.parentStyleSheet=R,s.cssText=b+i,R.cssRules.push(s),b="",m="before-selector";break;default:b+=i}break;case"}":switch(m){case"value":l.style.setProperty(a,b.trim(),p),p="";case"before-name":case"name":l.__ends=o+1,r&&(l.parentRule=r),l.parentStyleSheet=R,C.cssRules.push(l),b="",m=C.constructor===CSSOM.CSSKeyframesRule?"keyframeRule-begin":"before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":r||h("Unexpected }"),C.__ends=o+1,R.cssRules.push(C),C=R,r=null,b="",m="before-selector"}break;default:switch(m){case"before-selector":m="selector",l=new CSSOM.CSSStyleRule,l.__starts=o;break;case"before-name":m="name";break;case"before-value":m="value";break;case"importRule-begin":m="importRule"}b+=i}return R},exports.parse=CSSOM.parse,CSSOM.CSSStyleSheet=require("./CSSStyleSheet").CSSStyleSheet,CSSOM.CSSStyleRule=require("./CSSStyleRule").CSSStyleRule,CSSOM.CSSImportRule=require("./CSSImportRule").CSSImportRule,CSSOM.CSSMediaRule=require("./CSSMediaRule").CSSMediaRule,CSSOM.CSSFontFaceRule=require("./CSSFontFaceRule").CSSFontFaceRule,CSSOM.CSSStyleDeclaration=null.CSSStyleDeclaration,CSSOM.CSSKeyframeRule=null.CSSKeyframeRule,CSSOM.CSSKeyframesRule=null.CSSKeyframesRule;