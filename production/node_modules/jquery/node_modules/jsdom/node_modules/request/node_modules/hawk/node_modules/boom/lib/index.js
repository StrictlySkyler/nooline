var Http=null,NodeUtil=null,Hoek=null,internals={};exports=module.exports=internals.Boom=function(){var e,n,s;return Hoek.assert(this.constructor===internals.Boom,"Error must be instantiated using new"),Error.call(this),this.isBoom=!0,this.response={code:0,payload:{},headers:{}},arguments[0]instanceof Error?(e=arguments[0],this.data=e,this.response.code=e.code||500,e.message&&(this.message=e.message)):(n=arguments[0],s=arguments[1],Hoek.assert(!isNaN(parseFloat(n))&&isFinite(n)&&n>=400,"First argument must be a number (400+)"),this.response.code=n,s&&(this.message=s)),this.reformat(),this},NodeUtil.inherits(internals.Boom,Error),internals.Boom.prototype.reformat=function(){this.response.payload.code=this.response.code,this.response.payload.error=Http.STATUS_CODES[this.response.code]||"Unknown",this.message&&(this.response.payload.message=Hoek.escapeHtml(this.message))},internals.Boom.badRequest=function(e){return new internals.Boom(400,e)},internals.Boom.unauthorized=function(e,n,s){var t,r,o,a,i,l,u=new internals.Boom(401,e);if(!n)return u;if(t="","string"==typeof n){if(t=n,s)for(r=Object.keys(s),o=0,a=r.length;a>o;++o)o&&(t+=","),i=s[r[o]],(null===i||void 0===i)&&(i=""),t+=" "+r[o]+'="'+Hoek.escapeHeaderAttribute(""+i)+'"';e?(s&&(t+=","),t+=' error="'+Hoek.escapeHeaderAttribute(e)+'"'):u.isMissing=!0}else for(l=n,o=0,a=l.length;a>o;++o)o&&(t+=", "),t+=l[o];return u.response.headers["WWW-Authenticate"]=t,u},internals.Boom.clientTimeout=function(e){return new internals.Boom(408,e)},internals.Boom.serverTimeout=function(e){return new internals.Boom(503,e)},internals.Boom.forbidden=function(e){return new internals.Boom(403,e)},internals.Boom.notFound=function(e){return new internals.Boom(404,e)},internals.Boom.internal=function(e,n){var s=new internals.Boom(500,e);return n&&n.stack?(s.trace=n.stack.split("\n"),s.outterTrace=Hoek.displayStack(1)):s.trace=Hoek.displayStack(1),s.data=n,s.response.payload.message="An internal server error occurred",s},internals.Boom.passThrough=function(e,n,s,t){var r=new internals.Boom(500,"Pass-through");return r.data={code:e,payload:n,type:s},r.response.code=e,r.response.type=s,r.response.headers=t,r.response.payload=n,r};