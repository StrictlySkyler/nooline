var server=null,assert=null,request=null,Cookie=null,Jar=Cookie.Jar,s=server.createServer();s.listen(s.port,function(){function e(e,o){var n=a;a+=1,t+=1,s.on("/"+n,function(e,s){o(e,s),s.writeHead(200),s.end()}),e.url=r+"/"+n,request(e,function(e,o){assert.ok(!e),assert.equal(o.statusCode,200),t-=1,0===t&&(console.log(a+" tests passed."),s.close())})}var o,r="http://localhost:"+s.port,a=0,t=0;e({headers:{cookie:"foo=bar"}},function(e){assert.ok(e.headers.cookie),assert.equal(e.headers.cookie,"foo=bar")}),o=new Jar,o.add(new Cookie("quux=baz")),e({jar:o,headers:{cookie:"foo=bar"}},function(e){assert.ok(e.headers.cookie),assert.equal(e.headers.cookie,"foo=bar; quux=baz")}),e({},function(e){assert.ok(!e.headers.cookie)})});