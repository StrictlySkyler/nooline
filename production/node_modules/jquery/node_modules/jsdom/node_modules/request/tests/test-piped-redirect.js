var http=null,assert=null,request=null,portOne=8968,portTwo=8969,s1=http.createServer(function(e,t){"/original"==e.url?(t.writeHeader(302,{location:"/redirected"}),t.end()):"/redirected"==e.url&&(t.writeHeader(200,{"content-type":"text/plain"}),t.write("OK"),t.end())}).listen(portOne),s2=http.createServer(function(e,t){var r=request("http://localhost:"+portOne+"/original");e.pipe(r),r.pipe(t)}).listen(portTwo,function(){var e=request("http://localhost:"+portTwo+"/original",function(e,t,r){assert.equal(r,"OK"),s1.close(),s2.close()});e.timeout=1e3});