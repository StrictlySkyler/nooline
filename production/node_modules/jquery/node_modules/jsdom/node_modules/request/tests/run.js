var spawn=null.spawn,exitCode=0,timeout=1e4,fs=null;fs.readdir(__dirname,function(e,t){var o,i;if(e)throw e;o=t.filter(function(e){return"test-"===e.slice(0,"test-".length)}),i=function(){var e,t,s,n;0===o.length&&process.exit(exitCode),e=o.shift(),console.log(e),t=spawn("node",["tests/"+e]),s=!1,n=setTimeout(function(){t.kill(),exitCode+=1,console.error(e+" timeout"),s=!0},timeout),t.stdout.pipe(process.stdout),t.stderr.pipe(process.stderr),t.on("exit",function(t){t&&!s&&console.error(e+" failed"),exitCode+=t||0,clearTimeout(n),i()})},i()});