/*!
 * Connect - session - Session
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */

var utils=null,Session=module.exports=function(e,t){Object.defineProperty(this,"req",{value:e}),Object.defineProperty(this,"id",{value:e.sessionID}),"object"==typeof t&&utils.merge(this,t)};Session.prototype.touch=function(){return this.resetMaxAge()},Session.prototype.resetMaxAge=function(){return this.cookie.maxAge=this.cookie.originalMaxAge,this},Session.prototype.save=function(e){return this.req.sessionStore.set(this.id,this,e||function(){}),this},Session.prototype.reload=function(e){var t=this.req,s=this.req.sessionStore;return s.get(this.id,function(i,o){return i?e(i):o?(s.createSession(t,o),e(),void 0):e(Error("failed to load session"))}),this},Session.prototype.destroy=function(e){return delete this.req.session,this.req.sessionStore.destroy(this.id,e),this},Session.prototype.regenerate=function(e){return this.req.sessionStore.regenerate(this.req,e),this};