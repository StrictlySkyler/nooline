/*!
 * Connect - cookieParser
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */

var utils=null,cookie=null;module.exports=function(o){return function(e,s,i){if(e.cookies)return i();var k=e.headers.cookie;if(e.secret=o,e.cookies={},e.signedCookies={},k)try{e.cookies=cookie.parse(k),o&&(e.signedCookies=utils.parseSignedCookies(e.cookies,o),e.signedCookies=utils.parseJSONCookies(e.signedCookies)),e.cookies=utils.parseJSONCookies(e.cookies)}catch(r){return r.status=400,i(r)}i()}};