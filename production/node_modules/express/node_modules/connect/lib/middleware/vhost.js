/*!
 * Connect - vhost
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */

module.exports=function(r,e){if(!r)throw Error("vhost hostname required");if(!e)throw Error("vhost server required");var t=RegExp("^"+r.replace(/[^*\w]/g,"\\$&").replace(/[*]/g,"(?:.*?)")+"$","i");return e.onvhost&&e.onvhost(r),function(r,o,s){if(!r.headers.host)return s();var i=r.headers.host.split(":")[0];return t.test(i)?"function"==typeof e?e(r,o,s):(e.emit("request",r,o),void 0):s()}};