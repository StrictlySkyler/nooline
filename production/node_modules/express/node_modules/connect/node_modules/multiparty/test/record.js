var port,http=null,fs=null,connections=0,server=http.createServer(function(e,n){var t=e.socket;console.log("Request: %s %s -> %s",e.method,e.url,t.filename),e.on("end",function(){return"/"!==e.url?(n.end(JSON.stringify({method:e.method,url:e.url,filename:t.filename})),void 0):(n.writeHead(200,{"content-type":"text/html"}),n.end('<form action="/upload" enctype="multipart/form-data" method="post"><input type="text" name="title"><br><input type="file" name="upload" multiple="multiple"><br><input type="submit" value="Upload"></form>'),void 0)})});server.on("connection",function(e){connections++,e.id=connections,e.filename="connection-"+e.id+".http",e.file=fs.createWriteStream(e.filename),e.pipe(e.file),console.log("--> %s",e.filename),e.on("close",function(){console.log("<-- %s",e.filename)})}),port=process.env.PORT||8080,server.listen(port,function(){console.log("Recording connections on port %s",port)});