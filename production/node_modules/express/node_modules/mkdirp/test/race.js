var mkdirp=null.mkdirp,path=null,fs=null,test=null.test;test("race",function(t){function n(n,i){mkdirp(n,493,function(o){o?t.fail(o):path.exists(n,function(o){o?fs.stat(n,function(n,o){n?t.fail(n):(t.equal(511&o.mode,493),t.ok(o.isDirectory(),"target not a directory"),i&&i())}):t.fail("file not created")})})}var i,o,a,r,e;for(t.plan(4),i=["","tmp"],o=0;25>o;o++)a=Math.floor(Math.random()*Math.pow(16,4)).toString(16),i.push(a);r=i.join("/"),e=2,n(r,function(){0===--e&&t.end()}),n(r,function(){0===--e&&t.end()})});