function paramsEqual(r,t){return!Object.keys(r).some(function(e){return r[e]!=t[e]})}function acceptParams(r,t){var e,n,a=r.split(/ *; */),p={value:a[0],quality:1,params:{},originalIndex:t};for(e=1;e<a.length;++e)n=a[e].split(/ *= */),"q"==n[0]?p.quality=parseFloat(n[1]):p.params[n[0]]=n[1];return p}var mime=null.mime,crc32=null,toString={}.toString;exports.etag=function(r){return'"'+crc32.signed(r)+'"'},exports.locals=function(){function r(t){for(var e in t)r[e]=t[e];return t}return r},exports.isAbsolute=function(r){return"/"==r[0]?!0:":"==r[1]&&"\\"==r[2]?!0:"\\\\"==r.substring(0,2)?!0:void 0},exports.flatten=function(r,t){var e,n;for(t=t||[],e=r.length,n=0;e>n;++n)Array.isArray(r[n])?exports.flatten(r[n],t):t.push(r[n]);return t},exports.normalizeType=function(r){return~r.indexOf("/")?acceptParams(r):{value:mime.lookup(r),params:{}}},exports.normalizeTypes=function(r){var t,e=[];for(t=0;t<r.length;++t)e.push(exports.normalizeType(r[t]));return e},exports.acceptsArray=function(r,t){var e,n,a,p,o,u;if(!t)return r[0];for(e=exports.parseAccept(t),n=exports.normalizeTypes(r),a=e.length,p=0;a>p;++p)for(o=0,u=r.length;u>o;++o)if(exports.accept(n[o],e[p]))return r[o]},exports.accepts=function(r,t){return"string"==typeof r&&(r=r.split(/ *, */)),exports.acceptsArray(r,t)},exports.accept=function(r,t){var e=r.value.split("/");return(e[0]==t.type||"*"==t.type)&&(e[1]==t.subtype||"*"==t.subtype)&&paramsEqual(r.params,t.params)},exports.parseAccept=function(r){return exports.parseParams(r).map(function(r){var t=r.value.split("/");return r.type=t[0],r.subtype=t[1],r})},exports.parseParams=function(r){return r.split(/ *, */).map(acceptParams).filter(function(r){return r.quality}).sort(function(r,t){return r.quality===t.quality?r.originalIndex-t.originalIndex:t.quality-r.quality})},exports.escape=function(r){return(r+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exports.pathRegexp=function(r,t,e,n){return"[object RegExp]"==toString.call(r)?r:(Array.isArray(r)&&(r="("+r.join("|")+")"),r=r.concat(n?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g,function(r,e,n,a,p,o,u){return t.push({name:a,optional:!!o}),e=e||"",""+(o?"":e)+"(?:"+(o?e:"")+(n||"")+(p||n&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")+(u?"(/*)?":"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),RegExp("^"+r+"$",e?"":"i"))},exports.decode=function(r){try{return decodeURIComponent(r)}catch(t){return r}};