var fs=null,join=null.join,resolve=null.resolve,dirname=null.dirname,requireDirectory=module.exports=function(e,n,r,i){var t=function(e,n){return"."!==n[0]&&/\.(js|coffee)$/i.test(n)},o=t,l={};return n||(n=dirname(e.filename)),r instanceof RegExp?o=function(e,n){return t(e,n)?r.test(e)?!1:!0:!1}:r&&"[object Function]"==={}.toString.call(r)&&(o=r),n=resolve(n),fs.readdirSync(n).forEach(function(r){var t,u=join(n,r);fs.statSync(u).isDirectory()?l[r]=requireDirectory(e,u,o,i):u!==e.filename&&o(u,r)&&(t=r.substring(0,r.lastIndexOf(".")),l[t]=e.require(u),i&&"function"==typeof i&&i(null,l[t]))}),l};