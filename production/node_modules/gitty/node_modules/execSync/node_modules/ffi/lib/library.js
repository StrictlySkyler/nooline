function Library(r,n,i){debug("creating Library object for",r),r&&-1===r.indexOf(EXT)&&(debug("appending library extension to library name",EXT),r+=EXT),i||(i={});var o=new DynamicLibrary(r||null,RTLD_NOW);return Object.keys(n||{}).forEach(function(a){var e,u,l,b,c,s,t,y,d;if(debug("defining function",a),e=o.get(a),u=n[a],e.isNull())throw Error('Library: "'+r+'" returned NULL function pointer for "'+a+'"');l=u[0],b=u[1],c=u[2],s=c&&c.abi,t=c&&c.async,y=c&&c.varargs,y?i[a]=VariadicForeignFunction(e,l,b,s):(d=ForeignFunction(e,l,b,s),i[a]=t?d.async:d)}),i}var DynamicLibrary=null,ForeignFunction=null,VariadicForeignFunction=null,debug=null,RTLD_NOW=DynamicLibrary.FLAGS.RTLD_NOW,EXT=Library.EXT={linux:".so",linux2:".so",sunos:".so",solaris:".so",freebsd:".so",openbsd:".so",darwin:".dylib",mac:".dylib",win32:".dll"}[process.platform];module.exports=Library;