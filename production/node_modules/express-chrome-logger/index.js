var util=require("util"),config=require("./package.json"),encode=function(r){return new Buffer(JSON.stringify(r)).toString("base64")};module.exports=function(r,o,e){var n={version:config.version,columns:["log","backtrace","type"],rows:[]},t=function(r,e){return e=e?e:2,function(){try{n.rows.push([Array.prototype.slice.call(arguments).map(function(r){return r&&"object"==typeof r?(r.___class_name=r.constructor.name,r):r+""}),Error().stack.split("\n")[e].trim(),r]),o.headerSent||o.set("X-ChromeLogger-Data",encode(n))}catch(u){n.rows.pop(),t("error",3)(""+u)}}};o.console={log:t(""),info:t(""),debug:t(""),table:t("table"),warn:t("warn"),error:t("error"),group:t("group"),groupEnd:t("groupEnd"),groupCollapsed:t("groupCollapsed"),dir:function(r){t("",3)(util.inspect(r))},groupAs:function(r,o){t("groupCollapsed",3)(r),o(),t("groupEnd",3)()},assert:function(r,o){r||t("error",3)("Assertion failed: "+o)},groupAssert:function(r,o,e){r||(t("groupCollapsed",3)("Assertion failed: "+o),e(),t("groupEnd",3)())}},"function"==typeof e&&e()};