function RSS(t,e){t=t||{},this.title=t.title||"Untitled RSS Feed",this.description=t.description||"",this.generator=t.generator||"RSS for Node",this.feed_url=t.feed_url,this.site_url=t.site_url,this.image_url=t.image_url,this.author=t.author,this.categories=t.categories,this.pubDate=t.pubDate,this.docs=t.docs,this.copyright=t.copyright,this.language=t.language,this.managingEditor=t.managingEditor,this.webMaster=t.webMaster,this.ttl=t.ttl,this.geoRSS=t.geoRSS||!1,this.items=e||[],this.item=function(t){t=t||{};var e={title:t.title||"No title",description:t.description||"",url:t.url,guid:t.guid,categories:t.categories||[],author:t.author,date:t.date,lat:t.lat,"long":t.long,enclosure:t.enclosure||!1};return this.items.push(e),this},this.xml=function(t){return'<?xml version="1.0" encoding="UTF-8"?>\n'+XML(generateXML(this),t)}}function ifTruePush(t,e,r){t&&e.push(r)}function generateXML(t){var e,r=[];return r.push({title:{_cdata:t.title}}),r.push({description:{_cdata:t.description||t.title}}),r.push({link:t.site_url||"http://github.com/dylan/node-rss"}),t.image_url&&r.push({image:[{url:t.image_url},{title:t.title},{link:t.site_url}]}),r.push({generator:t.generator}),r.push({lastBuildDate:(new Date).toGMTString()}),ifTruePush(t.feed_url,r,{"atom:link":{_attr:{href:t.feed_url,rel:"self",type:"application/rss+xml"}}}),ifTruePush(t.author,r,{author:{_cdata:t.author}}),ifTruePush(t.pubDate,r,{pubDate:new Date(t.pubDate).toGMTString()}),ifTruePush(t.copyright,r,{copyright:{_cdata:t.copyright}}),ifTruePush(t.language,r,{language:{_cdata:t.language}}),ifTruePush(t.managingEditor,r,{managingEditor:{_cdata:t.managingEditor}}),ifTruePush(t.webMaster,r,{webMaster:{_cdata:t.webMaster}}),ifTruePush(t.docs,r,{docs:t.docs}),ifTruePush(t.ttl,r,{ttl:t.ttl}),t.categories&&t.categories.forEach(function(t){ifTruePush(t,r,{category:{_cdata:t}})}),t.items.forEach(function(e){var i=[{title:{_cdata:e.title}}];ifTruePush(e.description,i,{description:{_cdata:e.description}}),ifTruePush(e.url,i,{link:e.url}),ifTruePush(e.link||e.guid||e.title,i,{guid:[{_attr:{isPermaLink:!e.guid&&!!e.url}},e.guid||e.url||e.title]}),e.categories.forEach(function(t){ifTruePush(t,i,{category:{_cdata:t}})}),ifTruePush(e.author||t.author,i,{"dc:creator":{_cdata:e.author||t.author}}),ifTruePush(e.date,i,{pubDate:new Date(e.date).toGMTString()}),t.geoRSS=t.geoRSS||e.lat&&e.long,ifTruePush(e.lat,i,{"geo:lat":e.lat}),ifTruePush(e.long,i,{"geo:long":e.long}),e.enclosure&&e.enclosure.url&&(e.enclosure.file?i.push({enclosure:{_attr:{url:e.enclosure.url,length:fs.statSync(e.enclosure.file).size,type:mime.lookup(e.enclosure.file)}}}):i.push({enclosure:{_attr:{url:e.enclosure.url,length:e.enclosure.size||0,type:mime.lookup(e.enclosure.url)}}})),r.push({item:i})}),e={"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:content":"http://purl.org/rss/1.0/modules/content/","xmlns:atom":"http://www.w3.org/2005/Atom",version:"2.0"},t.geoRSS&&(e["xmlns:geo"]="http://www.w3.org/2003/01/geo/wgs84_pos#"),{rss:[{_attr:e},{channel:r}]}}var XML=null,mime=null,fs=null;module.exports=RSS;