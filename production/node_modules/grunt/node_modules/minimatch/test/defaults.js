function alpha(a,b){return a>b?1:-1}var tap=require("tap"),globalBefore=Object.keys(global),mm=require("../"),files=["a","b","c","d","abc","abd","abe","bb","bcd","ca","cb","dd","de","bdir/","bdir/cfile"],next=files.concat(["a-b","aXb",".x",".y"]);tap.test("basic tests",function(a){var b=Date.now();["http://www.bashcookbook.com/bashinfo/source/bash-1.14.7/tests/glob-test",["a*",["a","abc","abd","abe"]],["X*",["X*"],{nonull:!0}],["X*",[]],["\\*",["\\*"],{nonull:!0}],["\\**",["\\**"],{nonull:!0}],["\\*\\*",["\\*\\*"],{nonull:!0}],["b*/",["bdir/"]],["c*",["c","ca","cb"]],["**",files],["\\.\\./*/",["\\.\\./*/"],{nonull:!0}],["s/\\..*//",["s/\\..*//"],{nonull:!0}],"legendary larry crashes bashes",["/^root:/{s/^[^:]*:[^:]*:([^:]*).*$/\\1/",["/^root:/{s/^[^:]*:[^:]*:([^:]*).*$/\\1/"],{nonull:!0}],["/^root:/{s/^[^:]*:[^:]*:([^:]*).*$//",["/^root:/{s/^[^:]*:[^:]*:([^:]*).*$//"],{nonull:!0}],"character classes",["[a-c]b*",["abc","abd","abe","bb","cb"]],["[a-y]*[^c]",["abd","abe","bb","bcd","bdir/","ca","cb","dd","de"]],["a*[^c]",["abd","abe"]],function(){files.push("a-b","aXb")},["a[X-]b",["a-b","aXb"]],function(){files.push(".x",".y")},["[^a-c]*",["d","dd","de"]],function(){files.push("a*b/","a*b/ooo")},["a\\*b/*",["a*b/ooo"]],["a\\*?/*",["a*b/ooo"]],["*\\\\!*",[],{"null":!0},["echo !7"]],["*\\!*",["echo !7"],null,["echo !7"]],["*.\\*",["r.*"],null,["r.*"]],["a[b]c",["abc"]],["a[\\b]c",["abc"]],["a?c",["abc"]],["a\\*c",[],{"null":!0},["abc"]],["",[""],{"null":!0},[""]],"http://www.opensource.apple.com/source/bash/bash-23/bash/tests/glob-test",function(){files.push("man/","man/man1/","man/man1/bash.1")},["*/man*/bash.*",["man/man1/bash.1"]],["man/man1/bash.1",["man/man1/bash.1"]],["a***c",["abc"],null,["abc"]],["a*****?c",["abc"],null,["abc"]],["?*****??",["abc"],null,["abc"]],["*****??",["abc"],null,["abc"]],["?*****?c",["abc"],null,["abc"]],["?***?****c",["abc"],null,["abc"]],["?***?****?",["abc"],null,["abc"]],["?***?****",["abc"],null,["abc"]],["*******c",["abc"],null,["abc"]],["*******?",["abc"],null,["abc"]],["a*cd**?**??k",["abcdecdhjk"],null,["abcdecdhjk"]],["a**?**cd**?**??k",["abcdecdhjk"],null,["abcdecdhjk"]],["a**?**cd**?**??k***",["abcdecdhjk"],null,["abcdecdhjk"]],["a**?**cd**?**??***k",["abcdecdhjk"],null,["abcdecdhjk"]],["a**?**cd**?**??***k**",["abcdecdhjk"],null,["abcdecdhjk"]],["a****c**?**??*****",["abcdecdhjk"],null,["abcdecdhjk"]],["[-abc]",["-"],null,["-"]],["[abc-]",["-"],null,["-"]],["\\",["\\"],null,["\\"]],["[\\\\]",["\\"],null,["\\"]],["[[]",["["],null,["["]],["[",["["],null,["["]],["[*",["[abc"],null,["[abc"]],"a right bracket shall lose its special meaning and\nrepresent itself in a bracket expression if it occurs\nfirst in the list.  -- POSIX.2 2.8.3.2",["[]]",["]"],null,["]"]],["[]-]",["]"],null,["]"]],["[a-z]",["p"],null,["p"]],["??**********?****?",[],{"null":!0},["abc"]],["??**********?****c",[],{"null":!0},["abc"]],["?************c****?****",[],{"null":!0},["abc"]],["*c*?**",[],{"null":!0},["abc"]],["a*****c*?**",[],{"null":!0},["abc"]],["a********???*******",[],{"null":!0},["abc"]],["[]",[],{"null":!0},["a"]],["[abc",[],{"null":!0},["["]],"nocase tests",["XYZ",["xYz"],{nocase:!0,"null":!0},["xYz","ABC","IjK"]],["ab*",["ABC"],{nocase:!0,"null":!0},["xYz","ABC","IjK"]],["[ia]?[ck]",["ABC","IjK"],{nocase:!0,"null":!0},["xYz","ABC","IjK"]],"onestar/twostar",["{/*,*}",[],{"null":!0},["/asdf/asdf/asdf"]],["{/?,*}",["/a","bb"],{"null":!0},["/a","/b/b","/a/b/c","bb"]],"dots should not match unless requested",["**",["a/b"],{},["a/b","a/.d",".a/.d"]],function(){files=["a/./b","a/../b","a/c/b","a/.d/b"]},["a/*/b",["a/c/b","a/.d/b"],{dot:!0}],["a/.*/b",["a/./b","a/../b","a/.d/b"],{dot:!0}],["a/*/b",["a/c/b"],{dot:!1}],["a/.*/b",["a/./b","a/../b","a/.d/b"],{dot:!1}],["**",["a/b","a/.d",".a/.d"],{dot:!0},[".a/.d","a/.d","a/b"]],"paren sets cannot contain slashes",["*(a/b)",["*(a/b)"],{nonull:!0},["a/b"]],["*(a|{b),c)}",["a","ab","ac"],{},["a","ab","ac","ad"]],["[!a*",["[!ab"],{},["[!ab","[ab"]],["[#a*",["[#ab"],{},["[#ab","[ab"]],["+(a|*\\|c\\\\|d\\\\\\|e\\\\\\\\|f\\\\\\\\\\|g",["+(a|b\\|c\\\\|d\\\\|e\\\\\\\\|f\\\\\\\\|g"],{},["+(a|b\\|c\\\\|d\\\\|e\\\\\\\\|f\\\\\\\\|g","a","b\\c"]],function(){files=["a","b","c","d","ab","ac","ad","bc","cb","bc,d","c,db","c,d","d)","(b|c","*(b|c","b|c","b|cc","cb|c","x(a|b|c)","x(a|c)","(a|b|c)","(a|c)"]},["*(a|{b,c})",["a","b","c","ab","ac"]],["{a,*(b|c,d)}",["a","(b|c","*(b|c","d)"]],["{a,*(b|{c,d})}",["a","b","bc","cb","c","d"]],["*(a|{b|c,c})",["a","b","c","ab","ac","bc","cb"]],["*(a|{b|c,c})",["x(a|b|c)","x(a|c)","(a|b|c)","(a|c)"],{noext:!0}],["a?b",["x/y/acb","acb/"],{matchBase:!0},["x/y/acb","acb/","acb/d/e","x/y/acb/d"]],["#*",["#a","#b"],{nocomment:!0},["#a","#b","c#d"]],"negation tests",function(){files=["d","e","!ab","!abc","a!b","\\!a"]},["!a*",["\\!a","d","e","!ab","!abc"]],["!a*",["!ab","!abc"],{nonegate:!0}],["!!a*",["a!b"]],["!\\!a*",["a!b","d","e","\\!a"]],function(){files=["foo.js","foo.bar","foo.js.js","blar.js","foo.","boo.js.boo"]},["*.!(js)",["foo.bar","foo.","boo.js.boo"]]].forEach(function(b){var c,l,n,e,o,s,t,d,u;return"function"==typeof b?b():"string"==typeof b?a.comment(b):(c=b[0],l=b[1].sort(alpha),n=b[2]||{},e=b[3]||files,o=b[4]||{},s=mm.defaults(n).Minimatch,t=new s(c,{}),d=t.makeRe(),o.re=d+""||JSON.stringify(d),o.files=JSON.stringify(e),o.pattern=c,o.set=t.set,o.negated=t.negate,u=mm.match(e,c,n),u.sort(alpha),a.equivalent(u,l,JSON.stringify(c)+" "+JSON.stringify(l),o),void 0)}),a.comment("time="+(Date.now()-b)+"ms"),a.end()}),tap.test("global leak test",function(a){var b=Object.keys(global);a.equivalent(b,globalBefore,"no new globals, please"),a.end()});