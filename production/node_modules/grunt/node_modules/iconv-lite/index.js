function toInternalEncoding(n){return new Buffer(ensureString(n),this.options.originalEncoding)}function fromInternalEncoding(n){return ensureBuffer(n).toString(this.options.originalEncoding)}function toTableEncoding(n){var e,r,o,i,t,c,f,a;for(n=ensureString(n),e=n.length,r=this.options.revCharsTable,t=new Buffer(2*e),c=r[iconv.defaultCharUnicode.charCodeAt(0)],f=0,a=0;e>f;f++)i=n.charCodeAt(f),i>>7?(o=r[i]||c,t[a++]=o>>8,t[a++]=255&o):t[a++]=i;return t.slice(0,a)}function fromTableEncoding(n){var e,r,o,i,t,c,f,a;for(n=ensureBuffer(n),e=n.length,r=this.options.table,t=new Buffer(2*e),c=iconv.defaultCharUnicode.charCodeAt(0),f=0,a=0;e>f;f++,a+=2)i=n[f],128&i?(i=(i<<8)+n[++f],o=r[i]||c):o=i,t[a]=255&o,t[a+1]=o>>8;return t.slice(0,a).toString("ucs2")}function toSingleByteEncoding(n){var e,r,o;for(n=ensureString(n),e=new Buffer(n.length),r=this.options.revCharsBuf,o=0;o<n.length;o++)e[o]=r[n.charCodeAt(o)];return e}function fromSingleByteEncoding(n){var e,r,o,i,t,c;for(n=ensureBuffer(n),e=this.options.charsBuf,r=new Buffer(2*n.length),o=0,i=0,t=0,c=n.length;c>t;t++)o=2*n[t],i=2*t,r[i]=e[o],r[i+1]=e[o+1];return r.toString("ucs2")}function loadEncodings(){iconv.encodingsLoaded||([null,null,null].forEach(function(n){for(var e in n)iconv.encodings[e]=n[e]}),iconv.encodingsLoaded=!0)}var asciiString,ensureBuffer,ensureString,getType,RE_SPACEDASH=/[- ]/g,iconv=module.exports={toEncoding:function(n,e){return iconv.getCodec(e).toEncoding(n)},fromEncoding:function(n,e){return iconv.getCodec(e).fromEncoding(n)},encodingExists:function(n){return loadEncodings(),n=n.replace(RE_SPACEDASH,"").toLowerCase(),void 0!==iconv.encodings[n]},defaultCharUnicode:"ï¿½",defaultCharSingleByte:"?",encodingsLoaded:!1,getCodec:function(n){var e,r,o,i;for(loadEncodings(),e=n||"utf8",r=void 0;;)if("String"===getType(e)&&(e=e.replace(RE_SPACEDASH,"").toLowerCase()),o=iconv.encodings[e],i=getType(o),"String"===i)r={originalEncoding:e},e=o;else{if("Object"!==i||void 0==o.type){if("Function"===i)return o(r);throw Error("Encoding not recognized: '"+n+"' (searched as: '"+e+"')")}r=o,e=o.type}},encodings:{internal:function(n){return{toEncoding:toInternalEncoding,fromEncoding:fromInternalEncoding,options:n}},utf8:"internal",ucs2:"internal",binary:"internal",ascii:"internal",base64:"internal",singlebyte:function(n){var e,r;if(!n.charsBuf){if(!n.chars||128!==n.chars.length&&256!==n.chars.length)throw Error("Encoding '"+n.type+"' has incorrect 'chars' (must be of len 128 or 256)");128===n.chars.length&&(n.chars=asciiString+n.chars),n.charsBuf=new Buffer(n.chars,"ucs2")}if(!n.revCharsBuf){for(n.revCharsBuf=new Buffer(65536),e=iconv.defaultCharSingleByte.charCodeAt(0),r=0;r<n.revCharsBuf.length;r++)n.revCharsBuf[r]=e;for(r=0;r<n.chars.length;r++)n.revCharsBuf[n.chars.charCodeAt(r)]=r}return{toEncoding:toSingleByteEncoding,fromEncoding:fromSingleByteEncoding,options:n}},table:function(n){var e,r,o,i;if(!n.table)throw Error("Encoding '"+n.type+"' has incorect 'table' option");if(!n.revCharsTable){for(e=n.revCharsTable={},r=0;65535>=r;r++)e[r]=0;o=n.table;for(i in o)e[o[i]]=+i}return{toEncoding:toTableEncoding,fromEncoding:fromTableEncoding,options:n}}}};iconv.encode=iconv.toEncoding,iconv.decode=iconv.fromEncoding,asciiString="\x00\b	\n\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",ensureBuffer=function(n){return n=n||new Buffer(0),n instanceof Buffer?n:new Buffer(""+n,"binary")},ensureString=function(n){return n=n||"",n instanceof Buffer?n.toString("utf8"):""+n},getType=function(n){return Object.prototype.toString.call(n).slice(8,-1)};