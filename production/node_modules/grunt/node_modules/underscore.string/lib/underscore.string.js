// Underscore.string
// (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>
// Underscore.strings is freely distributable under the terms of the MIT license.
// Documentation: https://github.com/epeli/underscore.string
// Some code is borrowed from MooTools and Alexandru Marasteanu.

// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>

!function(r){"use strict";var e,t,n,i=String.prototype.trim,u=String.prototype.trimRight,a=String.prototype.trimLeft,o=function(r){return 1*r||0},c=function(r,e,t){r+="",e=~~e;for(var n=[];e>0;n[--e]=r);return n.join(null==t?"":t)},s=function(r){return Array.prototype.slice.call(r)},l=function(r){return null!=r?"["+n.escapeRegExp(""+r)+"]":"\\s"},p={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},f={};for(e in p)f[p[e]]=e;t=function(){function r(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()}var e=c,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var u,a,o,c,s,l,p,f=1,h=n.length,g="",d=[];for(a=0;h>a;a++)if(g=r(n[a]),"string"===g)d.push(n[a]);else if("array"===g){if(c=n[a],c[2])for(u=i[f],o=0;o<c[2].length;o++){if(!u.hasOwnProperty(c[2][o]))throw Error(t('[_.sprintf] property "%s" does not exist',c[2][o]));u=u[c[2][o]]}else u=c[1]?i[c[1]]:i[f++];if(/[^s]/.test(c[8])&&"number"!=r(u))throw Error(t("[_.sprintf] expecting number but found %s",r(u)));switch(c[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=c[7]?u.toExponential(c[7]):u.toExponential();break;case"f":u=c[7]?parseFloat(u).toFixed(c[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u+="")&&c[7]?u.substring(0,c[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(c[8])&&c[3]&&u>=0?"+"+u:u,l=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",p=c[6]-(u+"").length,s=c[6]?e(l,p):"",d.push(c[5]?u+s:s+u)}return d.join("")},n.cache={},n.parse=function(r){for(var e,t,n,i=r,u=[],a=[],o=0;i;){if(null!==(u=/^[^\x25]+/.exec(i)))a.push(u[0]);else if(null!==(u=/^\x25{2}/.exec(i)))a.push("%");else{if(null===(u=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(i)))throw Error("[_.sprintf] huh?");if(u[2]){if(o|=1,e=[],t=u[2],n=[],null===(n=/^([a-z_][a-z_\d]*)/i.exec(t)))throw Error("[_.sprintf] huh?");for(e.push(n[1]);""!==(t=t.substring(n[0].length));)if(null!==(n=/^\.([a-z_][a-z_\d]*)/i.exec(t)))e.push(n[1]);else{if(null===(n=/^\[(\d+)\]/.exec(t)))throw Error("[_.sprintf] huh?");e.push(n[1])}u[2]=e}else o|=2;if(3===o)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");a.push(u)}i=i.substring(u[0].length)}return a},n}(),n={VERSION:"2.2.0rc",isBlank:function(r){return/^\s*$/.test(r)},stripTags:function(r){return(""+r).replace(/<\/?[^>]+>/g,"")},capitalize:function(r){return r+="",r.charAt(0).toUpperCase()+r.substring(1)},chop:function(r,e){var t,n;for(r+="",e=~~e||r.length,t=[],n=0;n<r.length;n+=e)t.push(r.slice(n,n+e));return t},clean:function(r){return n.strip(r).replace(/\s+/g," ")},count:function(r,e){return r+="",e+="",r.split(e).length-1},chars:function(r){return(""+r).split("")},escapeHTML:function(r){return(""+r).replace(/[&<>"']/g,function(r){return"&"+f[r]+";"})},unescapeHTML:function(r){return(""+r).replace(/\&([^;]+);/g,function(r,e){var t;return e in p?p[e]:(t=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(t[1],16)):(t=e.match(/^#(\d+)$/))?String.fromCharCode(~~t[1]):r})},escapeRegExp:function(r){return r.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(r,e,t){var i=n.chars(r);return i.splice(~~e,0,""+t),i.join("")},include:function(r,e){return!!~(""+r).indexOf(e)},join:function(){var r=s(arguments);return r.join(r.shift())},lines:function(r){return(""+r).split("\n")},reverse:function(r){return n.chars(r).reverse().join("")},splice:function(r,e,t,i){var u=n.chars(r);return u.splice(~~e,~~t,i),u.join("")},startsWith:function(r,e){return r+="",e+="",r.length>=e.length&&r.substring(0,e.length)===e},endsWith:function(r,e){return r+="",e+="",r.length>=e.length&&r.substring(r.length-e.length)===e},succ:function(r){r+="";var e=n.chars(r);return e.splice(r.length-1,1,String.fromCharCode(r.charCodeAt(r.length-1)+1)),e.join("")},titleize:function(r){return(""+r).replace(/\b./g,function(r){return r.toUpperCase()})},camelize:function(r){return n.trim(r).replace(/[-_\s]+(.)?/g,function(r,e){return e&&e.toUpperCase()})},underscored:function(r){return n.trim(r).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(r){return n.trim(r).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(r){return r+="",n.titleize(r.replace(/_/g," ")).replace(/\s/g,"")},humanize:function(r){return n.capitalize(this.underscored(r).replace(/_id$/,"").replace(/_/g," "))},trim:function(r,e){return r+="",!e&&i?i.call(r):(e=l(e),r.replace(RegExp("^"+e+"+|"+e+"+$","g"),""))},ltrim:function(r,e){return r+="",!e&&a?a.call(r):(e=l(e),r.replace(RegExp("^"+e+"+"),""))},rtrim:function(r,e){return r+="",!e&&u?u.call(r):(e=l(e),r.replace(RegExp(e+"+$"),""))},truncate:function(r,e,t){return r+="",t=t||"...",e=~~e,r.length>e?r.slice(0,e)+t:r},prune:function(r,e,t){r+="",e=~~e,t=null!=t?""+t:"...";var i,u,a=r.replace(/\W/g,function(r){return r.toUpperCase()!==r.toLowerCase()?"A":" "});return u=a.charAt(e),i=a.slice(0,e),u&&u.match(/\S/)&&(i=i.replace(/\s\S+$/,"")),i=n.rtrim(i),(i+t).length>r.length?r:r.substring(0,i.length)+t},words:function(r,e){return n.trim(r,e).split(e||/\s+/)},pad:function(r,e,t,n){r+="";var i=0;switch(e=~~e,t?t.length>1&&(t=t.charAt(0)):t=" ",n){case"right":return i=e-r.length,r+c(t,i);case"both":return i=e-r.length,c(t,Math.ceil(i/2))+r+c(t,Math.floor(i/2));default:return i=e-r.length,c(t,i)+r}},lpad:function(r,e,t){return n.pad(r,e,t)},rpad:function(r,e,t){return n.pad(r,e,t,"right")},lrpad:function(r,e,t){return n.pad(r,e,t,"both")},sprintf:t,vsprintf:function(r,e){return e.unshift(r),t.apply(null,e)},toNumber:function(r,e){r+="";var t=o(o(r).toFixed(~~e));return 0!==t||r.match(/^0+$/)?t:Number.NaN},strRight:function(r,e){r+="",e=null!=e?""+e:e;var t=e?r.indexOf(e):-1;return~t?r.slice(t+e.length,r.length):r},strRightBack:function(r,e){r+="",e=null!=e?""+e:e;var t=e?r.lastIndexOf(e):-1;return~t?r.slice(t+e.length,r.length):r},strLeft:function(r,e){r+="",e=null!=e?""+e:e;var t=e?r.indexOf(e):-1;return~t?r.slice(0,t):r},strLeftBack:function(r,e){r+="",e=null!=e?""+e:e;var t=r.lastIndexOf(e);return~t?r.slice(0,t):r},toSentence:function(r,e,t){var n,i,u;for(e||(e=", "),t||(t=" and "),n=r.length,i="",u=0;n>u;u++)i+=r[u],u===n-2?i+=t:n-1>u&&(i+=e);return i},slugify:function(r){var e="ąàáäâãćęèéëêìíïîłńòóöôõùúüûñçżź",t="aaaaaaceeeeeiiiilnooooouuuunczz",i=RegExp(l(e),"g");return r=(""+r).toLowerCase(),r=r.replace(i,function(r){var n=e.indexOf(r);return t.charAt(n)||"-"}),n.trim(r.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var r,e={};for(r in this)this.hasOwnProperty(r)&&!~n.words("include contains reverse").indexOf(r)&&(e[r]=this[r]);return e},repeat:c},n.strip=n.trim,n.lstrip=n.ltrim,n.rstrip=n.rtrim,n.center=n.lrpad,n.rjust=n.lpad,n.ljust=n.rpad,n.contains=n.include,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=n),exports._s=n):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return n}):(r._=r._||{},r._.string=r._.str=n)}(this||window);