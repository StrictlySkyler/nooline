(function(){var n,t,r,e,s,a,i,l;exports.OptionParser=e=function(){function t(n,t){this.banner=t,this.rules=i(n)}return t.prototype.parse=function(t){var r,e,a,i,o,h,u,g,c,f,p,m,F,b,v,w;for(o={arguments:[]},f=!1,h=t,t=l(t),e=m=0,b=t.length;b>m;e=++m)if(r=t[e],f)f=!1;else{if("--"===r){u=h.indexOf("--"),o.arguments=o.arguments.concat(h.slice(u+1));break}if(a=!(!r.match(n)&&!r.match(s)),c=o.arguments.length>0,!c){for(i=!1,w=this.rules,F=0,v=w.length;v>F;F++)if(g=w[F],g.shortFlag===r||g.longFlag===r){p=!0,g.hasArgument&&(f=!0,p=t[e+1]),o[g.name]=g.isList?(o[g.name]||[]).concat(p):p,i=!0;break}if(a&&!i)throw Error("unrecognized option: "+r)}(c||!a)&&o.arguments.push(r)}return o},t.prototype.help=function(){var n,t,r,e,s,a,i;for(t=[],this.banner&&t.unshift(""+this.banner+"\n"),i=this.rules,s=0,a=i.length;a>s;s++)r=i[s],e=15-r.longFlag.length,e=e>0?Array(e+1).join(" "):"",n=r.shortFlag?r.shortFlag+", ":"    ",t.push("  "+n+r.longFlag+e+r.description);return"\n"+t.join("\n")+"\n"},t}(),n=/^(--\w[\w\-]*)/,s=/^(-\w)$/,t=/^-(\w{2,})/,r=/\[(\w+(\*?))\]/,i=function(n){var t,r,e,s;for(s=[],r=0,e=n.length;e>r;r++)t=n[r],t.length<3&&t.unshift(null),s.push(a.apply(null,t));return s},a=function(t,e,s,a){var i;return null==a&&(a={}),i=e.match(r),e=e.match(n)[1],{name:e.substr(2),shortFlag:t,longFlag:e,description:s,hasArgument:!(!i||!i[1]),isList:!(!i||!i[2])}},l=function(n){var r,e,s,a,i,l,o,h,u;for(n=n.slice(0),a=[],i=0,o=n.length;o>i;i++)if(r=n[i],s=r.match(t))for(u=s[1].split(""),l=0,h=u.length;h>l;l++)e=u[l],a.push("-"+e);else a.push(r);return a}}).call(this);