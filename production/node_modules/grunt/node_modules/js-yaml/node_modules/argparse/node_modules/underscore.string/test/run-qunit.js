function waitFor(e,t,n){var a,o=(new Date).getTime();setInterval(function l(){(new Date).getTime()-o<n&&!a?a=e():a?(t(),clearInterval(l)):phantom.exit(1)},100)}var fs=null.create(),url="file://localhost"+fs.workingDirectory+"/"+phantom.args[0];page.onConsoleMessage=function(e){console.log(e)},page.open(url,function(){waitFor(function(){return page.evaluate(function(){var e=document.getElementById("qunit-testresult");return e&&e.innerText.match("completed")})},function(){var e=page.evaluate(function(){var e,t=document.getElementById("qunit-testresult"),n=document.getElementsByClassName("fail");for(e=0;e<n.length;e++)console.log(n[e].innerText);return console.log(t.innerText),parseInt(t.getElementsByClassName("failed")[0].innerHTML)});phantom.exit(e>0?1:0)},1e4)});