"use strict";var $$,ActionHelp,ActionAppend,ActionAppendConstant,ActionCount,ActionStore,ActionStoreConstant,ActionStoreTrue,ActionStoreFalse,ActionVersion,ActionSubparsers,argumentErrorHelper,ActionContainer,ArgumentGroup,MutuallyExclusiveGroup,format=null.format,_=null;_.str=null,$$=null,ActionHelp=null,ActionAppend=null,ActionAppendConstant=null,ActionCount=null,ActionStore=null,ActionStoreConstant=null,ActionStoreTrue=null,ActionStoreFalse=null,ActionVersion=null,ActionSubparsers=null,argumentErrorHelper=null,ActionContainer=module.exports=function(t){t=t||{},this.description=t.description,this.argumentDefault=t.argumentDefault,this.prefixChars=t.prefixChars||"",this.conflictHandler=t.conflictHandler,this._registries={},this.register("action",null,ActionStore),this.register("action","store",ActionStore),this.register("action","storeConst",ActionStoreConstant),this.register("action","storeTrue",ActionStoreTrue),this.register("action","storeFalse",ActionStoreFalse),this.register("action","append",ActionAppend),this.register("action","appendConst",ActionAppendConstant),this.register("action","count",ActionCount),this.register("action","help",ActionHelp),this.register("action","version",ActionVersion),this.register("action","parsers",ActionSubparsers),this._getHandler(),this._actions=[],this._optionStringActions={},this._actionGroups=[],this._mutuallyExclusiveGroups=[],this._defaults={},this._regexpNegativeNumber=RegExp("^[-]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"),this._hasNegativeNumberOptionals=[]},ArgumentGroup=null,MutuallyExclusiveGroup=null,ActionContainer.prototype.register=function(t,i,n){this._registries[t]=this._registries[t]||{},this._registries[t][i]=n},ActionContainer.prototype._registryGet=function(t,i,n){return 3>arguments.length&&(n=null),this._registries[t][i]||n},ActionContainer.prototype.setDefaults=function(t){t=t||{};for(var i in t)this._defaults[i]=t[i];this._actions.forEach(function(i){i.dest in t&&(i.defaultValue=t[i.dest])})},ActionContainer.prototype.getDefault=function(t){var i=_.has(this._defaults,t)?this._defaults[t]:null;return this._actions.forEach(function(n){n.dest===t&&_.has(n,"defaultValue")&&(i=n.defaultValue)}),i},ActionContainer.prototype.addArgument=function(t,i){var n,o,r,e;if(t=t,i=i||{},!_.isArray(t))throw new TypeError("addArgument first argument should be an array");if(!_.isObject(i)||_.isArray(i))throw new TypeError("addArgument second argument should be a hash");if(!t||1===t.length&&this.prefixChars.indexOf(t[0][0])<0){if(t&&i.dest)throw Error("dest supplied twice for positional argument");i=this._getPositional(t,i)}else i=this._getOptional(t,i);if(_.isUndefined(i.defaultValue)&&(n=i.dest,_.has(this._defaults,n)?i.defaultValue=this._defaults[n]:_.isUndefined(this.argumentDefault)||(i.defaultValue=this.argumentDefault)),o=this._popActionClass(i),!_.isFunction(o))throw Error(format('Unknown action "%s".',o));if(r=new o(i),e=this._registryGet("type",r.type,r.type),!_.isFunction(e))throw Error(format('"%s" is not callable',e));return this._addAction(r)},ActionContainer.prototype.addArgumentGroup=function(t){var i=new ArgumentGroup(this,t);return this._actionGroups.push(i),i},ActionContainer.prototype.addMutuallyExclusiveGroup=function(t){var i=new MutuallyExclusiveGroup(this,t);return this._mutuallyExclusiveGroups.push(i),i},ActionContainer.prototype._addAction=function(t){var i=this;return this._checkConflict(t),this._actions.push(t),t.container=this,t.optionStrings.forEach(function(n){i._optionStringActions[n]=t}),t.optionStrings.forEach(function(t){t.match(i._regexpNegativeNumber)&&(_.any(i._hasNegativeNumberOptionals)||i._hasNegativeNumberOptionals.push(!0))}),t},ActionContainer.prototype._removeAction=function(t){var i=this._actions.indexOf(t);i>=0&&this._actions.splice(i,1)},ActionContainer.prototype._addContainerActions=function(t){function i(t){return t.getName()}var n,o,r={};this._actionGroups.forEach(function(t){if(r[t.title])throw Error(format('Cannot merge actions - two groups are named "%s".',t.title));r[t.title]=t}),n={},t._actionGroups.forEach(function(t){r[t.title]||(r[t.title]=this.addArgumentGroup({title:t.title,description:t.description})),t._groupActions.forEach(function(o){n[i(o)]=r[t.title]})},this),t._mutuallyExclusiveGroups.forEach(function(t){o=this.addMutuallyExclusiveGroup({required:t.required}),t._groupActions.forEach(function(t){n[i(t)]=o})},this),t._actions.forEach(function(t){var o=i(t);n[o]?n[o]._addAction(t):this._addAction(t)})},ActionContainer.prototype._getPositional=function(t,i){if(_.isArray(t)&&(t=_.first(t)),i.required)throw Error('"required" is an invalid argument for positionals.');return i.nargs!==$$.OPTIONAL&&i.nargs!==$$.ZERO_OR_MORE&&(i.required=!0),i.nargs===$$.ZERO_OR_MORE&&void 0===i.defaultValue&&(i.required=!0),i.dest=t,i.optionStrings=[],i},ActionContainer.prototype._getOptional=function(t,i){var n,o,r=this.prefixChars,e=[],s=[];if(t.forEach(function(t){if(r.indexOf(t[0])<0)throw Error(format('Invalid option string "%s": must start with a "%s".',t,r));e.push(t),t.length>1&&r.indexOf(t[1])>=0&&s.push(t)}),n=i.dest||null,delete i.dest,!n){if(o=s.length?s[0]:e[0],n=_.str.strip(o,this.prefixChars),0===n.length)throw Error(format('dest= is required for options like "%s"',e.join(", ")));n=n.replace(/-/g,"_")}return i.dest=n,i.optionStrings=e,i},ActionContainer.prototype._popActionClass=function(t,i){var n,o;return i=i||null,n=t.action||i,delete t.action,o=this._registryGet("action",n,n)},ActionContainer.prototype._getHandler=function(){var t,i=this.conflictHandler,n="_handleConflict"+_.str.capitalize(i),o=this[n];if(void 0===o)throw t="invalid conflict resolution value: "+i,Error(t);return o},ActionContainer.prototype._checkConflict=function(t){var i,n=this._optionStringActions,o=[];t.optionStrings.forEach(function(t){var i=n[t];void 0!==i&&o.push([t,i])}),o.length>0&&(i=this._getHandler(),i.call(this,t,o))},ActionContainer.prototype._handleConflictError=function(t,i){var n=_.map(i,function(t){return t[0]});throw n=n.join(", "),argumentErrorHelper(t,format("Conflicting option string(s): %s",n))},ActionContainer.prototype._handleConflictResolve=function(t,i){var n=this;i.forEach(function(t){var i=t[0],o=t[1],r=o.optionStrings.indexOf(i);r>=0&&o.optionStrings.splice(r,1),delete n._optionStringActions[i],0===o.optionStrings.length&&o.container._removeAction(o)})};