"use strict";function Section(t,e){this._parent=t,this._heading=e,this._items=[]}var $$,HelpFormatter,_=null;_.str=null,$$=null,Section.prototype.addItem=function(t){this._items.push(t)},Section.prototype.formatHelp=function(t){var e,r,n;return this._parent&&t._indent(),e=this._items.map(function(e){var r,n,i;return r=t,n=e[0],i=e[1],n.apply(r,i)}),e=t._joinParts(e),this._parent&&t._dedent(),e?(r="",this._heading&&this._heading!==$$.SUPPRESS&&(n=t.currentIndent,r=_.str.repeat(" ",n)+this._heading+":"+$$.EOL),t._joinParts([$$.EOL,r,e,$$.EOL])):""},HelpFormatter=module.exports=function(t){t=t||{},this._prog=t.prog,this._maxHelpPosition=t.maxHelpPosition||24,this._width=t.width||(process.env.COLUMNS||80)-2,this._currentIndent=0,this._indentIncriment=t.indentIncriment||2,this._level=0,this._actionMaxLength=0,this._rootSection=new Section(null),this._currentSection=this._rootSection,this._whitespaceMatcher=RegExp("\\s+","g"),this._longBreakMatcher=RegExp($$.EOL+$$.EOL+$$.EOL+"+","g")},HelpFormatter.prototype._indent=function(){this._currentIndent+=this._indentIncriment,this._level+=1},HelpFormatter.prototype._dedent=function(){if(this._currentIndent-=this._indentIncriment,this._level-=1,this._currentIndent<0)throw Error("Indent decreased below 0.")},HelpFormatter.prototype._addItem=function(t,e){this._currentSection.addItem([t,e])},HelpFormatter.prototype.startSection=function(t){var e,r;this._indent(),e=new Section(this._currentSection,t),r=e.formatHelp.bind(e),this._addItem(r,[this]),this._currentSection=e},HelpFormatter.prototype.endSection=function(){this._currentSection=this._currentSection._parent,this._dedent()},HelpFormatter.prototype.addText=function(t){t&&t!==$$.SUPPRESS&&this._addItem(this._formatText,[t])},HelpFormatter.prototype.addUsage=function(t,e,r,n){t!==$$.SUPPRESS&&this._addItem(this._formatUsage,[t,e,r,n])},HelpFormatter.prototype.addArgument=function(t){var e,r,n,i;t.help!==$$.SUPPRESS&&(e=this,r=[this._formatActionInvocation(t)],n=r[0].length,t._getSubactions&&(this._indent(),t._getSubactions().forEach(function(t){var i=e._formatActionInvocation(t);r.push(i),n=Math.max(n,i.length)}),this._dedent()),i=n+this._currentIndent,this._actionMaxLength=Math.max(this._actionMaxLength,i),this._addItem(this._formatAction,[t]))},HelpFormatter.prototype.addArguments=function(t){var e=this;t.forEach(function(t){e.addArgument(t)})},HelpFormatter.prototype.formatHelp=function(){var t=this._rootSection.formatHelp(this);return t&&(t=t.replace(this._longBreakMatcher,$$.EOL+$$.EOL),t=_.str.strip(t,$$.EOL)+$$.EOL),t},HelpFormatter.prototype._joinParts=function(t){return t.filter(function(t){return!!t&&t!==$$.SUPPRESS}).join("")},HelpFormatter.prototype._formatUsage=function(t,e,r,n){var i,o,s,a,h,p,c,u,l,f,g,d,m,$;if(n||_.isString(n)||(n="usage: "),e=e||[],r=r||[],t)t=_.str.sprintf(t,{prog:this._prog});else if(t||0!==e.length){if(!t&&(i=this._prog,o=[],s=[],e.forEach(function(t){t.isOptional()?o.push(t):s.push(t)}),a=this._formatActionsUsage([].concat(o,s),r),t=[i,a].join(" "),h=this._width-this._currentIndent,n.length+t.length>h)){if(p=RegExp("\\(.*?\\)+|\\[.*?\\]+|\\S+","g"),c=this._formatActionsUsage(o,r),u=this._formatActionsUsage(s,r),l=c.match(p),f=u.match(p)||[],l.join(" ")!==c)throw Error("assert \"optionalParts.join(' ') === optionalUsage\"");if(f.join(" ")!==u)throw Error("assert \"positionalParts.join(' ') === positionalUsage\"");g=function(t,e,r){var n=[],i=[],o=r?r.length-1:e.length-1;return t.forEach(function(t){o+1+t.length>h&&(n.push(e+i.join(" ")),i=[],o=e.length-1),i.push(t),o+=t.length+1}),i&&n.push(e+i.join(" ")),r&&(n[0]=n[0].substr(e.length)),n},n.length+i.length<=.75*h?(m=_.str.repeat(" ",n.length+i.length+1),d=l?[].concat(g([i].concat(l),m,n),g(f,m)):f?g([i].concat(f),m,n):[i]):(m=_.str.repeat(" ",n.length),$=l+f,d=g($,m),d.length>1&&(d=[].concat(g(l,m),g(f,m))),d=[i]+d),t=d.join($$.EOL)}}else t=this._prog;return n+t+$$.EOL+$$.EOL},HelpFormatter.prototype._formatActionsUsage=function(t,e){var r,n,i,o=[],s=[],a=this;for(e.forEach(function(e){var r,n,i=t.indexOf(e._groupActions[0]);if(i>=0&&(r=i+e._groupActions.length,_.isEqual(t.slice(i,r),e._groupActions)))for(e._groupActions.forEach(function(t){o.push(t)}),e.required?(s[i]?s[i]+=" (":s[i]="(",s[r]=")"):(s[i]?s[i]+=" [":s[i]="[",s[r]="]"),n=i+1;r>n;n+=1)s[n]="|"}),r=[],t.forEach(function(t,e){var n,i,h,p;t.help===$$.SUPPRESS?(r.push(null),"|"===s[e]?s.splice(e,e):"|"===s[e+1]&&s.splice(e+1,e+1)):t.isOptional()?(i=t.optionStrings[0],0===t.nargs?n=""+i:(h=t.dest.toUpperCase(),p=a._formatArgs(t,h),n=i+" "+p),!t.required&&o.indexOf(t)<0&&(n="["+n+"]"),r.push(n)):(n=a._formatArgs(t,t.dest),o.indexOf(t)>=0&&"["===n[0]&&"]"===n[n.length-1]&&(n=n.slice(1,-1)),r.push(n))}),n=s.length-1;n>=0;--n)null!==s[n]&&r.splice(n,0,s[n]);return i=r.filter(function(t){return!!t}).join(" "),i=i.replace(/([\[(]) /g,"$1"),i=i.replace(/ ([\])])/g,"$1"),i=i.replace(/\[ *\]/g,""),i=i.replace(/\( *\)/g,""),i=i.replace(/\(([^|]*)\)/g,"$1"),i=_.str.strip(i)},HelpFormatter.prototype._formatText=function(t){var e,r;return t=_.str.sprintf(t,{prog:this._prog}),e=this._width-this._currentIndent,r=_.str.repeat(" ",this._currentIndent),this._fillText(t,e,r)+$$.EOL+$$.EOL},HelpFormatter.prototype._formatAction=function(t){var e,r,n,i,o=this,s=Math.min(this._actionMaxLength+2,this._maxHelpPosition),a=this._width-s,h=s-this._currentIndent-2,p=this._formatActionInvocation(t);return t.help?p.length<=h?(p=_.str.repeat(" ",this._currentIndent)+p+"  "+_.str.repeat(" ",h-p.length),i=0):(p=_.str.repeat(" ",this._currentIndent)+p+$$.EOL,i=s):p=_.str.repeat(" ",this._currentIndent)+p+$$.EOL,n=[p],t.help?(e=this._expandHelp(t),r=this._splitLines(e,a),n.push(_.str.repeat(" ",i)+r[0]+$$.EOL),r.slice(1).forEach(function(t){n.push(_.str.repeat(" ",s)+t+$$.EOL)})):p.charAt(p.length-1)!==$$.EOL&&n.push($$.EOL),t._getSubactions&&(this._indent(),t._getSubactions().forEach(function(t){n.push(o._formatAction(t))}),this._dedent()),this._joinParts(n)},HelpFormatter.prototype._formatActionInvocation=function(t){var e,r,n,i,o;return t.isOptional()?(n=[],0===t.nargs?n=n.concat(t.optionStrings):(i=t.dest.toUpperCase(),o=this._formatArgs(t,i),t.optionStrings.forEach(function(t){n.push(t+" "+o)})),n.join(", ")):(e=this._metavarFormatter(t,t.dest),r=e(1),r[0])},HelpFormatter.prototype._metavarFormatter=function(t,e){var r,n;return t.metavar||""===t.metavar?r=t.metavar:t.choices?(n=t.choices,n=_.isString(n)?n.split("").join(", "):_.isArray(n)?n.join(","):_.keys(n).join(","),r="{"+n+"}"):r=e,function(t){var e,n;if(Array.isArray(r))return r;for(e=[],n=0;t>n;n+=1)e.push(r);return e}},HelpFormatter.prototype._formatArgs=function(t,e){var r,n,i=this._metavarFormatter(t,e);switch(t.nargs){case void 0:case null:n=i(1),r=""+n[0];break;case $$.OPTIONAL:n=i(1),r="["+n[0]+"]";break;case $$.ZERO_OR_MORE:n=i(2),r="["+n[0]+" ["+n[1]+" ...]]";break;case $$.ONE_OR_MORE:n=i(2),r=""+n[0]+" ["+n[1]+" ...]";break;case $$.REMAINDER:r="...";break;case $$.PARSER:n=i(1),r=n[0]+" ...";break;default:n=i(t.nargs),r=n.join(" ")}return r},HelpFormatter.prototype._expandHelp=function(t){var e,r,n={prog:this._prog};for(e in t)t.hasOwnProperty(e)&&(r=t[e],r!==$$.SUPPRESS&&(n[e]=r));return n.choices&&(n.choices=_.isString(n.choices)?n.choices.split("").join(", "):_.isArray(n.choices)?n.choices.join(", "):_.keys(n.choices).join(", ")),_.str.sprintf(this._getHelpString(t),n)},HelpFormatter.prototype._splitLines=function(t,e){var r=[],n=[" ",".",",","!","?"],i=RegExp("["+n.join("")+"][^"+n.join("")+"]*$");return t=t.replace(/[\n\|\t]/g," "),t=_.str.strip(t),t=t.replace(this._whitespaceMatcher," "),t.split($$.EOL).forEach(function(t){var o,s,a;if(e>=t.length)return r.push(t),void 0;for(o=0,s=e,a=0;s<=t.length;)s!==t.length&&n.indexOf(t[s]<-1)&&(a=(i.exec(t.substring(o,s))||{}).index,s=o+a+1),r.push(t.substring(o,s)),o=s,s+=e;o<t.length&&r.push(t.substring(o,s))}),r},HelpFormatter.prototype._fillText=function(t,e,r){var n=this._splitLines(t,e);return n=n.map(function(t){return r+t}),n.join($$.EOL)},HelpFormatter.prototype._getHelpString=function(t){return t.help};