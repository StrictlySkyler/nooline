var test=null.test,fs=null;test("open an existing file works",function(e){var n=fs._curOpen,o=fs.openSync(__filename,"r");e.equal(fs._curOpen,n+1),fs.closeSync(o),e.equal(fs._curOpen,n),fs.open(__filename,"r",function(o,s){if(o)throw o;e.equal(fs._curOpen,n+1),fs.close(s,function(o){if(o)throw o;e.equal(fs._curOpen,n),e.end()})})}),test("open a non-existing file throws",function(e){var n,o,s=fs._curOpen;try{o=fs.openSync("this file does not exist","r")}catch(t){n=t}e.ok(n,"should throw"),e.notOk(o,"should not get an fd"),e.equal(n.code,"ENOENT"),e.equal(fs._curOpen,s),fs.open("neither does this file","r",function(n,o){e.ok(n,"should throw"),e.notOk(o,"should not get an fd"),e.equal(n.code,"ENOENT"),e.equal(fs._curOpen,s),e.end()})});