var glob,path,t=require("tap"),origCwd=process.cwd();process.chdir(__dirname),glob=null,path=null,t.test(".",function(o){glob("/b*/**",{globDebug:!0,root:"."},function(e,r){o.ifError(e),o.like(r,[]),o.end()})}),t.test("a",function(o){console.error("root="+path.resolve("a")),glob("/b*/**",{globDebug:!0,root:path.resolve("a")},function(e,r){o.ifError(e);var t=["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(o){return path.join(path.resolve("a"),o).replace(/\\/g,"/")});o.like(r,t),o.end()})}),t.test("root=a, cwd=a/b",function(o){glob("/b*/**",{globDebug:!0,root:"a",cwd:path.resolve("a/b")},function(e,r){o.ifError(e),o.like(r,["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(o){return path.join(path.resolve("a"),o).replace(/\\/g,"/")})),o.end()})}),t.test("cd -",function(o){process.chdir(origCwd),o.end()});