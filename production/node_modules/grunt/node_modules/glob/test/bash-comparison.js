function alphasort(e,r){return e=e.toLowerCase(),r=r.toLowerCase(),e>r?1:r>e?-1:0}function cleanResults(e){return e.map(function(e){return e.replace(/\/+/g,"/").replace(/\/$/,"")}).sort(alphasort).reduce(function(e,r){return r!==e[e.length-1]&&e.push(r),e},[]).sort(alphasort).map(function(e){return"win32"!==process.platform?e:e.replace(/^[a-zA-Z]:[\/\\]+/,"/").replace(/[\\\/]+/g,"/")})}var tap=require("tap"),child_process=require("child_process"),bashResults=require("./bash-results.json"),globs=Object.keys(bashResults),glob=require("../"),path=require("path");process.chdir(path.resolve(__dirname,"..")),globs.forEach(function(e){var r=bashResults[e];"win32"===process.platform&&r.some(function(e){return/\/symlink\//.test(e)})||(tap.test(e,function(s){glob(e,function(t,a){if(t)throw t;a=cleanResults(a),s.deepEqual(a,r,e),s.end()})}),tap.test(e+" sync",function(s){var t=cleanResults(glob.sync(e));s.deepEqual(t,r,"should match shell"),s.end()}))});