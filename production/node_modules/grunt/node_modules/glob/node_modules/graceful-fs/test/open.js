var test=null.test,fs=null;test("graceful fs is not fs",function(e){e.notEqual(fs,null),e.end()}),test("open an existing file works",function(e){var n=fs._curOpen,s=fs.openSync(__filename,"r");e.equal(fs._curOpen,n+1),fs.closeSync(s),e.equal(fs._curOpen,n),fs.open(__filename,"r",function(s,o){if(s)throw s;e.equal(fs._curOpen,n+1),fs.close(o,function(s){if(s)throw s;e.equal(fs._curOpen,n),e.end()})})}),test("open a non-existing file throws",function(e){var n,s,o=fs._curOpen;try{s=fs.openSync("this file does not exist","r")}catch(t){n=t}e.ok(n,"should throw"),e.notOk(s,"should not get an fd"),e.equal(n.code,"ENOENT"),e.equal(fs._curOpen,o),fs.open("neither does this file","r",function(n,s){e.ok(n,"should throw"),e.notOk(s,"should not get an fd"),e.equal(n.code,"ENOENT"),e.equal(fs._curOpen,o),e.end()})});