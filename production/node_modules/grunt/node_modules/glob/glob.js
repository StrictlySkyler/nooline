function glob(t,s,i){if("function"==typeof s&&(i=s,s={}),s||(s={}),"number"==typeof s)return deprecated(),void 0;var e=new Glob(t,s,i);return e.sync?e.found:e}function deprecated(){throw Error("glob's interface has changed. Please see the docs.")}function globSync(t,s){return"number"==typeof s?(deprecated(),void 0):(s=s||{},s.sync=!0,glob(t,s))}function Glob(t,s,i){function e(t,s){this._process(t,0,s,function(t){t&&this.emit("error",t),--h<=0&&this._finish()})}var r,o,h;if(!(this instanceof Glob))return new Glob(t,s,i);if("function"==typeof i&&(this.on("error",i),this.on("end",function(t){i(null,t)})),s=s||{},this.EOF={},this._emitQueue=[],this.maxDepth=s.maxDepth||1e3,this.maxLength=s.maxLength||1/0,this.statCache=s.statCache||{},this.changedCwd=!1,r=process.cwd(),s.hasOwnProperty("cwd")?(this.cwd=s.cwd,this.changedCwd=path.resolve(s.cwd)!==r):this.cwd=r,this.root=s.root||path.resolve(this.cwd,"/"),this.root=path.resolve(this.root),"win32"===process.platform&&(this.root=this.root.replace(/\\/g,"/")),this.nomount=!!s.nomount,!t)throw Error("must provide pattern");if(s.matchBase&&-1===t.indexOf("/")){if(s.noglobstar)throw Error("base matching requires globstar");t="**/"+t}this.strict=s.strict!==!1,this.dot=!!s.dot,this.mark=!!s.mark,this.sync=!!s.sync,this.nounique=!!s.nounique,this.nonull=!!s.nonull,this.nosort=!!s.nosort,this.nocase=!!s.nocase,this.stat=!!s.stat,this.debug=!!s.debug||!!s.globDebug,this.debug&&(this.log=console.error),this.silent=!!s.silent,o=this.minimatch=new Minimatch(t,s),this.options=o.options,t=this.pattern=o.pattern,this.error=null,this.aborted=!1,EE.call(this),h=this.minimatch.set.length,this.matches=Array(h),this.minimatch.set.forEach(e.bind(this))}function alphasorti(t,s){return t=t.toLowerCase(),s=s.toLowerCase(),alphasort(t,s)}function alphasort(t,s){return t>s?1:s>t?-1:0}function absWin(t){if(absUnix(t))return!0;var s=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,i=s.exec(t),e=i[1]||"",r=e&&":"!==e.charAt(1),o=!!i[2]||r;return o}function absUnix(t){return"/"===t.charAt(0)||""===t}var fs,minimatch,Minimatch,inherits,EE,path,isDir,assert,isAbsolute;module.exports=glob,fs=require("graceful-fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,inherits=require("inherits"),EE=require("events").EventEmitter,path=require("path"),isDir={},assert=require("assert").ok,glob.fnmatch=deprecated,glob.sync=globSync,glob.Glob=Glob,inherits(Glob,EE),Glob.prototype.log=function(){},Glob.prototype._finish=function(){var t,s,i,e,r,o,h;for(assert(this instanceof Glob),t=this.nounique,s=t?[]:{},i=0,e=this.matches.length;e>i;i++)r=this.matches[i],this.log("matches[%d] =",i,r),r?(h=Object.keys(r),t?s.push.apply(s,h):h.forEach(function(t){s[t]=!0})):this.nonull&&(o=this.minimatch.globSet[i],t?s.push(o):s[o]=!0);t||(s=Object.keys(s)),this.nosort||(s=s.sort(this.nocase?alphasorti:alphasort)),this.mark&&(s=s.map(function(t){var s,i=this.statCache[t];return i?(s=Array.isArray(i)||2===i,s&&"/"!==t.slice(-1)?t+"/":s||"/"!==t.slice(-1)?t:t.replace(/\/+$/,"")):t},this)),this.log("emitting end",s),this.EOF=this.found=s,this.emitMatch(this.EOF)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.sync&&this.emit("error",Error("Can't pause/resume sync glob")),this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){this.paused&&(this.sync&&this.emit("error",Error("Can't pause/resume sync glob")),this.paused=!1,this.emit("resume"),this._processEmitQueue())},Glob.prototype.emitMatch=function(t){this._emitQueue.push(t),this._processEmitQueue()},Glob.prototype._processEmitQueue=function(t){for(;!this._processingEmitQueue&&!this.paused;){this._processingEmitQueue=!0;var t=this._emitQueue.shift();if(!t){this._processingEmitQueue=!1;break}this.log("emit!",t===this.EOF?"end":"match"),this.emit(t===this.EOF?"end":"match",t),this._processingEmitQueue=!1}},Glob.prototype._process=function(t,s,i,e){var r,o,h,n;if(assert(this instanceof Glob),r=function(t,s){assert(this instanceof Glob),this.paused?(this._processQueue||(this._processQueue=[],this.once("resume",function(){var t=this._processQueue;this._processQueue=null,t.forEach(function(t){t()})})),this._processQueue.push(e.bind(this,t,s))):e.call(this,t,s)}.bind(this),this.aborted)return r();if(s>this.maxDepth)return r();for(o=0;"string"==typeof t[o];)o++;switch(o){case t.length:return h=t.join("/"),this._stat(h,function(t){return t&&(h&&isAbsolute(h)&&!this.nomount&&(h="/"===h.charAt(0)?path.join(this.root,h):path.resolve(this.root,h)),"win32"===process.platform&&(h=h.replace(/\\/g,"/")),this.matches[i]=this.matches[i]||{},this.matches[i][h]=!0,this.emitMatch(h)),r()}),void 0;case 0:h=null;break;default:h=t.slice(0,o),h=h.join("/")}return null===h?n=".":isAbsolute(h)||isAbsolute(t.join("/"))?(h&&isAbsolute(h)||(h=path.join("/",h)),n=h=path.resolve(h),this.log("absolute: ",h,this.root,t,n)):n=h,this.log("readdir(%j)",n,this.cwd,this.root),this._readdir(n,function(e,n){var a,c,u,l,p,f,d;return e?r():t[o]===minimatch.GLOBSTAR?(a=[t.slice(0,o).concat(t.slice(o+1))],n.forEach(function(s){("."!==s.charAt(0)||this.dot)&&(a.push(t.slice(0,o).concat(s).concat(t.slice(o+1))),a.push(t.slice(0,o).concat(s).concat(t.slice(o))))},this),c=a.length,u=null,a.forEach(function(t){this._process(t,s+1,i,function(t){return u?void 0:t?r(u=t):--c<=0?r():void 0})},this),void 0):(l=t[o],"string"==typeof l?(p=-1!==n.indexOf(l),n=p?n[l]:[]):(f=t[o]._glob,d=this.dot||"."===f.charAt(0),n=n.filter(function(s){return("."!==s.charAt(0)||d)&&("string"==typeof t[o]&&s===t[o]||s.match(t[o]))})),o!==t.length-1||this.mark||this.stat?(c=n.length,u=null,0===c?r():(n.forEach(function(e){var h=t.slice(0,o).concat(e).concat(t.slice(o+1));this._process(h,s+1,i,function(t){return u?void 0:t?r(u=t):0===--c?r.call(this):void 0})},this),void 0)):(n.forEach(function(t){h&&(t="/"!==h?h+"/"+t:h+t),"/"!==t.charAt(0)||this.nomount||(t=path.join(this.root,t)),"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this.matches[i]=this.matches[i]||{},this.matches[i][t]=!0,this.emitMatch(t)},this),r.call(this)))})},Glob.prototype._stat=function(t,s){var i,e,r,o,h;if(assert(this instanceof Glob),i=t,"/"===t.charAt(0)?i=path.join(this.root,t):this.changedCwd&&(i=path.resolve(this.cwd,t)),this.log("stat",[this.cwd,t,"=",i]),t.length>this.maxLength)return e=Error("Path name too long"),e.code="ENAMETOOLONG",e.path=t,this._afterStat(t,i,s,e);if(this.statCache.hasOwnProperty(t))return r=this.statCache[t],o=r&&(Array.isArray(r)||2===r),this.sync?s.call(this,!!r,o):process.nextTick(s.bind(this,!!r,o));if(this.sync){try{h=fs.statSync(i)}catch(n){e=n}this._afterStat(t,i,s,e,h)}else fs.stat(i,this._afterStat.bind(this,t,i,s))},Glob.prototype._afterStat=function(t,s,i,e,r){var o;assert(this instanceof Glob),"/"===s.slice(-1)&&r&&!r.isDirectory()&&(this.log("should be ENOTDIR, fake it"),e=Error("ENOTDIR, not a directory '"+s+"'"),e.path=s,e.code="ENOTDIR",r=null),o=e||!r?!1:r.isDirectory()?2:1,this.statCache[t]=this.statCache[t]||o,i.call(this,!!o,2===o)},Glob.prototype._readdir=function(t,s){var i,e,r,o,h;if(assert(this instanceof Glob),i=t,"/"===t.charAt(0)?i=path.join(this.root,t):isAbsolute(t)?i=t:this.changedCwd&&(i=path.resolve(this.cwd,t)),this.log("readdir",[this.cwd,t,i]),t.length>this.maxLength)return e=Error("Path name too long"),e.code="ENAMETOOLONG",e.path=t,this._afterReaddir(t,i,s,e);if(this.statCache.hasOwnProperty(t)){if(r=this.statCache[t],Array.isArray(r))return this.sync?s.call(this,null,r):process.nextTick(s.bind(this,null,r));if(!r||1===r)return o=r?"ENOTDIR":"ENOENT",e=Error((r?"Not a directory":"Not found")+": "+t),e.path=t,e.code=o,this.log(t,e),this.sync?s.call(this,e):process.nextTick(s.bind(this,e))}if(this.sync){try{h=fs.readdirSync(i)}catch(n){e=n}return this._afterReaddir(t,i,s,e,h)}fs.readdir(i,this._afterReaddir.bind(this,t,i,s))},Glob.prototype._afterReaddir=function(t,s,i,e,r){if(assert(this instanceof Glob),r&&!e)return this.statCache[t]=r,this.mark||this.stat||r.forEach(function(s){s="/"===t?t+s:t+"/"+s,this.statCache[s]=!0},this),i.call(this,e,r);if(e)switch(e.code){case"ENOTDIR":return this.statCache[t]=1,i.call(this,e);case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":return this.statCache[t]=!1,i.call(this,e);default:return this.statCache[t]=!1,this.strict&&this.emit("error",e),this.silent||console.error("glob error",e),i.call(this,e)}},isAbsolute="win32"===process.platform?absWin:absUnix;