function ExtendedHeader(){Entry.apply(this,arguments),this.on("data",this._parse),this.fields={},this._position=0,this._fieldPos=0,this._state=SIZE,this._sizeBuf=[],this._keyBuf=[],this._valBuf=[],this._size=-1,this._key=""}function parse(e){var t,s,i,r;if(this._state!==ERR)for(t=0,s=e.length;s>t;this._position++,this._fieldPos++,t++){if(i=e[t],this._size>=0&&this._fieldPos>this._size)return error(this,"field exceeds length="+this._size),void 0;switch(this._state){case ERR:return;case SIZE:if(i===space){this._state=KEY,this._size=parseInt(""+new Buffer(this._sizeBuf),10),this._sizeBuf.length=0;continue}if(_0>i||i>_9)return error(this,"expected ["+_0+".."+_9+"], got "+i),void 0;this._sizeBuf.push(i);continue;case KEY:if(i===eq){this._state=VAL,this._key=""+new Buffer(this._keyBuf),keyTrans[this._key]&&(this._key=keyTrans[this._key]),this._keyBuf.length=0;continue}this._keyBuf.push(i);continue;case VAL:if(this._fieldPos===this._size-1){if(i!==cr)return error(this,"expected \\n at end of field"),void 0;r=""+new Buffer(this._valBuf),numeric[this._key]&&(r=parseFloat(r)),this.fields[this._key]=r,this._valBuf.length=0,this._state=SIZE,this._size=-1,this._fieldPos=-1;continue}this._valBuf.push(i);continue}}}function error(e,t){t="invalid header: "+t+"\nposition="+e._position+"\nfield position="+e._fieldPos,e.error(t),e.state=ERR}var Entry,inherits,tar,numeric,keyTrans,s,states,SIZE,KEY,VAL,ERR,_0,_9,point,a,Z,z,space,eq,cr;module.exports=ExtendedHeader,Entry=require("./entry.js"),inherits=require("../vendor/inherits/inherits.js"),tar=require("../tar.js"),numeric=tar.numeric,keyTrans={"SCHILY.dev":"dev","SCHILY.ino":"ino","SCHILY.nlink":"nlink"},inherits(ExtendedHeader,Entry,{_parse:parse}),s=0,states=ExtendedHeader.states={},SIZE=states.SIZE=s++,KEY=states.KEY=s++,VAL=states.VAL=s++,ERR=states.ERR=s++,Object.keys(states).forEach(function(e){states[states[e]]=states[e]}),states[s]=null,_0="0".charCodeAt(0),_9="9".charCodeAt(0),point=".".charCodeAt(0),a="a".charCodeAt(0),Z="Z".charCodeAt(0),a="a".charCodeAt(0),z="z".charCodeAt(0),space=" ".charCodeAt(0),eq="=".charCodeAt(0),cr="\n".charCodeAt(0);